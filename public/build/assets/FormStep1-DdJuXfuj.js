import{Q as f}from"./QSelect-C2C0-NM-.js";import{r as y,c as b,T as U,a as n,b as $,w as m,f as r,i as a,s as c,ay as v,x as l,n as x,g as u,t as i,e as p,Q as h,p as T,l as F,m as B,q as O,u as j}from"./app-Cg05E-M0.js";import{Q as P}from"./QForm-Dzb_p1Wd.js";import{Q as E}from"./QPage-B55A1LJH.js";import{C as G}from"./ClosePopup-BoeLJsVb.js";import{u as K}from"./use-quasar-0Rkp9tN6.js";import{_ as L}from"./WebLayout-DQCwnYNu.js";import{_ as H}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./QChip-Cosd9F7v.js";import"./format-PnhPivZU.js";import"./QMenu-Dlx7_XBC.js";import"./rtl-DFPa-2ov.js";import"./QLayout-Dx2kdi13.js";import"./QTabs-DBgfMQU8.js";const I={class:"flex flex-col justify-center items-center gap-6"},Y={class:"border w-[412px] h-[996px] rounded-[10px] p-[23px]"},z={key:0,class:"text-red-500 text-sm"},R={class:""},Z={class:"flex gap-4"},J={key:0,class:"text-red"},W={key:0,class:"text-red-500 text-sm"},X={key:0,class:"text-red-500 text-sm"},ee={key:0,class:"text-red"},te={key:0,class:"text-red"},re={key:0,class:"text-red-500 text-sm"},le={key:0,class:"text-red"},se={key:0,class:"text-red-500 text-sm"},oe={key:0,class:"text-red-500 text-sm"},ie={class:"text-2xl text-bold"},ae={class:"mb-4 text-sm text-bold"},de={class:"leading-[2px] pt-6"},ne={class:"leading-[2px] pt-4"},ue={class:"leading-[2px] pt-4"},pe={class:"leading-[2px] pt-4"},me={class:"leading-[2px] pt-4"},ce={class:"leading-[2px] pt-4"},ve={class:"leading-[2px] pt-4"},xe={class:"leading-[2px] pt-4"},ge=Object.assign({layout:L},{__name:"FormStep1",props:["form","districts","constituency","relative"],setup(C){const d=C,g=y(!1),D=K(),k=y(d.districts||[]),V=y(d.constituency||[]),w=y(d.relative||[]),M=b(()=>{const s=k.value.find(e=>e.value===t.district_id);return s?s.label:""}),N=b(()=>{const s=V.value.find(e=>e.value===t.constituency_id);return s?s.label:""});b(()=>{const s=w.value.find(e=>e.value===t.relative_id);return s?s.label:""});const q=b(()=>t.district_id?V.value.filter(s=>s.district===t.district_id):[]),Q=[{label:"Male",value:"male"},{label:"Female",value:"female"},{label:"Other",value:"other"}],t=U({name:d.form.name||"",relative_id:d.form.relative_id||"",relative_name:d.form.relative_name||"",dob:d.form.dob||"",gender:d.form.gender||"",district_id:d.form.district_id||"",locality:d.form.locality||"",constituency_id:d.form.constituency_id||"",time_of_death:d.form.time_of_death||"",place_of_death:d.form.place_of_death||""}),A=s=>{if(!s)return"";const e=new Date(s);if(isNaN(e))return s;const o={year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0};return e.toLocaleString("en-IN",o)},S=b(()=>{if(!t.dob||!t.time_of_death)return"N/A";const s=new Date(t.dob),e=new Date(t.time_of_death);if(isNaN(s.getTime())||isNaN(e.getTime()))return"N/A";let o=e.getFullYear()-s.getFullYear();return e.getMonth()>s.getMonth()||e.getMonth()===s.getMonth()&&e.getDate()>=s.getDate()||(o-=1),o>=0?o:"N/A"}),_=()=>{t.post(route("form.storeStep1"),{onError:s=>{console.log(s),g.value=!1},onSuccess:()=>{console.log("Form 1 submitted"),g.value=!1,D.notify({type:"positive",message:"Form 1 submitted successfully!",position:"top-right"})}})};return(s,e)=>(n(),$(E,{padding:""},{default:m(()=>[r("div",I,[e[22]||(e[22]=r("img",{id:"background",class:"w-[412px] h-[193px",src:"image/Vertical Stepper with numbers.png"},null,-1)),r("div",Y,[a(P,{onSubmit:T(_,["prevent"]),class:"q-gutter-md"},{default:m(()=>[r("div",null,[e[13]||(e[13]=r("div",{class:"pb-3 flex items-center gap-2"},[r("div",{class:"w-[3px] h-[19px] flex-shrink-0 bg-black"}),r("h5",null,"Mitthi Chhungchang")],-1)),r("div",null,[e[12]||(e[12]=r("div",{class:"text-sm font-medium text-black q-mb-xs"}," Mitthi hming ",-1)),c(r("input",{type:"text",placeholder:"Mitthi hming chhu lut rawh le","onUpdate:modelValue":e[0]||(e[0]=o=>l(t).name=o),class:x(["border p-2 w-full rounded-lg",l(t).errors.name?"border-red-500":"border-gray-300"])},null,2),[[v,l(t).name]]),l(t).errors.name?(n(),u("div",z,i(l(t).errors.name),1)):p("",!0)])]),r("div",R,[e[14]||(e[14]=r("div",{class:"text-sm font-medium text-black q-mb-xs"}," A chhungte hming ",-1)),r("div",Z,[r("div",null,[a(f,{class:"w-24",outlined:"",dense:"",modelValue:l(t).relative_id,"onUpdate:modelValue":e[1]||(e[1]=o=>l(t).relative_id=o),options:w.value,"option-label":"label","option-value":"value","map-options":"","emit-value":"",label:"s/o",error:l(t).errors.relative_id,"error-message":l(t).errors.relative_id},null,8,["modelValue","options","error","error-message"]),s.$page.props.errors.relative?(n(),u("div",J,i(s.$page.props.errors.relative),1)):p("",!0)]),r("div",null,[c(r("input",{type:"text","onUpdate:modelValue":e[2]||(e[2]=o=>l(t).relative_name=o),class:x(["border p-2 w-60 rounded-lg",l(t).errors.relative_name?"border-red-500":"border-gray-300"]),placeholder:"An hming chhut luhna"},null,2),[[v,l(t).relative_name]]),l(t).errors.relative_name?(n(),u("div",W,i(l(t).errors.relative_name),1)):p("",!0)])])]),r("div",null,[e[15]||(e[15]=r("div",{class:"text-sm font-medium text-black q-mb-xs"}," A pianni leh thla ",-1)),c(r("input",{class:x(["text-[#61646B]",["border p-2 w-full rounded-lg",l(t).errors.dob?"border-red-500":"border-gray-300"]]),type:"date",placeholder:"Mitthi Pianni leh thla","onUpdate:modelValue":e[3]||(e[3]=o=>l(t).dob=o)},null,2),[[v,l(t).dob]]),l(t).errors.dob?(n(),u("div",X,i(l(t).errors.dob),1)):p("",!0)]),r("div",null,[e[16]||(e[16]=r("div",{class:"text-sm font-medium text-black q-mb-xs"}," Gender ",-1)),a(f,{outlined:"",dense:"",modelValue:l(t).gender,"onUpdate:modelValue":e[4]||(e[4]=o=>l(t).gender=o),options:Q,label:"Gender",error:l(t).errors.gender,"error-message":l(t).errors.gender?l(t).errors.gender:"",required:""},null,8,["modelValue","error","error-message"])]),s.$page.props.errors.gender?(n(),u("div",ee,i(s.$page.props.errors.gender),1)):p("",!0),r("div",null,[e[17]||(e[17]=r("div",{class:"text-sm font-medium text-black q-mb-xs"}," District ",-1)),a(f,{outlined:"",dense:"",modelValue:l(t).district_id,"onUpdate:modelValue":e[5]||(e[5]=o=>l(t).district_id=o),label:"Select District",options:k.value,"option-label":"label","option-value":"value","map-options":"","emit-value":"",error:l(t).errors.district_id,"error-message":l(t).errors.district_id},null,8,["modelValue","options","error","error-message"]),s.$page.props.errors.district?(n(),u("div",te,i(s.$page.props.errors.district),1)):p("",!0)]),r("div",null,[e[18]||(e[18]=r("div",{class:"text-sm font-medium text-black q-mb-xs"}," Veng/Khua ",-1)),c(r("input",{type:"text",placeholder:"Ruang Zalhna tur veng","onUpdate:modelValue":e[6]||(e[6]=o=>l(t).locality=o),class:x(["border p-2 w-full rounded-lg",l(t).errors.locality?"border-red-500":"border-gray-300"])},null,2),[[v,l(t).locality]]),l(t).errors.locality?(n(),u("div",re,i(l(t).errors.locality),1)):p("",!0)]),r("div",null,[e[19]||(e[19]=r("div",{class:"text-sm font-medium text-black q-mb-xs"}," Assembly constituency ",-1)),a(f,{outlined:"",dense:"",label:"Mitthi te awmna assembly constituency",modelValue:l(t).constituency_id,"onUpdate:modelValue":e[7]||(e[7]=o=>l(t).constituency_id=o),options:q.value,"option-label":"label","option-value":"value","map-options":"","emit-value":"",error:l(t).errors.constituency_id,"error-message":l(t).errors.constituency_id},null,8,["modelValue","options","error","error-message"]),s.$page.props.errors.constituency?(n(),u("div",le,i(s.$page.props.errors.constituency),1)):p("",!0)]),r("div",null,[e[20]||(e[20]=r("div",{class:"text-sm font-medium text-black q-mb-xs"}," Thih ni leh darkar ",-1)),c(r("input",{class:x(["text-[#61646B]",["border p-2 w-full rounded-lg",l(t).errors.time_of_death?"border-red-500":"border-gray-300"]]),type:"datetime-local",placeholder:"Mitthi thih ni leh darkar","onUpdate:modelValue":e[8]||(e[8]=o=>l(t).time_of_death=o)},null,2),[[v,l(t).time_of_death]]),l(t).errors.time_of_death?(n(),u("div",se,i(l(t).errors.time_of_death),1)):p("",!0)]),r("div",null,[e[21]||(e[21]=r("div",{class:"text-sm font-medium text-black q-mb-xs"}," Thihna hmun ",-1)),c(r("input",{type:"text",placeholder:"Thihna hmun","onUpdate:modelValue":e[9]||(e[9]=o=>l(t).place_of_death=o),class:x(["border p-2 w-full rounded-lg",l(t).errors.place_of_death?"border-red-500":"border-gray-300"])},null,2),[[v,l(t).place_of_death]]),l(t).errors.place_of_death?(n(),u("div",oe,i(l(t).errors.place_of_death),1)):p("",!0)]),a(h,{style:{padding:"10px 24px","border-radius":"12px"},outline:"",unelevated:"","text-color":"black",label:"Preview",color:"white",onClick:e[10]||(e[10]=o=>g.value=!0)}),a(h,{unelevated:"",label:"Next",color:"black",onClick:_,style:{padding:"10px 95px","border-radius":"12px"}})]),_:1})])]),a(j,{modelValue:g.value,"onUpdate:modelValue":e[11]||(e[11]=o=>g.value=o)},{default:m(()=>[r("div",null,[a(F,{class:"w-[412px] h-[791px] rounded-t-lg"},{default:m(()=>[a(B,{class:"flex flex-col items-center"},{default:m(()=>[e[23]||(e[23]=r("p",{class:"text-[12px]"},"Mitthi Chungchang",-1)),e[24]||(e[24]=r("img",{class:"w-[17px] h-[30px]",src:"image/ruang.png",alt:""},null,-1)),r("h5",ie,i(l(t).name),1),r("p",ae," s/o "+i(l(t).relative_name),1)]),_:1}),e[33]||(e[33]=r("hr",{class:"my-4 border-border m-4"},null,-1)),a(B,{class:"q-pt-none ml-[42px]"},{default:m(()=>[r("div",de,[e[25]||(e[25]=r("p",{class:"text-[#61646B]"},"Mitthi pianni leh thla",-1)),r("p",null,i(l(t).dob),1)]),r("div",ne,[e[26]||(e[26]=r("p",{class:"text-[#61646B]"},"Kum",-1)),r("p",null,i(S.value)+" years",1)]),r("div",ue,[e[27]||(e[27]=r("p",{class:"text-[#61646B]"},"Gender",-1)),r("p",null,i(l(t).gender.value),1)]),r("div",pe,[e[28]||(e[28]=r("p",{class:"text-[#61646B]"},"Thih ni leh darkar",-1)),r("p",null,i(A(l(t).time_of_death)),1)]),r("div",me,[e[29]||(e[29]=r("p",{class:"text-[#61646B]"},"Thihna hmun",-1)),r("p",null,i(l(t).place_of_death),1)]),r("div",ce,[e[30]||(e[30]=r("p",{class:"text-[#61646B]"},"District",-1)),r("p",null,i(M.value),1)]),r("div",ve,[e[31]||(e[31]=r("p",{class:"text-[#61646B]"},"Veng/Khua",-1)),r("p",null,i(l(t).locality),1)]),r("div",xe,[e[32]||(e[32]=r("p",{class:"text-[#61646B]"},"Assembly Constituency",-1)),r("p",null,i(N.value),1)])]),_:1}),a(O,{class:"ml-[22px] pt-[35px]"},{default:m(()=>[c(a(h,{style:{padding:"10px 28px","border-radius":"12px"},outline:"",unelevated:"","text-color":"black",color:"white",label:"Edit"},null,512),[[G]]),a(h,{style:{padding:"10px 80px","border-radius":"12px"},unelevated:"",label:"Approve & Next",color:"black",onClick:_})]),_:1})]),_:1})])]),_:1},8,["modelValue"])]),_:1}))}}),Ae=H(ge,[["__scopeId","data-v-a90f7205"]]);export{Ae as default};
