import{Q as F}from"./QSpace-B8yaITbX.js";import{Q as h,a as N}from"./QBreadcrumbs-3Mn1D1sQ.js";import{T as I,c as M,a as T,b as Z,w as m,f as t,i as l,k as i,x as r,a5 as D,s as G,Q as E}from"./app-jSku1vCx.js";import{Q as R}from"./QSelect-DGroO4KQ.js";import{Q as H}from"./QForm-CtgMiRe_.js";import{Q as J}from"./QPage-C99ylTjV.js";import{u as K}from"./use-quasar-CLQ07CRK.js";import{_ as L}from"./AdminLayout-Cm53CRJt.js";import"./QChip-DD3s9r6w.js";import"./format-C6r4MtX8.js";import"./QMenu-B9xFxoVG.js";import"./rtl-DFPa-2ov.js";import"./QLayout-Cja8Z5W6.js";import"./DropdownLink-DOWg3r91.js";const W={class:"flex flex-inline items-center"},X={class:"row q-col-gutter-sm"},Y={class:"col-xs-12 col-sm-6"},ee={class:"col-xs-12 col-sm-6"},re={class:"col-xs-12 col-sm-6"},se={class:"col-xs-12 col-sm-6"},oe={class:"col-xs-12 col-sm-6"},le={class:"col-xs-12 col-sm-6"},te={class:"col-xs-12 col-sm-6"},ae={class:"col-xs-12"},Qe=Object.assign({layout:L},{__name:"Edit",props:{data:Object,roles:Object},setup(k){var p,g,c,f,w;const d=K(),n=k,e=I({name:(p=n.data)==null?void 0:p.name,phone:(g=n.data)==null?void 0:g.phone,email:(c=n.data)==null?void 0:c.email,roles:((f=n.data)==null?void 0:f.roles.map(a=>a.name))||[],district:((w=n.data)==null?void 0:w.district_id.map(a=>a.district_id))||[],password:"",password_confirmation:""}),u=M(()=>n.roles.map(a=>({id:a.id,name:a.name})));console.log(u.value);const j=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,z=a=>A(),A=()=>{e.name="",e.mobile="",e.email="",e.password="",e.roles=[],e.password_confirmation=""},C=()=>{e.put(route("user.update",n.data.id),{onStart:()=>{d.loading.show()},onSuccess:()=>{d.notify({type:"positive",message:"User updated successfully!"}),e.reset()},onError:()=>{d.notify({type:"negative",message:"There was an error updating the user."})},onFinish:()=>{d.loading.hide()}})};return(a,s)=>(T(),Z(J,{padding:""},{default:m(()=>[t("div",W,[s[14]||(s[14]=t("p",{class:"page-title"},"Edit User",-1)),l(F),l(N,{align:"right",gutter:"xs"},{default:m(()=>[l(h,{to:{name:"user:read"},label:"Users"}),l(h,{label:"Edit User"})]),_:1})]),l(H,{class:"zcard q-pa-md",onReset:z,onSubmit:C},{default:m(()=>{var v,y,b,V,Q,x,S,B,U,_,O,P,q,$;return[t("div",X,[t("div",Y,[l(i,{modelValue:r(e).name,"onUpdate:modelValue":s[0]||(s[0]=o=>r(e).name=o),class:"my-input",dense:"",label:"Name",outlined:"",error:r(e).errors.hasOwnProperty("name"),"error-message":(y=(v=r(e).errors)==null?void 0:v.name)==null?void 0:y.toString(),onBlur:s[1]||(s[1]=o=>delete r(e).errors.name),rules:[o=>!!o||"Username is required"]},null,8,["modelValue","error","error-message","rules"])]),t("div",ee,[l(i,{modelValue:r(e).phone,"onUpdate:modelValue":s[2]||(s[2]=o=>r(e).phone=o),class:"my-input",mask:"##########",dense:"",label:"Mobile",outlined:"",error:r(e).errors.hasOwnProperty("phone"),"error-message":(V=(b=r(e).errors)==null?void 0:b.phone)==null?void 0:V.toString(),onBlur:s[3]||(s[3]=o=>delete r(e).errors.phone),rules:[o=>o.length===10||"Mobile is required"]},null,8,["modelValue","error","error-message","rules"])]),t("div",re,[l(i,{modelValue:r(e).email,"onUpdate:modelValue":s[4]||(s[4]=o=>r(e).email=o),class:"my-input",dense:"",label:"Email",outlined:"",error:r(e).errors.hasOwnProperty("email"),"error-message":(x=(Q=r(e).errors)==null?void 0:Q.email)==null?void 0:x.toString(),onBlur:s[5]||(s[5]=o=>delete r(e).errors.email),rules:[o=>j.test(o)||"Invalid email"]},null,8,["modelValue","error","error-message","rules"])]),t("div",se,[l(R,{modelValue:r(e).roles,"onUpdate:modelValue":s[6]||(s[6]=o=>r(e).roles=o),multiple:"","use-chips":"",options:u.value,dense:"",class:"my-input",label:"Roles",outlined:"","option-value":"id","option-label":"name",error:r(e).errors.hasOwnProperty("roles"),"error-message":(B=(S=r(e).errors)==null?void 0:S.roles)==null?void 0:B.toString(),onBlur:s[7]||(s[7]=o=>delete r(e).errors.roles),rules:[o=>o.length>0||"roles is required"]},null,8,["modelValue","options","error","error-message","rules"])]),t("div",oe,[l(R,{modelValue:r(e).roles,"onUpdate:modelValue":s[8]||(s[8]=o=>r(e).roles=o),multiple:"","use-chips":"",options:u.value,dense:"",class:"my-input",label:"Roles",outlined:"","option-value":"id","option-label":"name",error:r(e).errors.hasOwnProperty("roles"),"error-message":(_=(U=r(e).errors)==null?void 0:U.roles)==null?void 0:_.toString(),onBlur:s[9]||(s[9]=o=>delete r(e).errors.roles),rules:[o=>o.length>0||"roles is required"]},null,8,["modelValue","options","error","error-message","rules"])]),t("div",le,[l(i,{modelValue:r(e).password,"onUpdate:modelValue":s[10]||(s[10]=o=>r(e).password=o),type:"password",class:"my-input",dense:"",label:"Password",outlined:"",error:r(e).errors.hasOwnProperty("password"),"error-message":(P=(O=r(e).errors)==null?void 0:O.password)==null?void 0:P.toString(),onBlur:s[11]||(s[11]=o=>delete r(e).errors.password)},null,8,["modelValue","error","error-message"])]),t("div",te,[l(i,{modelValue:r(e).password_confirmation,"onUpdate:modelValue":s[12]||(s[12]=o=>r(e).password_confirmation=o),type:"password",class:"my-input",dense:"",label:"Confirm Password",outlined:"",error:r(e).errors.hasOwnProperty("password_confirmation"),"error-message":($=(q=r(e).errors)==null?void 0:q.password_confirmation)==null?void 0:$.toString(),onBlur:s[13]||(s[13]=o=>delete r(e).errors.password_confirmation)},null,8,["modelValue","error","error-message"])])]),t("div",ae,[l(D,{class:"q-my-md"})]),l(G,{class:"q-mt-md"},{default:m(()=>[l(E,{color:"primary",flat:"",type:"submit",label:"Save"}),l(E,{color:"negative",flat:"",type:"reset",label:"Reset"})]),_:1})]}),_:1})]),_:1}))}});export{Qe as default};
