import{Q as _}from"./QPage-D1RYuMuC.js";import{C as h,c as k,a as d,b as D,w as A,d as C,u as S,Z as V,g as t,n as N,q as n,D as m,h as r,i as u,F as c,z as b,N as R,t as l,v as U}from"./app-DYJu_hh0.js";import{_ as B}from"./AdminLayout-BxM4lzZW.js";import"./QLayout-DKyBKObu.js";import"./format-DPTxXwLs.js";import"./QMenu-BHGL6jif.js";import"./QExpansionItem-C9_T0O2J.js";import"./ClosePopup-CfCC9Cj8.js";const j={class:"p-6"},q={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},E=["value"],F=["value"],P=["value"],L={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},M={class:"bg-white rounded-lg overflow-x-auto table-responsive"},O={class:"q-table q-table__grid w-full"},z={class:"bg-white divide-y divide-gray-200"},Q={class:"px-6 py-4 whitespace-nowrap"},T={class:"px-6 py-4 whitespace-nowrap"},$={class:"px-6 py-4 whitespace-nowrap"},G={class:"px-6 py-4 whitespace-nowrap"},Z={class:"px-6 py-4 whitespace-nowrap"},H={class:"px-6 py-4 whitespace-nowrap"},I={class:"px-6 py-4 whitespace-nowrap"},J={class:"px-6 py-4 whitespace-nowrap"},lt=Object.assign({layout:B},{__name:"Report",props:{applications:Array,filters:Object,dropdowns:Object},setup(p){const a=p,o=h({status:a.filters.status||"",district_id:a.filters.district_id||"",constituency_id:a.filters.constituency_id||"",start_date:a.filters.start_date||"",end_date:a.filters.end_date||""}),f=k(()=>o.district_id?a.dropdowns.constituencies.filter(i=>i.district_id==o.district_id):a.dropdowns.constituencies),g=()=>{R.get("/verifier/report",o)},w=()=>{const i=new URLSearchParams(o).toString();window.location.href=`/verifier/report/export?${i}`},v=i=>({Pending:"bg-yellow-100 text-yellow-800",Approved:"bg-green-100 text-green-800",Rejected:"bg-red-100 text-red-800",Processed:"bg-blue-100 text-blue-800"})[i]||"bg-gray-100 text-gray-800";return(i,e)=>(d(),D(_,null,{default:A(()=>[C(S(V),{title:"Report"}),t("div",j,[e[15]||(e[15]=t("h1",{class:"text-2xl font-bold mb-6"},"Generate Report",-1)),t("form",{onSubmit:N(g,["prevent"]),class:"mb-6 space-y-4 bg-white p-4 rounded-lg shadow"},[t("div",q,[t("div",null,[e[6]||(e[6]=t("label",{class:"block text-sm font-medium text-gray-700"},"Status",-1)),n(t("select",{"onUpdate:modelValue":e[0]||(e[0]=s=>o.status=s),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm"},[e[5]||(e[5]=t("option",{value:""},"All Statuses",-1)),(d(!0),r(c,null,u(p.dropdowns.statuses,s=>(d(),r("option",{key:s,value:s},l(s),9,E))),128))],512),[[m,o.status]])]),t("div",null,[e[8]||(e[8]=t("label",{class:"block text-sm font-medium text-gray-700"},"Deceased District",-1)),n(t("select",{"onUpdate:modelValue":e[1]||(e[1]=s=>o.district_id=s),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm"},[e[7]||(e[7]=t("option",{value:""},"All Districts",-1)),(d(!0),r(c,null,u(p.dropdowns.districts,s=>(d(),r("option",{key:s.id,value:s.id},l(s.name),9,F))),128))],512),[[m,o.district_id]])]),t("div",null,[e[10]||(e[10]=t("label",{class:"block text-sm font-medium text-gray-700"},"Deceased Constituency",-1)),n(t("select",{"onUpdate:modelValue":e[2]||(e[2]=s=>o.constituency_id=s),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm"},[e[9]||(e[9]=t("option",{value:""},"All Constituencies",-1)),(d(!0),r(c,null,u(f.value,s=>(d(),r("option",{key:s.id,value:s.id},l(s.name),9,P))),128))],512),[[m,o.constituency_id]])])]),t("div",L,[t("div",null,[e[11]||(e[11]=t("label",{class:"block text-sm font-medium text-gray-700"},"Start Date",-1)),n(t("input",{type:"date","onUpdate:modelValue":e[3]||(e[3]=s=>o.start_date=s),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm"},null,512),[[b,o.start_date]])]),t("div",null,[e[12]||(e[12]=t("label",{class:"block text-sm font-medium text-gray-700"},"End Date",-1)),n(t("input",{type:"date","onUpdate:modelValue":e[4]||(e[4]=s=>o.end_date=s),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm"},null,512),[[b,o.end_date]])])]),t("div",{class:"flex gap-4"},[e[13]||(e[13]=t("button",{type:"submit",class:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700"}," Apply Filters ",-1)),t("button",{onClick:w,type:"button",class:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700"}," Export to Excel ")])],32),t("div",M,[t("table",O,[e[14]||(e[14]=t("thead",null,[t("tr",{class:"bg-[#3A424A] text-white"},[t("th",{class:"px-6 py-3 text-left text-xs font-medium uppercase"},"App No"),t("th",{class:"px-6 py-3 text-left text-xs font-medium uppercase"},"Status"),t("th",{class:"px-6 py-3 text-left text-xs font-medium uppercase"},"Applicant"),t("th",{class:"px-6 py-3 text-left text-xs font-medium uppercase"},"District"),t("th",{class:"px-6 py-3 text-left text-xs font-medium uppercase"},"Deceased"),t("th",{class:"px-6 py-3 text-left text-xs font-medium uppercase"},"Constituency "),t("th",{class:"px-6 py-3 text-left text-xs font-medium uppercase"},"Transport Cost "),t("th",{class:"px-6 py-3 text-left text-xs font-medium uppercase"},"Date")])],-1)),t("tbody",z,[(d(!0),r(c,null,u(p.applications,s=>{var x,y;return d(),r("tr",{key:s.id},[t("td",Q,l(s.application_no),1),t("td",T,[t("span",{class:U([v(s.status),"px-2 py-1 rounded-full text-sm"])},l(s.status),3)]),t("td",$,l(s.applicant.name),1),t("td",G,l(s.applicant.district.name),1),t("td",Z,l(s.deceased.name),1),t("td",H,l(((x=s.deceased.constituency)==null?void 0:x.name)||"N/A"),1),t("td",I,l(((y=s.transport)==null?void 0:y.transport_cost)||0),1),t("td",J,l(new Date(s.created_at).toLocaleDateString()),1)])}),128))])])])])]),_:1}))}});export{lt as default};
