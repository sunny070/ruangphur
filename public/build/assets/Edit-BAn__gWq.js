import{Q as j}from"./QSpace-DO7uqt5L.js";import{Q as O,a as C}from"./QBreadcrumbs-D-LGXoS3.js";import{T as F,c as h,a as N,b as I,w as d,f as l,i as a,k as n,x as s,z as M,q as T,Q as q}from"./app-C0In1_Bg.js";import{Q as P}from"./QSelect-BYJrp-GI.js";import{Q as Z}from"./QForm-DfzRCM4G.js";import{Q as D}from"./QPage-D75BcEeD.js";import{u as G}from"./use-quasar-Zq_ctrB_.js";import{_ as H}from"./AdminLayout-zIaWW83l.js";import"./QChip-DR_ehPOn.js";import"./format-DY5QUvbx.js";import"./QMenu-DPumZ7aG.js";import"./rtl-DFPa-2ov.js";import"./QLayout-DRIoFCNj.js";import"./QExpansionItem-CzGHoK9d.js";import"./ClosePopup-CPzUbm6V.js";const J={class:"flex flex-inline items-center"},K={class:"row q-col-gutter-sm"},L={class:"col-xs-12 col-sm-6"},W={class:"col-xs-12 col-sm-6"},X={class:"col-xs-12 col-sm-6"},Y={class:"col-xs-12 col-sm-6"},ee={class:"col-xs-12 col-sm-6"},se={class:"col-xs-12 col-sm-6"},oe={class:"col-xs-12 col-sm-6"},re={class:"col-xs-12"},ye=Object.assign({layout:H},{__name:"Edit",props:{data:Object,roles:Object,districts:Array},setup($){var u,c,g,f,w;const m=G(),i=$,e=F({name:(u=i.data)==null?void 0:u.name,phone:(c=i.data)==null?void 0:c.phone,email:(g=i.data)==null?void 0:g.email,roles:((f=i.data)==null?void 0:f.roles.map(t=>t.id))||[],districts:((w=i.data)==null?void 0:w.districts.map(t=>t.id))||[],password:"",password_confirmation:""}),E=h(()=>i.districts.map(t=>({id:t.id,name:t.name}))),p=h(()=>i.roles.map(t=>({id:t.id,name:t.name})));console.log(p.value);const A=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,k=t=>z(),z=()=>{e.name="",e.mobile="",e.email="",e.password="",e.roles=[],e.password_confirmation=""},R=()=>{e.put(route("user.update",i.data.id),{onStart:()=>{m.loading.show()},onSuccess:()=>{m.notify({type:"positive",message:"User updated successfully!"}),e.reset()},onError:()=>{m.notify({type:"negative",message:"There was an error updating the user."})},onFinish:()=>{m.loading.hide()}})};return(t,o)=>(N(),I(D,{padding:""},{default:d(()=>[l("div",J,[o[12]||(o[12]=l("p",{class:"page-title"},"Edit User",-1)),a(j),a(C,{align:"right",gutter:"xs"},{default:d(()=>[a(O,{to:{name:"user:read"},label:"Users"}),a(O,{label:"Edit User"})]),_:1})]),a(Z,{class:"zcard q-pa-md",onReset:k,onSubmit:R},{default:d(()=>{var v,b,y,V,Q,x,_,S,U,B;return[l("div",K,[l("div",L,[a(n,{modelValue:s(e).name,"onUpdate:modelValue":o[0]||(o[0]=r=>s(e).name=r),class:"my-input",dense:"",label:"Name",outlined:"",error:s(e).errors.hasOwnProperty("name"),"error-message":(b=(v=s(e).errors)==null?void 0:v.name)==null?void 0:b.toString(),onBlur:o[1]||(o[1]=r=>delete s(e).errors.name),rules:[r=>!!r||"Username is required"]},null,8,["modelValue","error","error-message","rules"])]),l("div",W,[a(n,{modelValue:s(e).phone,"onUpdate:modelValue":o[2]||(o[2]=r=>s(e).phone=r),class:"my-input",mask:"##########",dense:"",label:"Mobile",outlined:"",error:s(e).errors.hasOwnProperty("phone"),"error-message":(V=(y=s(e).errors)==null?void 0:y.phone)==null?void 0:V.toString(),onBlur:o[3]||(o[3]=r=>delete s(e).errors.phone),rules:[r=>r.length===10||"Mobile is required"]},null,8,["modelValue","error","error-message","rules"])]),l("div",X,[a(n,{modelValue:s(e).email,"onUpdate:modelValue":o[4]||(o[4]=r=>s(e).email=r),class:"my-input",dense:"",label:"Email",outlined:"",error:s(e).errors.hasOwnProperty("email"),"error-message":(x=(Q=s(e).errors)==null?void 0:Q.email)==null?void 0:x.toString(),onBlur:o[5]||(o[5]=r=>delete s(e).errors.email),rules:[r=>A.test(r)||"Invalid email"]},null,8,["modelValue","error","error-message","rules"])]),l("div",Y,[a(P,{modelValue:s(e).districts,"onUpdate:modelValue":o[6]||(o[6]=r=>s(e).districts=r),multiple:"","use-chips":"",options:E.value,"option-value":"id","option-label":"name","emit-value":"","map-options":"",label:"Assign Districts"},null,8,["modelValue","options"])]),l("div",ee,[a(P,{modelValue:s(e).roles,"onUpdate:modelValue":o[7]||(o[7]=r=>s(e).roles=r),multiple:"","use-chips":"",options:p.value,"option-value":"id","option-label":"name","emit-value":"","map-options":"",label:"Roles"},null,8,["modelValue","options"])]),l("div",se,[a(n,{modelValue:s(e).password,"onUpdate:modelValue":o[8]||(o[8]=r=>s(e).password=r),type:"password",class:"my-input",dense:"",label:"Password",outlined:"",error:s(e).errors.hasOwnProperty("password"),"error-message":(S=(_=s(e).errors)==null?void 0:_.password)==null?void 0:S.toString(),onBlur:o[9]||(o[9]=r=>delete s(e).errors.password)},null,8,["modelValue","error","error-message"])]),l("div",oe,[a(n,{modelValue:s(e).password_confirmation,"onUpdate:modelValue":o[10]||(o[10]=r=>s(e).password_confirmation=r),type:"password",class:"my-input",dense:"",label:"Confirm Password",outlined:"",error:s(e).errors.hasOwnProperty("password_confirmation"),"error-message":(B=(U=s(e).errors)==null?void 0:U.password_confirmation)==null?void 0:B.toString(),onBlur:o[11]||(o[11]=r=>delete s(e).errors.password_confirmation)},null,8,["modelValue","error","error-message"])])]),l("div",re,[a(M,{class:"q-my-md"})]),a(T,{class:"q-mt-md"},{default:d(()=>[a(q,{color:"primary",flat:"",type:"submit",label:"Save"}),a(q,{color:"negative",flat:"",type:"reset",label:"Reset"})]),_:1})]}),_:1})]),_:1}))}});export{ye as default};
