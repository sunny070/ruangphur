import{r as Ct,e as Pt,a as d,f as p,g as o,b as t,j as i,k as w,y as Qt,z as Ft,Q as r,t as l,A as $t,d as c,h as v,p as zt,q as Dt,l as qt,u as Nt,m as jt,x as Kt,N as Et}from"./app-Dfx8wdb3.js";import{Q as h}from"./QChip-F2_HzQod.js";import{Q as Tt}from"./QPage-7_3KjJyu.js";import{C as Rt}from"./ClosePopup-CHpksyTA.js";import{_ as It}from"./AdminLayout-CKiilQGn.js";import"./QLayout-DG6G-lQ6.js";import"./format-DmVDsBgE.js";import"./QMenu-CDTgN4HV.js";import"./QExpansionItem-CN0lkqWd.js";const St={class:"grid md:grid-cols-2 gap-4"},Ot={class:"flex items-center order-1 md:order-none"},Yt={class:"flex flex-wrap gap-2 justify-end order-2"},Gt={class:"flex flex-col items-center px-4 md:pr-32"},Ht={class:"w-full max-w-4xl rounded-[10px] border border-[#EEE] bg-[#E9F4FF] p-4 md:p-5 mt-6"},Ut={class:"grid md:grid-cols-2 gap-4 text-center"},Jt={class:"flex flex-col items-center"},Lt={class:"text-xl md:text-2xl mt-2"},Wt={class:"mb-4 text-sm"},Xt={class:"grid md:grid-cols-3 gap-4"},Zt={class:"col-span-3 md:col-span-1"},_t={class:"font-bold"},te={class:"font-bold"},ee={class:"font-bold"},se={class:"flex flex-col md:flex-row justify-center items-center gap-4 mt-4"},le={class:"grid md:grid-cols-2 gap-4 px-4 md:pr-28 mt-6"},ie={class:"flex flex-col gap-4"},ae={class:"border-2 w-full p-4 md:pl-12 md:pt-6 rounded-md"},ne={class:"space-y-4"},oe={class:"leading-[2px] pt-4"},de={class:"leading-[2px] pt-4"},pe={class:"leading-[2px] pt-4"},re={class:"leading-[2px] pt-4"},ce={class:"leading-[2px] pt-4"},ue={class:"leading-[2px] pt-4"},me={class:"leading-[2px] pt-4"},xe={class:"border-2 w-full p-4 md:pl-12 md:pt-6 rounded-md"},ge={class:"space-y-4"},fe={class:"leading-[2px]"},be={class:"leading-[2px] pt-4"},ve={class:"leading-[2px] pt-4"},he={class:"leading-[2px] pt-4"},ke={class:"border-2 rounded-md w-full p-4 md:pl-12 md:pt-6"},ye={class:"flex flex-wrap gap-2"},we={class:"flex flex-col gap-4"},Be={class:"border-2 w-full p-4 md:pl-12 md:pt-6 rounded-md"},Ce={class:"space-y-4"},De={class:"pl-4"},je={class:"leading-[2px]"},Ee={class:"leading-[2px] pt-4"},Re={class:"pl-4"},Ae={class:"leading-[2px]"},Ve={class:"leading-[2px] pt-4"},Me={class:"leading-[2px] pt-4"},Pe={class:"pl-4"},Qe={class:"leading-[2px]"},Fe={class:"leading-[2px] pt-4"},$e={class:"leading-[2px] pt-4"},ze={class:"leading-[2px] pt-4"},qe={class:"border-2 rounded-md w-full p-4 md:pl-12 md:pt-6"},Ne={class:"space-y-4"},Ke={class:"leading-[2px]"},Te={class:"leading-[2px] pt-4"},Ie={class:"leading-[2px] pt-4"},Se={class:"flex flex-col md:flex-row justify-center items-center gap-4 my-6"},Ze=Object.assign({layout:It},{__name:"ApplicationDetails",props:{application:Object},setup(s){const x=s,k=Ct(!1),g=Ct("");let B=null;const C=a=>{B=a,k.value=!0},At=async()=>{if(!g.value.trim()){alert("Please provide a rejection reason");return}if(confirm("Are you sure you want to reject this application?"))try{await Et.post(`/admin/application/${B}/reject`,{feedback:g.value}),g.value=""}catch(a){console.error(a)}},D=async a=>{if(confirm("Are you sure you want to approve this application?"))try{await Et.post(`/admin/application/${a}/approve`)}catch(e){console.error(e)}},b=a=>{a?window.open(a,"_blank"):$q.notify({type:"negative",message:"File not found"})},Vt=(a,e)=>{const u=new Date(a),m=new Date(e),f=m.getFullYear()-u.getFullYear();return m.getMonth()<u.getMonth()||m.getMonth()===u.getMonth()&&m.getDate()<u.getDate()?f-1:f},Mt=Pt(()=>Vt(x.application.deceased.dob,x.application.deceased.time_of_death));return(a,e)=>(d(),p(Tt,{padding:""},{default:o(()=>{var u,m,f,y,j,E,R,A,V,M,P,Q,F,$,z,q,N,K,T,I,S,O,Y,G,H,U,J,L,W,X,Z,_,tt,et,st,lt,it,at,nt,ot,dt,pt,rt,ct,ut,mt,xt,gt,ft,bt,vt,ht,kt,yt,wt,Bt;return[t("div",St,[t("div",Ot,[i(Qt(Ft),{href:a.route("admin.application"),size:"sm",flat:"",outlined:"",class:"flex items-center justify-center"},{default:o(()=>[i(w,{name:"arrow_back",size:"16px",class:"q-mr-xs"}),e[10]||(e[10]=t("span",null,"Back",-1))]),_:1},8,["href"])]),t("div",Yt,[i(r,{size:"sm",flat:"",outlined:"",class:"q-btn-custom flex items-center justify-center",style:{color:"#000","min-width":"100px",height:"40px","border-radius":"8px"},onClick:a.printTable},{default:o(()=>[i(w,{name:"print",size:"16px",class:"q-mr-xs"}),e[11]||(e[11]=t("span",{class:"text-xs md:text-sm"},"Print",-1))]),_:1},8,["onClick"]),i(r,{size:"sm",flat:"",outlined:"",class:"q-btn-custom flex items-center justify-center",style:{color:"#000","min-width":"100px",height:"40px","border-radius":"8px"},onClick:a.exportToExcel},{default:o(()=>[i(w,{name:"ios_share",size:"16px",class:"q-mr-xs"}),e[12]||(e[12]=t("span",{class:"text-xs md:text-sm"},"Export",-1))]),_:1},8,["onClick"])])]),t("div",Gt,[t("div",Ht,[t("div",Ut,[t("div",Jt,[e[13]||(e[13]=t("img",{src:"/image/icon 1.png",alt:"Ruang",class:"w-12 h-12"},null,-1)),t("h5",Lt,l(s.application.applicant.name),1),t("p",Wt,l(s.application.deceased.relative.name)+" "+l(s.application.deceased.name),1)]),t("div",Xt,[t("div",Zt,[i($t,{class:"md:hidden",vertical:""})]),t("div",null,[t("h5",_t,l((m=(u=s.application)==null?void 0:u.transport)==null?void 0:m.distance),1),e[14]||(e[14]=t("p",{class:"text-[#5B656F]"},"Kilometre",-1))]),t("div",null,[t("h5",te,l((y=(f=s.application)==null?void 0:f.transport)==null?void 0:y.vehicle_number),1),e[15]||(e[15]=t("p",{class:"text-[#5B656F]"},"Motor Reg.",-1))]),t("div",null,[t("h5",ee,l((E=(j=s.application)==null?void 0:j.transport)==null?void 0:E.transport_cost),1),e[16]||(e[16]=t("p",{class:"text-[#5B656F]"},"Amount (Rs)",-1))])])]),t("div",se,[((R=s.application)==null?void 0:R.status)==="Pending"?(d(),p(r,{key:0,onClick:e[0]||(e[0]=n=>D(s.application.id)),label:"Approve",size:"sm",class:"w-full md:w-36",style:{color:"#fff",height:"40px","border-radius":"8px",border:"1px solid #5b656f",background:"#000"}})):c("",!0),((A=s.application)==null?void 0:A.status)==="Pending"?(d(),p(r,{key:1,onClick:e[1]||(e[1]=n=>C(s.application.id)),label:"Reject",size:"sm",class:"w-full md:w-36",style:{color:"#000",height:"40px","border-radius":"8px",border:"1px solid #5b656f",background:"transparent"}})):c("",!0)])])]),t("div",le,[t("div",ie,[t("div",ae,[e[25]||(e[25]=t("p",{class:"text-center w-32 h-4 rounded-[20px] bg-[#E9E9E9] mb-4 md:mb-8"}," Mitthi Chungchang ",-1)),t("div",ne,[e[17]||(e[17]=t("p",{class:"text-[#61646B]"},"Mitthi pianni leh thla",-1)),t("p",null,l(s.application.deceased.dob),1)]),t("div",oe,[e[18]||(e[18]=t("p",{class:"text-[#61646B]"},"Kum",-1)),t("p",null,l(Mt.value)+" years",1)]),t("div",de,[e[19]||(e[19]=t("p",{class:"text-[#61646B]"},"Gender",-1)),t("p",null,l(s.application.deceased.gender),1)]),t("div",pe,[e[20]||(e[20]=t("p",{class:"text-[#61646B]"},"Thih ni leh darkar",-1)),t("p",null,l(s.application.deceased.time_of_death),1)]),t("div",re,[e[21]||(e[21]=t("p",{class:"text-[#61646B]"},"Thihna hmun",-1)),t("p",null,l(s.application.deceased.place_of_death),1)]),t("div",ce,[e[22]||(e[22]=t("p",{class:"text-[#61646B]"},"District",-1)),t("p",null,l((P=(M=(V=s.application)==null?void 0:V.deceased)==null?void 0:M.district)==null?void 0:P.name),1)]),t("div",ue,[e[23]||(e[23]=t("p",{class:"text-[#61646B]"},"Veng/Khua",-1)),t("p",null,l((F=(Q=s.application)==null?void 0:Q.deceased)==null?void 0:F.locality),1)]),t("div",me,[e[24]||(e[24]=t("p",{class:"text-[#61646B]"},"Assembly Constituency",-1)),t("p",null,l((z=($=s.application)==null?void 0:$.deceased)==null?void 0:z.constituency.name),1)])]),t("div",xe,[e[30]||(e[30]=t("p",{class:"text-center w-32 h-4 rounded-[20px] bg-[#E9E9E9] mb-4 md:mb-8"}," Ruang Phurh Diltu ",-1)),t("div",ge,[t("div",fe,[e[26]||(e[26]=t("p",{class:"text-[#61646B]"},"Hming",-1)),t("p",null,l((N=(q=s.application)==null?void 0:q.applicant)==null?void 0:N.name),1)]),t("div",be,[e[27]||(e[27]=t("p",{class:"text-[#61646B]"},"District",-1)),t("p",null,l((T=(K=s.application)==null?void 0:K.applicant)==null?void 0:T.district.name),1)]),t("div",ve,[e[28]||(e[28]=t("p",{class:"text-[#61646B]"},"Veng/Khua",-1)),t("p",null,l((S=(I=s.application)==null?void 0:I.applicant)==null?void 0:S.locality),1)]),t("div",he,[e[29]||(e[29]=t("p",{class:"text-[#61646B]"},"Phone Number",-1)),t("p",null,l((Y=(O=s.application)==null?void 0:O.applicant)==null?void 0:Y.mobile),1)])])]),t("div",ke,[e[35]||(e[35]=t("p",{class:"text-center w-32 h-4 rounded-[20px] bg-[#E9E9E9] mb-4 md:mb-8"}," Document Thiltel te ",-1)),t("div",ye,[(H=(G=s.application)==null?void 0:G.attachment)!=null&&H.id_proof?(d(),p(h,{key:0,dense:"",class:"transparent text-black",icon:"check_circle",clickable:"",onClick:e[2]||(e[2]=n=>b("/storage/"+s.application.attachment.id_proof))},{default:o(()=>e[31]||(e[31]=[v(" Mitthi Aadhar card/Voter ID/Birth Certificate ")])),_:1})):c("",!0),(J=(U=s.application)==null?void 0:U.attachment)!=null&&J.receipt?(d(),p(h,{key:1,dense:"",class:"transparent text-black",icon:"check_circle",clickable:"",onClick:e[3]||(e[3]=n=>b("/storage/"+s.application.attachment.receipt))},{default:o(()=>e[32]||(e[32]=[v(" Motor hman man Voucher/Receipt ")])),_:1})):c("",!0),(W=(L=s.application)==null?void 0:L.attachment)!=null&&W.death_certificate?(d(),p(h,{key:2,dense:"",class:"transparent text-black",icon:"check_circle",clickable:"",onClick:e[4]||(e[4]=n=>b("/storage/"+s.application.attachment.death_certificate))},{default:o(()=>e[33]||(e[33]=[v(" Death Certificate ")])),_:1})):c("",!0),(Z=(X=s.application)==null?void 0:X.attachment)!=null&&Z.additional_document?(d(),p(h,{key:3,dense:"",class:"transparent text-black",icon:"check_circle",clickable:"",onClick:e[5]||(e[5]=n=>b("/storage/"+s.application.attachment.additional_document))},{default:o(()=>e[34]||(e[34]=[v(" Diltu Aadhar card/voter ID ")])),_:1})):c("",!0)])])]),t("div",we,[t("div",Be,[e[48]||(e[48]=t("p",{class:"text-center w-48 h-4 rounded-[20px] bg-[#E9E9E9] mb-4 md:mb-8"}," Ruang Phurh leh Motor Chungchang ",-1)),t("div",Ce,[e[45]||(e[45]=t("p",{class:"pt-5"},"Ruang phurh tanna",-1)),t("div",De,[t("div",je,[e[36]||(e[36]=t("p",{class:"text-[#61646B]"},"District",-1)),t("p",null,l((tt=(_=s.application)==null?void 0:_.transport)==null?void 0:tt.source_district.name),1)]),t("div",Ee,[e[37]||(e[37]=t("p",{class:"text-[#61646B]"},"Veng/Khua",-1)),t("p",null,l((st=(et=s.application)==null?void 0:et.transport)==null?void 0:st.source_locality),1)])]),e[46]||(e[46]=t("p",{class:"pt-5"},"Ruang dahna tur hmun",-1)),t("div",Re,[t("div",Ae,[e[38]||(e[38]=t("p",{class:"text-[#61646B]"},"District",-1)),t("p",null,l((it=(lt=s.application)==null?void 0:lt.transport)==null?void 0:it.destination_district.name),1)]),t("div",Ve,[e[39]||(e[39]=t("p",{class:"text-[#61646B]"},"Veng/Khua",-1)),t("p",null,l((nt=(at=s.application)==null?void 0:at.transport)==null?void 0:nt.destination_locality),1)])]),t("div",Me,[e[40]||(e[40]=t("p",{class:"text-[#61646B]"},"Kilometer",-1)),t("p",null,l((dt=(ot=s.application)==null?void 0:ot.transport)==null?void 0:dt.distance),1)]),e[47]||(e[47]=t("p",{class:"pt-5"},"Ruang phurhna motor",-1)),t("div",Pe,[t("div",Qe,[e[41]||(e[41]=t("p",{class:"text-[#61646B]"}," Motor registration number ",-1)),t("p",null,l((rt=(pt=s.application)==null?void 0:pt.transport)==null?void 0:rt.vehicle_number),1)]),t("div",Fe,[e[42]||(e[42]=t("p",{class:"text-[#61646B]"}," Motor neitu/khalhtu hming ",-1)),t("p",null,l((ut=(ct=s.application)==null?void 0:ct.transport)==null?void 0:ut.driver_name),1)]),t("div",$e,[e[43]||(e[43]=t("p",{class:"text-[#61646B]"},"Phone Number",-1)),t("p",null,l((xt=(mt=s.application)==null?void 0:mt.transport)==null?void 0:xt.driver_phone),1)]),t("div",ze,[e[44]||(e[44]=t("p",{class:"text-[#61646B]"},"Motor saung (Rs.)",-1)),t("p",null,l((ft=(gt=s.application)==null?void 0:gt.transport)==null?void 0:ft.transport_cost),1)])])])]),t("div",qe,[e[52]||(e[52]=t("p",{class:"text-center w-32 h-4 rounded-[20px] bg-[#E9E9E9] mb-4 md:mb-8"}," Bank Details ",-1)),t("div",Ne,[t("div",Ke,[e[49]||(e[49]=t("p",{class:"text-[#61646B]"},"Bank hming",-1)),t("p",null,l((vt=(bt=s.application)==null?void 0:bt.applicant)==null?void 0:vt.bank_name),1)]),t("div",Te,[e[50]||(e[50]=t("p",{class:"text-[#61646B]"},"Bank account number",-1)),t("p",null,l((kt=(ht=s.application)==null?void 0:ht.applicant)==null?void 0:kt.account_no),1)]),t("div",Ie,[e[51]||(e[51]=t("p",{class:"text-[#61646B]"},"IFSC Code",-1)),t("p",null,l((wt=(yt=s.application)==null?void 0:yt.applicant)==null?void 0:wt.ifsc_code),1)])])])])]),e[54]||(e[54]=t("hr",{class:"my-4 border-border"},null,-1)),t("div",Se,[x.application&&x.application.status==="Pending"?(d(),p(r,{key:0,onClick:e[6]||(e[6]=n=>D(x.application.id)),label:"Approve",size:"sm",style:{color:"#fff",width:"144px",height:"40px","flex-shrink":"0","border-radius":"8px",border:"1px solid #5b656f",background:"#000"}})):c("",!0),((Bt=s.application)==null?void 0:Bt.status)==="Pending"?(d(),p(r,{key:1,onClick:e[7]||(e[7]=n=>C(s.application.id)),label:"Reject",size:"sm",class:"w-full md:w-36",style:{color:"#000",height:"40px","border-radius":"8px",border:"1px solid #5b656f",background:"transparent"}})):c("",!0)]),i(Kt,{modelValue:k.value,"onUpdate:modelValue":e[9]||(e[9]=n=>k.value=n)},{default:o(()=>[i(zt,{style:{"min-width":"400px"}},{default:o(()=>[i(Dt,null,{default:o(()=>e[53]||(e[53]=[t("div",{class:"text-h6"},"Reason for Rejection",-1)])),_:1}),i(Dt,null,{default:o(()=>[i(qt,{color:"dark",modelValue:g.value,"onUpdate:modelValue":e[8]||(e[8]=n=>g.value=n),label:"Please provide the reason for rejection",type:"textarea",autogrow:"",rules:[n=>!!n||"Reason is required"]},null,8,["modelValue","rules"])]),_:1}),i(Nt,{align:"right"},{default:o(()=>[jt(i(r,{flat:"",label:"Cancel",color:"primary",style:{color:"#fff",width:"144px",height:"40px","flex-shrink":"0","border-radius":"8px",border:"1px solid #5b656f",background:"#000"}},null,512),[[Rt]]),jt(i(r,{style:{"border-radius":"8px"},label:"Confirm Reject",color:"negative",onClick:At},null,512),[[Rt]])]),_:1})]),_:1})]),_:1},8,["modelValue"])]}),_:1}))}});export{Ze as default};
