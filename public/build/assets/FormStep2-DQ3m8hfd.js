import{Q as A}from"./QSelect-D89BJ1_7.js";import{r as d,o as X,E as Y,T as Z,a as m,b as R,w as a,i as r,f as e,A as tt,u as l,g as v,t as i,e as p,k as M,l as w,C as q,n as $,Q as f,s as L,m as U,p as y,q as et}from"./app-DY6z9ZO-.js";import{Q as ot}from"./QForm-oFHFc731.js";import{Q as lt}from"./QPage-DYn21bSD.js";import{Q as st,a as rt}from"./QLayout-DkfsYSgK.js";import{C as nt}from"./ClosePopup-Cdw2F2K5.js";import{_ as it}from"./WebLayout-BJxCXKNF.js";import{u as at}from"./use-quasar-Cs1LdNF0.js";import{E as N,L as T}from"./index-wt0MyZjx.js";import{_ as dt}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./QChip-ZnDgJwmd.js";import"./format-DPtYjOdv.js";import"./QMenu-DDLCkg3R.js";import"./rtl-DFPa-2ov.js";import"./QTabs-B1e59bZV.js";const ut={class:"flex flex-col justify-center items-center gap-6"},mt={class:"border w-[412px] h-[1100px] rounded-[10px] p-[23px]"},pt={class:"q-mb-sm"},vt={key:0,class:"text-red"},ct={key:0,class:"text-red-500 text-sm"},gt={class:"pt-5"},ft={key:0,class:"text-red"},xt={key:0,class:"text-red-500 text-sm"},bt={class:"pt-5"},_t={key:0,class:"text-red-500 text-sm"},kt={class:"pt-5"},yt={key:0,class:"text-red-500 text-sm"},Vt={key:0,class:"text-red-500 text-sm"},ht={key:0,class:"text-red-500 text-sm"},Ct={key:0,class:"text-red-500 text-sm"},Mt={class:"leading-[2px] pl-5"},wt={class:"leading-[2px] pt-4 pl-5"},St={class:"leading-[2px] pt-4 pl-5"},Dt={class:"leading-[2px] pt-4 pl-5"},Bt={class:"leading-[2px] pt-4"},Qt={class:"leading-[2px] pt-4"},Rt={class:"leading-[2px] pt-4"},qt={class:"leading-[2px] pt-4"},$t={class:"leading-[2px] pt-4"},Lt={class:"leading-[2px] pt-4"},Ut=40,Ft=Object.assign({layout:it},{__name:"FormStep2",props:["form","districts"],setup(z){const I=at(),b=d(!1),u=z,F=d({lat:23.164543,lng:92.9375739}),c=d(null),g=d(null),S=d(""),G=d(""),j=d(""),D=d(""),O=d(""),H=d("");d(0),d(0);const _=d(!1),k=d(!1),B=d(null);X(()=>{Y(()=>{typeof google<"u"?B.value=new google.maps.Geocoder:console.error("Google Maps API not loaded.")})});const o=Z({source_district:u.form.source_district||"",source_locality:u.form.source_locality||"",source_lat:u.form.source_lat||"",source_lng:u.form.source_lng||"",destination_district:u.form.destination_district||"",destination_locality:u.form.destination_locality||"",destination_lat:u.form.destination_lat||"",destination_lng:u.form.destination_lng||"",distance:u.form.distance||"",vehicle_number:u.form.vehicle_number||"",vehicle_name:u.form.vehicle_name||"",driver_name:u.form.driver_name||"",driver_phone:u.form.driver_phone||"",transport_cost:u.form.transport_cost||""}),E=d(u.districts||[]),Q=()=>{o.post(route("form.storeStep2"),{onError:n=>{console.log(n),o.errors=n,b.value=!1},onSuccess:()=>{b.value=!1,I.notify({type:"positive",message:"Form 2 submitted successfully!",position:"top-right"})}})},P=(n,t)=>{B.value&&B.value.geocode({location:n},(s,C)=>{if(C==="OK"&&s[0]){const x=s[0].formatted_address;t==="source"?(S.value=x,G.value=n.lat,j.value=n.lng,o.source_locality=x,o.source_lat=n.lat,o.source_lng=n.lng):t==="destination"&&(D.value=x,O.value=n.lat,H.value=n.lng,o.destination_locality=x,o.destination_lat=n.lat,o.destination_lng=n.lng),J()}else console.error("Geocoder failed due to:",C)})},V=(n,t)=>{const s={lat:n.latLng.lat(),lng:n.latLng.lng()};t==="source"?(c.value=s,P(s,"source")):t==="destination"&&(g.value=s,P(s,"destination"))},J=()=>{if(c.value&&g.value){const t=h(g.value.lat-c.value.lat),s=h(g.value.lng-c.value.lng),C=h(c.value.lat),x=h(g.value.lat),K=Math.sin(t/2)*Math.sin(t/2)+Math.cos(C)*Math.cos(x)*Math.sin(s/2)*Math.sin(s/2),W=2*Math.atan2(Math.sqrt(K),Math.sqrt(1-K));o.distance=(6371*W).toFixed(2),o.transport_cost=(o.distance*Ut).toFixed(2)}},h=n=>n*(Math.PI/180);return(n,t)=>(m(),R(st,null,{default:a(()=>[r(rt,null,{default:a(()=>[r(lt,{padding:""},{default:a(()=>[e("div",ut,[t[34]||(t[34]=e("div",{class:"border-2 border-gray-200 bg-[#E9F4FF] flex-shrink-0 rounded-[10px] text-center items-center"},[e("img",{id:"background",class:"w-[412px] h-[193px]",src:"image/Vertical Stepper with numbers2.png"})],-1)),e("div",mt,[r(ot,{onSubmit:tt(Q,["prevent"]),class:"q-gutter-md"},{default:a(()=>[t[32]||(t[32]=e("div",{class:"pb-3 flex items-center gap-2"},[e("div",{class:"w-[3px] h-[19px] flex-shrink-0 bg-black"}),e("h6",null,"Ruang Phurh leh Motor Chungchang")],-1)),e("div",pt,[t[24]||(t[24]=e("p",{class:"text-[#61646B]"}," Ruang phurh tanna hmun ",-1)),e("div",null,[t[23]||(t[23]=e("div",{class:"text-sm font-medium text-black q-mb-xs"}," District ",-1)),r(A,{dense:"",outlined:"",modelValue:l(o).source_district,"onUpdate:modelValue":t[0]||(t[0]=s=>l(o).source_district=s),modelModifiers:{number:!0},label:"Select Source District",options:E.value,behavior:"menu",error:l(o).errors.source_district,"error-message":l(o).errors.source_district?l(o).errors.source_district[0]:"Source District is Required"},null,8,["modelValue","options","error","error-message"]),n.$page.props.errors.source_district?(m(),v("div",vt,i(n.$page.props.errors.source_district),1)):p("",!0)])]),t[33]||(t[33]=e("div",null,[e("div",{class:"text-sm font-medium text-black q-mb-xs"}," Veng/Khua ")],-1)),r(M,{outlined:"",modelValue:S.value,"onUpdate:modelValue":t[1]||(t[1]=s=>S.value=s),label:"Source Locality",readonly:"",onClick:t[2]||(t[2]=s=>_.value=!0)},null,8,["modelValue"]),l(o).errors.source_locality?(m(),v("div",ct,i(l(o).errors.source_locality),1)):p("",!0),e("div",gt,[e("div",null,[t[25]||(t[25]=e("p",{class:"text-[#61646B]"}," Ruang dahna tur hmun ",-1)),r(A,{dense:"",outlined:"",modelValue:l(o).destination_district,"onUpdate:modelValue":t[3]||(t[3]=s=>l(o).destination_district=s),modelModifiers:{number:!0},label:"Select Source District",options:E.value,behavior:"menu",error:l(o).errors.destination_district,"error-message":l(o).errors.destination_district||""},null,8,["modelValue","options","error","error-message"]),n.$page.props.errors.destination_district?(m(),v("div",ft,i(n.$page.props.errors.destination_district),1)):p("",!0)])]),e("div",null,[r(M,{outlined:"",modelValue:D.value,"onUpdate:modelValue":t[4]||(t[4]=s=>D.value=s),label:"Destination Locality",readonly:"",onClick:t[5]||(t[5]=s=>k.value=!0)},null,8,["modelValue"]),l(o).errors.destination_locality?(m(),v("div",xt,i(l(o).errors.destination_locality),1)):p("",!0)]),e("div",bt,[t[26]||(t[26]=e("div",{class:"text-sm font-medium text-black q-mb-xs"}," Kilometer zat ",-1)),r(M,{modelValue:l(o).distance,"onUpdate:modelValue":t[6]||(t[6]=s=>l(o).distance=s),id:"distance",type:"number",outlined:"",label:"Distance (in km)",readonly:""},null,8,["modelValue"]),l(o).errors.distance?(m(),v("div",_t,i(l(o).errors.distance),1)):p("",!0)]),e("div",kt,[t[27]||(t[27]=e("p",{class:"text-[#61646B]"}," Ruang phurhna motor ",-1)),t[28]||(t[28]=e("div",{class:"text-sm font-medium text-black q-mb-xs"}," Motor hman man (Rs) ",-1)),r(M,{modelValue:l(o).transport_cost,"onUpdate:modelValue":t[7]||(t[7]=s=>l(o).transport_cost=s),id:"transport-cost",type:"number",outlined:"",label:"Transport Cost (â‚¹)",readonly:""},null,8,["modelValue"]),l(o).errors.transport_cost?(m(),v("div",yt,i(l(o).errors.transport_cost),1)):p("",!0)]),e("div",null,[t[29]||(t[29]=e("div",{class:"text-sm font-medium text-black q-mb-xs"}," Motor neitu/khalhtu hming ",-1)),w(e("input",{type:"text",placeholder:"Motor neitu/khalhtu hming pum",id:"from_places","onUpdate:modelValue":t[8]||(t[8]=s=>l(o).driver_name=s),class:$(["form-control",["border p-2 w-full rounded-lg",l(o).errors.driver_name?"border-red-500":"border-gray-300"]])},null,2),[[q,l(o).driver_name]]),l(o).errors.driver_name?(m(),v("div",Vt,i(l(o).errors.driver_name),1)):p("",!0)]),e("div",null,[t[30]||(t[30]=e("div",{class:"text-sm font-medium text-black q-mb-xs"}," Motor neitu/khalhtu phone number ",-1)),w(e("input",{type:"text",placeholder:"Motor neitu/khalhtu biak pawh theihna tur",id:"from_places","onUpdate:modelValue":t[9]||(t[9]=s=>l(o).driver_phone=s),class:$(["form-control",["border p-2 w-full rounded-lg",l(o).errors.driver_phone?"border-red-500":"border-gray-300"]])},null,2),[[q,l(o).driver_phone]]),l(o).errors.driver_phone?(m(),v("div",ht,i(l(o).errors.driver_phone),1)):p("",!0)]),e("div",null,[t[31]||(t[31]=e("div",{class:"text-sm font-medium text-black q-mb-xs"}," Motor registration number ",-1)),w(e("input",{type:"text",placeholder:"Ruang phurhna motor registration number",id:"from_places","onUpdate:modelValue":t[10]||(t[10]=s=>l(o).vehicle_number=s),class:$(["form-control",["border p-2 w-full rounded-lg",l(o).errors.vehicle_number?"border-red-500":"border-gray-300"]])},null,2),[[q,l(o).vehicle_number]]),l(o).errors.vehicle_number?(m(),v("div",Ct,i(l(o).errors.vehicle_number),1)):p("",!0)]),r(f,{style:{padding:"10px 24px","border-radius":"12px"},outline:"",unelevated:"","text-color":"black",label:"Preview",color:"white",onClick:t[11]||(t[11]=s=>b.value=!0)}),r(f,{unelevated:"",label:"Next",color:"black",onClick:Q,style:{padding:"10px 95px","border-radius":"12px"}})]),_:1})])]),r(L,{modelValue:_.value,"onUpdate:modelValue":t[16]||(t[16]=s=>_.value=s)},{default:a(()=>[r(U,{style:{width:"90vw","max-width":"600px"}},{default:a(()=>[r(y,null,{default:a(()=>[t[35]||(t[35]=e("h6",null,"Select Source Location",-1)),r(l(N),{center:F.value,zoom:7,class:"map-container",onClick:t[13]||(t[13]=s=>V(s,"source"))},{default:a(()=>[c.value?(m(),R(l(T),{key:0,position:c.value,options:{position:c.value,label:"S"},onDragend:t[12]||(t[12]=s=>V(s,"source"))},null,8,["position","options"])):p("",!0)]),_:1},8,["center"])]),_:1}),r(y,{align:"right"},{default:a(()=>[r(f,{flat:"",color:"red",label:"Cancel",onClick:t[14]||(t[14]=s=>_.value=!1)}),r(f,{flat:"",label:"Confirm",color:"green",onClick:t[15]||(t[15]=s=>_.value=!1)})]),_:1})]),_:1})]),_:1},8,["modelValue"]),r(L,{modelValue:k.value,"onUpdate:modelValue":t[21]||(t[21]=s=>k.value=s)},{default:a(()=>[r(U,{style:{width:"90vw","max-width":"600px"}},{default:a(()=>[r(y,null,{default:a(()=>[t[36]||(t[36]=e("h6",null,"Select Destination Location",-1)),r(l(N),{center:F.value,zoom:7,class:"map-container",onClick:t[18]||(t[18]=s=>V(s,"destination"))},{default:a(()=>[g.value?(m(),R(l(T),{key:0,position:g.value,options:{position:g.value,label:"D"},onDragend:t[17]||(t[17]=s=>V(s,"destination"))},null,8,["position","options"])):p("",!0)]),_:1},8,["center"])]),_:1}),r(y,{align:"right"},{default:a(()=>[r(f,{flat:"",label:"Cancel",color:"red",onClick:t[19]||(t[19]=s=>k.value=!1)}),r(f,{flat:"",label:"Confirm",color:"green",onClick:t[20]||(t[20]=s=>k.value=!1)})]),_:1})]),_:1})]),_:1},8,["modelValue"]),r(L,{modelValue:b.value,"onUpdate:modelValue":t[22]||(t[22]=s=>b.value=s)},{default:a(()=>[e("div",null,[r(U,{class:"w-[411px] h-[822px] rounded-md"},{default:a(()=>[r(y,{class:""},{default:a(()=>[t[47]||(t[47]=e("p",{class:"text-center w-[242px] h-[17px] flex-shrink-0 rounded-[20px] bg-[#E9E9E9] mb-8"}," Ruang Phurh leh Motor Chungchang ",-1)),t[48]||(t[48]=e("p",{class:"mb-8"},"Ruang phurh tanna",-1)),e("div",Mt,[t[37]||(t[37]=e("p",{class:"text-[#61646B]"},"District",-1)),e("p",null,i(l(o).source_district.label),1)]),e("div",wt,[t[38]||(t[38]=e("p",{class:"text-[#61646B]"},"Veng/Khua",-1)),e("p",null,i(l(o).source_locality),1)]),t[49]||(t[49]=e("hr",{class:"my-4 border-border"},null,-1)),t[50]||(t[50]=e("p",{class:"mb-8 mt-8 text-[#363636]"}," Ruang dahna tur hmun ",-1)),e("div",St,[t[39]||(t[39]=e("p",{class:"text-[#61646B]"},"District",-1)),e("p",null,i(l(o).destination_district.label),1)]),e("div",Dt,[t[40]||(t[40]=e("p",{class:"text-[#61646B]"},"Veng/Khua",-1)),e("p",null,i(l(o).destination_locality),1)]),t[51]||(t[51]=e("hr",{class:"my-4 border-border"},null,-1)),e("div",Bt,[t[41]||(t[41]=e("p",{class:"text-[#61646B]"},"Kilometer",-1)),e("p",null,i(l(o).distance),1)]),t[52]||(t[52]=e("hr",{class:"my-4 border-border"},null,-1)),t[53]||(t[53]=e("p",{class:"mb-8 mt-8"},"Ruang phurhna motor",-1)),e("div",Qt,[t[42]||(t[42]=e("p",{class:"text-[#61646B]"}," Motor registration number ",-1)),e("p",null,i(l(o).vehicle_number),1)]),e("div",Rt,[t[43]||(t[43]=e("p",{class:"text-[#61646B]"},"Motor hming",-1)),e("p",null,i(l(o).vehicle_name),1)]),e("div",qt,[t[44]||(t[44]=e("p",{class:"text-[#61646B]"}," Motor neitu/khalhtu hming ",-1)),e("p",null,i(l(o).driver_name),1)]),e("div",$t,[t[45]||(t[45]=e("p",{class:"text-[#61646B]"}," Motor neitu/khalhtu phone number ",-1)),e("p",null,i(l(o).driver_phone),1)]),e("div",Lt,[t[46]||(t[46]=e("p",{class:"text-[#61646B]"}," Motor hman man (Rs) ",-1)),e("p",null,i(l(o).transport_cost),1)])]),_:1}),r(et,{align:"right"},{default:a(()=>[w(r(f,{class:"text-black",color:"white",label:"Edit"},null,512),[[nt]]),r(f,{label:"Approve & Next",color:"black",onClick:Q})]),_:1})]),_:1})])]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}))}}),Yt=dt(Ft,[["__scopeId","data-v-97ed7db8"]]);export{Yt as default};
