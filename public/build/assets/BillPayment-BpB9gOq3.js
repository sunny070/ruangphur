import{Q as P,d as U}from"./dayjs.min-DIUQC_xm.js";import{r as y,c as M,o as $,a,b as w,w as n,d as r,u as H,Z as Y,e as C,t as d,f as x,g as t,Q as A,j as R,k as D,h as N,F as K,i as W,v as Z,y as G,N as J}from"./app-DyTi5KuX.js";import{Q as q,a as k}from"./format-C9iz93YD.js";import{Q as X}from"./QLayout-CxhaKj2c.js";import{Q as p}from"./QMenu-BB-sI_PG.js";import{Q as ee}from"./QPage-CN5TYfTe.js";import{_ as te}from"./AdminLayout-Du6pJdT5.js";import"./QExpansionItem-DRUD65om.js";import"./ClosePopup-Aj3Jq9XG.js";const se={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},le={class:""},re={class:"flex justify-end pr-16"},de={ref:"printSection",class:"rounded-lg overflow-x-auto table-responsive"},ne={class:"q-table q-table__grid q-mb-lg"},ue={key:0},oe={class:"no-print"},we=Object.assign({layout:te},{__name:"BillPayment",props:{applications:Array,flash:Object},setup(f){const S=f;y(null);const B=y([]),u=y(""),T=y("All"),E=y([]);M(()=>E.value.length>0);const F=l=>U(l).format("dddd, MMMM D, YYYY h:mm A");$(()=>{const l=[...new Set(S.applications.map(s=>s.deceased.district.name))];B.value=l.map(s=>({label:s,value:s}))});const _=M(()=>{let l=S.applications;return T.value!=="All"&&(l=l.filter(s=>s.status===T.value)),u.value&&(l=l.filter(s=>{var e,o,m,b,h,g,v,c;return((e=s.application_no)==null?void 0:e.toString().includes(u.value))||((m=(o=s.deceased)==null?void 0:o.name)==null?void 0:m.toLowerCase().includes(u.value.toLowerCase()))||((h=(b=s.applicant)==null?void 0:b.name)==null?void 0:h.toLowerCase().includes(u.value.toLowerCase()))||((c=(v=(g=s.deceased)==null?void 0:g.district)==null?void 0:v.name)==null?void 0:c.toLowerCase().includes(u.value.toLowerCase()))})),l}),j=l=>{J.get(route("bill.show",l))},V=l=>{console.log("Delete application:",l)},i=()=>{const s=document.querySelector(".q-table").cloneNode(!0);s.querySelectorAll(".no-print").forEach(m=>m.remove());const o=window.open("","","width=800,height=600");o.document.write(`
        <html>
            <head>
                <title>Print Table</title>
                <style>
                    table {
                        width: 100%;
                        border-collapse: collapse;
                    }
                    th, td {
                        padding: 8px 12px;
                        text-align: left;
                        border-bottom: 1px solid #ddd;
                    }
                    th {
                        background-color: #3A424A;
                        color: white;
                        font-weight: bold;
                    }
                </style>
            </head>
            <body>
                ${s.outerHTML}
            </body>
        </html>
    `),o.document.close(),o.print()};return(l,s)=>(a(),w(ee,{padding:""},{default:n(()=>[r(H(Y),{title:"Bills"}),f.flash.success?(a(),w(P,{key:0,class:"bg-green-4 text-white",dense:""},{default:n(()=>[C(d(f.flash.success),1)]),_:1})):x("",!0),f.flash.error?(a(),w(P,{key:1,class:"bg-red-4 text-white",dense:""},{default:n(()=>[C(d(f.flash.error),1)]),_:1})):x("",!0),s[7]||(s[7]=t("h1",{class:"text-2xl font-bold mb-6"},"Bill Payment",-1)),s[8]||(s[8]=t("div",{class:"q-my-md grid grid-cols-1 md:grid-cols-2 gap-4"},null,-1)),s[9]||(s[9]=t("hr",{class:"my-4 border-border bg-[#F0F0F0]"},null,-1)),t("div",se,[t("div",null,[t("div",le,[r(R,{color:"dark",rounded:"2lg",outlined:"",dense:"","bottom-slots":"",modelValue:u.value,"onUpdate:modelValue":s[1]||(s[1]=e=>u.value=e),label:"Search",class:"w-full max-w-md"},{append:n(()=>[u.value!==""?(a(),w(A,{key:0,name:"close",onClick:s[0]||(s[0]=e=>u.value=""),class:"cursor-pointer"})):x("",!0),r(A,{name:"search"})]),_:1},8,["modelValue"])])]),t("div",re,[r(D,{size:"sm",flat:"",outlined:"",class:"q-btn-custom flex items-center justify-center",style:{color:"#000",width:"100px",height:"40px","flex-shrink":"0","border-radius":"8px",background:"transparent"},onClick:i},{default:n(()=>[r(A,{name:"print",size:"16px",class:"q-mr-xs"}),s[2]||(s[2]=t("span",null,"Print",-1))]),_:1})])]),t("div",de,[t("table",ne,[s[6]||(s[6]=t("thead",{class:"bg-[#3A424A] text-white font-bold h-[30px] w-full text-[11px]"},[t("tr",{class:"bg-[#3A424A] text-white"},[t("th",null,"Sl.No."),t("th",null,"APPLICATION NO."),t("th",null,"APPLICANT NAME"),t("th",null,"ADDRESS"),t("th",null,"CONTACT No."),t("th",null,"MITTHI KHUA"),t("th",null,"PLACE OF DEATH"),t("th",null,"KILOMETER"),t("th",null,"AMOUNT CLAIMED"),t("th",null,"ACCOUNT No. OF CLAIMANT"),t("th",null,"IFSC"),t("th",null,"STATUS"),t("th",null,"DIL NI"),t("th",{class:"no-print"},"ACTIONS"),t("th",{class:"print-only"},"Signature")])],-1)),_.value.length?(a(),N("tbody",ue,[(a(!0),N(K,null,W(_.value,(e,o)=>{var m,b,h,g,v,c,I,L,Q,O;return a(),N("tr",{key:e.id},[t("td",null,d(o+1),1),t("td",null,d(e==null?void 0:e.application_no),1),t("td",null,d((m=e==null?void 0:e.applicant)==null?void 0:m.name),1),t("td",null,d((b=e==null?void 0:e.applicant)==null?void 0:b.locality),1),t("td",null,d((h=e==null?void 0:e.applicant)==null?void 0:h.mobile),1),t("td",null,d((v=(g=e==null?void 0:e.deceased)==null?void 0:g.district)==null?void 0:v.name),1),t("td",null,d((c=e==null?void 0:e.deceased)==null?void 0:c.place_of_death),1),t("td",null,d((I=e==null?void 0:e.transport)==null?void 0:I.distance),1),t("td",null,d((L=e==null?void 0:e.transport)==null?void 0:L.transport_cost),1),t("td",null,d((Q=e==null?void 0:e.applicant)==null?void 0:Q.account_no),1),t("td",null,d((O=e==null?void 0:e.applicant)==null?void 0:O.ifsc_code),1),t("td",null,[t("div",{class:Z([{"status-incoming":(e==null?void 0:e.status)==="Pending","status-rejected":(e==null?void 0:e.status)==="Rejected","status-approved":(e==null?void 0:e.status)==="Approved","status-paid":(e==null?void 0:e.status)==="Processed"},"status-badge"])},d(e==null?void 0:e.status),3)]),t("td",null,d(F(e==null?void 0:e.created_at)),1),t("td",oe,[r(D,{flat:"",icon:"more_vert",style:G(l.buttonStyle)},null,8,["style"]),r(p,null,{default:n(()=>[r(X,null,{default:n(()=>[r(q,{clickable:"",class:"action-btn",onClick:z=>j(e.id)},{default:n(()=>[r(k,{avatar:""},{default:n(()=>[r(A,{size:"sm",name:"visibility"})]),_:1}),r(k,null,{default:n(()=>s[3]||(s[3]=[C("View")])),_:1})]),_:2},1032,["onClick"]),r(q,{clickable:"",class:"action-btn",onClick:z=>V(e.id)},{default:n(()=>[r(k,{avatar:""},{default:n(()=>[r(A,{name:"delete"})]),_:1}),r(k,null,{default:n(()=>s[4]||(s[4]=[C("Delete")])),_:1})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),s[5]||(s[5]=t("td",{class:"print-only"},null,-1))])}),128))])):x("",!0)])],512)]),_:1}))}});export{we as default};
