import{E as Q,L as S}from"./index-DwQUjKKn.js";import{Q as j}from"./QPage-D1RYuMuC.js";import{r as a,o as q,M as z,a as y,b as D,w as s,u as t,g as r,d as e,j as $,t as A,l as B,m as I,f as P,p as T,k as g,s as U}from"./app-DYJu_hh0.js";import{W as E}from"./WebLayout-DQT7Yu92.js";import{_ as O}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./QLayout-DKyBKObu.js";import"./format-DPTxXwLs.js";import"./QTabs-CIOZqMki.js";import"./rtl-DFPa-2ov.js";const W={class:"container"},H={class:"input-container"},J={class:"info-container"},X=40,Y=Object.assign({layout:E},{__name:"Maps",setup(Z){const L=a({lat:23.164543,lng:92.9375739}),i=a(null),u=a(null),C=a(""),F=a(""),G=a(""),k=a(""),K=a(""),N=a(""),M=a(0),b=a(0),d=a(!1),v=a(!1),V=a(null);q(()=>{z(()=>{typeof google<"u"?V.value=new google.maps.Geocoder:console.error("Google Maps API not loaded.")})});const w=(n,l)=>{V.value&&V.value.geocode({location:n},(o,m)=>{if(m==="OK"&&o[0]){const c=o[0].formatted_address;l==="source"?(C.value=c,F.value=n.lat,G.value=n.lng):l==="destination"&&(k.value=c,K.value=n.lat,N.value=n.lng),R()}else console.error("Geocoder failed due to:",m)})},p=(n,l)=>{const o={lat:n.latLng.lat(),lng:n.latLng.lng()};l==="source"?(i.value=o,w(o,"source")):l==="destination"&&(u.value=o,w(o,"destination"))},R=()=>{if(i.value&&u.value){const l=f(u.value.lat-i.value.lat),o=f(u.value.lng-i.value.lng),m=f(i.value.lat),c=f(u.value.lat),x=Math.sin(l/2)*Math.sin(l/2)+Math.cos(m)*Math.cos(c)*Math.sin(o/2)*Math.sin(o/2),_=2*Math.atan2(Math.sqrt(x),Math.sqrt(1-x));M.value=(6371*_).toFixed(2),b.value=(M.value*X).toFixed(2)}},f=n=>n*(Math.PI/180);return(n,l)=>(y(),D(t(j),{padding:""},{default:s(()=>[r("div",W,[l[16]||(l[16]=r("h2",null,"Transportation Map",-1)),r("div",H,[e(t($),{modelValue:C.value,"onUpdate:modelValue":l[0]||(l[0]=o=>C.value=o),label:"Source Locality",readonly:"",onClick:l[1]||(l[1]=o=>d.value=!0)},null,8,["modelValue"]),e(t($),{modelValue:k.value,"onUpdate:modelValue":l[2]||(l[2]=o=>k.value=o),label:"Destination Locality",readonly:"",onClick:l[3]||(l[3]=o=>v.value=!0)},null,8,["modelValue"])]),r("div",J,[r("p",null,"Distance: "+A(M.value)+" km",1),r("p",null,"Transport Cost: â‚¹"+A(b.value),1)]),e(t(U),{modelValue:d.value,"onUpdate:modelValue":l[8]||(l[8]=o=>d.value=o)},{default:s(()=>[e(t(B),{style:{width:"90vw","max-width":"600px"}},{default:s(()=>[e(t(I),null,{default:s(()=>[l[14]||(l[14]=r("h6",null,"Select Source Location",-1)),e(t(Q),{center:L.value,zoom:7,class:"dialog-map",onClick:l[5]||(l[5]=o=>p(o,"source"))},{default:s(()=>[i.value?(y(),D(t(S),{key:0,position:i.value,options:{position:i.value,label:"S"},onDragend:l[4]||(l[4]=o=>p(o,"source"))},null,8,["position","options"])):P("",!0)]),_:1},8,["center"])]),_:1}),e(t(T),{align:"right"},{default:s(()=>[e(t(g),{flat:"",label:"Cancel",onClick:l[6]||(l[6]=o=>d.value=!1)}),e(t(g),{flat:"",label:"Confirm",color:"primary",onClick:l[7]||(l[7]=o=>d.value=!1)})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(t(U),{modelValue:v.value,"onUpdate:modelValue":l[13]||(l[13]=o=>v.value=o)},{default:s(()=>[e(t(B),{style:{width:"90vw","max-width":"600px"}},{default:s(()=>[e(t(I),null,{default:s(()=>[l[15]||(l[15]=r("h6",null,"Select Destination Location",-1)),e(t(Q),{center:L.value,zoom:7,class:"dialog-map",onClick:l[10]||(l[10]=o=>p(o,"destination"))},{default:s(()=>[u.value?(y(),D(t(S),{key:0,position:u.value,options:{position:u.value,label:"D"},onDragend:l[9]||(l[9]=o=>p(o,"destination"))},null,8,["position","options"])):P("",!0)]),_:1},8,["center"])]),_:1}),e(t(T),{align:"right"},{default:s(()=>[e(t(g),{flat:"",label:"Cancel",onClick:l[11]||(l[11]=o=>v.value=!1)}),e(t(g),{flat:"",label:"Confirm",color:"primary",onClick:l[12]||(l[12]=o=>v.value=!1)})]),_:1})]),_:1})]),_:1},8,["modelValue"])])]),_:1}))}}),ul=O(Y,[["__scopeId","data-v-2268f675"]]);export{ul as default};
