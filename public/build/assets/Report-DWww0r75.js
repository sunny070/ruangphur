import{C as k,c as D,a as d,b as A,w as C,d as m,u as S,g as t,n as V,q as n,D as x,h as a,i as u,F as c,z as y,k as w,N as B,t as l,v as N}from"./app-DyTi5KuX.js";import{Q as R}from"./QPage-CN5TYfTe.js";import{_ as U}from"./AdminLayout-Du6pJdT5.js";import{d as j}from"./index-o20kKi-8.js";import"./QLayout-CxhaKj2c.js";import"./format-C9iz93YD.js";import"./QMenu-BB-sI_PG.js";import"./QExpansionItem-DRUD65om.js";import"./ClosePopup-Aj3Jq9XG.js";const q={class:"p-6"},z={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},E=["value"],F=["value"],P=["value"],L={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},M={class:"flex gap-4"},O={class:"bg-white rounded-lg overflow-x-auto table-responsive"},Q={class:"q-table q-table__grid w-full"},T={class:"bg-white divide-y divide-gray-200"},$={class:"px-6 py-4 whitespace-nowrap"},G={class:"px-6 py-4 whitespace-nowrap"},H={class:"px-6 py-4 whitespace-nowrap"},I={class:"px-6 py-4 whitespace-nowrap"},J={class:"px-6 py-4 whitespace-nowrap"},K={class:"px-6 py-4 whitespace-nowrap"},W={class:"px-6 py-4 whitespace-nowrap"},X={class:"px-6 py-4 whitespace-nowrap"},rt=Object.assign({layout:U},{__name:"Report",props:{applications:Array,filters:Object,dropdowns:Object},setup(p){const r=p,o=k({status:r.filters.status||"",district_id:r.filters.district_id||"",constituency_id:r.filters.constituency_id||"",start_date:r.filters.start_date||"",end_date:r.filters.end_date||""}),g=D(()=>o.district_id?r.dropdowns.constituencies.filter(i=>i.district_id==o.district_id):r.dropdowns.constituencies),_=()=>{B.get("/admin/report",o)},v=()=>{const i=new URLSearchParams(o).toString();window.location.href=`/admin/report/export?${i}`},h=i=>({Pending:"bg-yellow-100 text-yellow-800",Approved:"bg-green-100 text-green-800",Rejected:"bg-red-100 text-red-800",Processed:"bg-blue-100 text-blue-800"})[i]||"bg-gray-100 text-gray-800";return(i,s)=>(d(),A(R,null,{default:C(()=>[m(S(j.Head),{title:"Report"}),t("div",q,[s[14]||(s[14]=t("h1",{class:"text-2xl font-bold mb-6"},"Generate Report",-1)),t("form",{onSubmit:V(_,["prevent"]),class:"mb-6 space-y-4 bg-white p-4 rounded-lg shadow"},[t("div",z,[t("div",null,[s[6]||(s[6]=t("label",{class:"block text-sm font-medium text-gray-700"},"Status",-1)),n(t("select",{"onUpdate:modelValue":s[0]||(s[0]=e=>o.status=e),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm"},[s[5]||(s[5]=t("option",{value:""},"All Statuses",-1)),(d(!0),a(c,null,u(p.dropdowns.statuses,e=>(d(),a("option",{key:e,value:e},l(e),9,E))),128))],512),[[x,o.status]])]),t("div",null,[s[8]||(s[8]=t("label",{class:"block text-sm font-medium text-gray-700"},"Applicant District",-1)),n(t("select",{"onUpdate:modelValue":s[1]||(s[1]=e=>o.district_id=e),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm"},[s[7]||(s[7]=t("option",{value:""},"All Districts",-1)),(d(!0),a(c,null,u(p.dropdowns.districts,e=>(d(),a("option",{key:e.id,value:e.id},l(e.name),9,F))),128))],512),[[x,o.district_id]])]),t("div",null,[s[10]||(s[10]=t("label",{class:"block text-sm font-medium text-gray-700"},"Deceased Constituency",-1)),n(t("select",{"onUpdate:modelValue":s[2]||(s[2]=e=>o.constituency_id=e),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm"},[s[9]||(s[9]=t("option",{value:""},"All Constituencies",-1)),(d(!0),a(c,null,u(g.value,e=>(d(),a("option",{key:e.id,value:e.id},l(e.name),9,P))),128))],512),[[x,o.constituency_id]])])]),t("div",L,[t("div",null,[s[11]||(s[11]=t("label",{class:"block text-sm font-medium text-gray-700"},"Start Date",-1)),n(t("input",{type:"date","onUpdate:modelValue":s[3]||(s[3]=e=>o.start_date=e),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm"},null,512),[[y,o.start_date]])]),t("div",null,[s[12]||(s[12]=t("label",{class:"block text-sm font-medium text-gray-700"},"End Date",-1)),n(t("input",{type:"date","onUpdate:modelValue":s[4]||(s[4]=e=>o.end_date=e),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm"},null,512),[[y,o.end_date]])])]),t("div",M,[m(w,{type:"submit",label:"Apply Filter",size:"sm",class:"w-full md:w-36",style:{color:"#000",height:"40px","border-radius":"8px",border:"1px solid #5b656f",background:"transparent"}}),m(w,{onClick:v,label:"Export",size:"sm",class:"w-full md:w-36",style:{color:"#fff",height:"40px","border-radius":"8px",border:"1px solid #5b656f",background:"#000"}})])],32),t("div",O,[t("table",Q,[s[13]||(s[13]=t("thead",null,[t("tr",{class:"bg-[#3A424A] text-white"},[t("th",{class:"px-6 py-3 text-left text-xs font-medium uppercase"},"App No"),t("th",{class:"px-6 py-3 text-left text-xs font-medium uppercase"},"Status"),t("th",{class:"px-6 py-3 text-left text-xs font-medium uppercase"},"Applicant"),t("th",{class:"px-6 py-3 text-left text-xs font-medium uppercase"},"District"),t("th",{class:"px-6 py-3 text-left text-xs font-medium uppercase"},"Deceased"),t("th",{class:"px-6 py-3 text-left text-xs font-medium uppercase"},"Constituency "),t("th",{class:"px-6 py-3 text-left text-xs font-medium uppercase"},"Transport Cost "),t("th",{class:"px-6 py-3 text-left text-xs font-medium uppercase"},"Date")])],-1)),t("tbody",T,[(d(!0),a(c,null,u(p.applications,e=>{var f,b;return d(),a("tr",{key:e.id},[t("td",$,l(e.application_no),1),t("td",G,[t("span",{class:N([h(e.status),"px-2 py-1 rounded-full text-sm"])},l(e.status),3)]),t("td",H,l(e.applicant.name),1),t("td",I,l(e.applicant.district.name),1),t("td",J,l(e.deceased.name),1),t("td",K,l(((f=e.deceased.constituency)==null?void 0:f.name)||"N/A"),1),t("td",W,l(((b=e.transport)==null?void 0:b.transport_cost)||0),1),t("td",X,l(new Date(e.created_at).toLocaleDateString()),1)])}),128))])])])])]),_:1}))}});export{rt as default};
