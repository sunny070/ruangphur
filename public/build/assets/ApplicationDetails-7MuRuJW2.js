import{r as Rt,c as Kt,a as d,b as p,w as n,g as t,d as o,Q as zt,u as It,x as Tt,t as l,k as m,f as r,e as b,l as qt,m as At,j as Ot,p as St,q as Mt,s as Yt,N as Pt}from"./app-DyTi5KuX.js";import{Q as h}from"./QChip-ChNv0UoZ.js";import{Q as Gt}from"./QPage-CN5TYfTe.js";import{C as Qt}from"./ClosePopup-Aj3Jq9XG.js";import{_ as Ht}from"./AdminLayout-Du6pJdT5.js";import"./QLayout-CxhaKj2c.js";import"./format-C9iz93YD.js";import"./QMenu-BB-sI_PG.js";import"./QExpansionItem-DRUD65om.js";const Ut={class:"grid md:grid-cols-2 gap-4"},Jt={class:"flex items-center order-1 md:order-none"},Lt={class:"flex justify-center"},Wt={class:"w-auto max-w-4xl rounded-[10px] border border-[#EEE] bg-[#E9F4FF] p-4 md:p-5 mt-6"},Xt={class:"grid md:grid-cols-2"},Zt={class:"flex flex-col justify-center items-center"},_t={class:"text-xl md:text-2xl mt-2"},te={class:"mb-4 text-sm"},ee={class:"flex justify-center gap-10 items-center"},ie={class:"flex-col flex items-center"},le={class:"flex-col flex items-center"},ae={class:"flex-col flex items-center"},se={class:"flex flex-col md:flex-row justify-center items-center gap-4 mt-4"},ne={class:"grid md:grid-cols-2 gap-4 px-4 md:pr-28 mt-6"},oe={class:"flex flex-col gap-4"},de={class:"border-2 w-full p-4 md:pl-12 md:pt-6 rounded-md"},pe={class:"space-y-4"},re={class:"leading-[2px] pt-4"},ce={class:"leading-[2px] pt-4"},ue={class:"leading-[2px] pt-4"},me={class:"leading-[2px] pt-4"},xe={class:"leading-[2px] pt-4"},fe={class:"leading-[2px] pt-4"},ge={class:"leading-[2px] pt-4"},ve={class:"border-2 w-full p-4 md:pl-12 md:pt-6 rounded-md"},be={class:"space-y-4"},he={class:"leading-[2px]"},ke={class:"leading-[2px] pt-4"},ye={class:"leading-[2px] pt-4"},we={class:"leading-[2px] pt-4"},Be={class:"border-2 rounded-md w-full p-4 md:pl-12 md:pt-6"},Ce={class:"flex flex-wrap gap-2"},De={class:"flex flex-col gap-4"},je={class:"border-2 w-full p-4 md:pl-12 md:pt-6 rounded-md"},Ve={class:"space-y-4"},Ee={class:"pl-4"},Re={class:"leading-[2px]"},Ae={class:"leading-[2px] pt-4"},Me={class:"pl-4"},Pe={class:"leading-[2px]"},Qe={class:"leading-[2px] pt-4"},$e={class:"leading-[2px] pt-4"},Fe={class:"pl-4"},Ne={class:"leading-[2px]"},Ke={class:"leading-[2px] pt-4"},ze={class:"leading-[2px] pt-4"},Ie={class:"leading-[2px] pt-4"},Te={class:"border-2 rounded-md w-full p-4 md:pl-12 md:pt-6"},qe={class:"space-y-4"},Oe={class:"leading-[2px]"},Se={class:"leading-[2px] pt-4"},Ye={class:"leading-[2px] pt-4"},Ge={class:"flex flex-col md:flex-row justify-center items-center gap-4 my-6"},ei=Object.assign({layout:Ht},{__name:"ApplicationDetails",props:{application:Object},setup(i){const x=i,k=Rt(!1),f=Rt("");let w=null;const B=s=>{w=s,k.value=!0},$t=async()=>{if(!f.value.trim()){alert("Please provide a rejection reason");return}if(confirm("Are you sure you want to reject this application?"))try{await Pt.post(`/admin/application/${w}/reject`,{feedback:f.value}),f.value=""}catch(s){console.error(s)}},C=async s=>{if(confirm("Are you sure you want to approve this application?"))try{await Pt.post(`/admin/application/${s}/approve`)}catch(e){console.error(e)}},v=s=>{s?window.open(s,"_blank"):$q.notify({type:"negative",message:"File not found"})},Ft=(s,e)=>{const c=new Date(s),u=new Date(e),g=u.getFullYear()-c.getFullYear();return u.getMonth()<c.getMonth()||u.getMonth()===c.getMonth()&&u.getDate()<c.getDate()?g-1:g},Nt=Kt(()=>Ft(x.application.deceased.dob,x.application.deceased.time_of_death));return(s,e)=>(d(),p(Gt,{padding:""},{default:n(()=>{var c,u,g,y,D,j,V,E,R,A,M,P,Q,$,F,N,K,z,I,T,q,O,S,Y,G,H,U,J,L,W,X,Z,_,tt,et,it,lt,at,st,nt,ot,dt,pt,rt,ct,ut,mt,xt,ft,gt,vt,bt,ht,kt,yt,wt,Bt,Ct,Dt,jt,Vt,Et;return[t("div",Ut,[t("div",Jt,[o(It(Tt),{href:s.route("admin.application"),size:"sm",flat:"",outlined:"",class:"flex items-center justify-center"},{default:n(()=>[o(zt,{name:"arrow_back",size:"16px",class:"q-mr-xs"}),e[10]||(e[10]=t("span",null,"Back",-1))]),_:1},8,["href"])])]),t("div",Lt,[t("div",Wt,[t("div",Xt,[t("div",Zt,[e[11]||(e[11]=t("img",{src:"/image/icon 1.png",alt:"Ruang",class:"w-12 h-12"},null,-1)),t("h5",_t,l((u=(c=i.application)==null?void 0:c.applicant)==null?void 0:u.name),1),t("p",te,l(i.application.deceased.relative.name)+" "+l(i.application.deceased.name),1)]),t("div",ee,[t("div",ie,[t("h6",null,l((y=(g=i.application)==null?void 0:g.transport)==null?void 0:y.distance),1),e[12]||(e[12]=t("p",null,"Kilometre",-1))]),t("div",le,[t("h6",null,l((j=(D=i.application)==null?void 0:D.transport)==null?void 0:j.vehicle_number),1),e[13]||(e[13]=t("p",null,"Motor Reg.",-1))]),t("div",ae,[t("h6",null,l((E=(V=i.application)==null?void 0:V.transport)==null?void 0:E.transport_cost),1),e[14]||(e[14]=t("p",null,"Amount (Rs)",-1))])])]),t("div",se,[((R=i.application)==null?void 0:R.status)==="Verified"||((A=i.application)==null?void 0:A.status)==="Pending"?(d(),p(m,{key:0,onClick:e[0]||(e[0]=a=>C(i.application.id)),label:"Approve",size:"sm",class:"w-full md:w-36",style:{color:"#fff",height:"40px","border-radius":"8px",border:"1px solid #5b656f",background:"#000"}})):r("",!0),((M=i.application)==null?void 0:M.status)==="Verified"||((P=i.application)==null?void 0:P.status)==="Pending"?(d(),p(m,{key:1,onClick:e[1]||(e[1]=a=>B(i.application.id)),label:"Reject",size:"sm",class:"w-full md:w-36",style:{color:"#000",height:"40px","border-radius":"8px",border:"1px solid #5b656f",background:"transparent"}})):r("",!0)])])]),t("div",ne,[t("div",oe,[t("div",de,[e[23]||(e[23]=t("p",{class:"text-center w-32 h-4 rounded-[20px] bg-[#E9E9E9] mb-4 md:mb-8"}," Mitthi Chungchang ",-1)),t("div",pe,[e[15]||(e[15]=t("p",{class:"text-[#61646B]"},"Mitthi pianni leh thla",-1)),t("p",null,l(i.application.deceased.dob),1)]),t("div",re,[e[16]||(e[16]=t("p",{class:"text-[#61646B]"},"Kum",-1)),t("p",null,l(Nt.value)+" years",1)]),t("div",ce,[e[17]||(e[17]=t("p",{class:"text-[#61646B]"},"Gender",-1)),t("p",null,l(i.application.deceased.gender),1)]),t("div",ue,[e[18]||(e[18]=t("p",{class:"text-[#61646B]"},"Thih ni leh darkar",-1)),t("p",null,l(i.application.deceased.time_of_death),1)]),t("div",me,[e[19]||(e[19]=t("p",{class:"text-[#61646B]"},"Thihna hmun",-1)),t("p",null,l(i.application.deceased.place_of_death),1)]),t("div",xe,[e[20]||(e[20]=t("p",{class:"text-[#61646B]"},"District",-1)),t("p",null,l((F=($=(Q=i.application)==null?void 0:Q.deceased)==null?void 0:$.district)==null?void 0:F.name),1)]),t("div",fe,[e[21]||(e[21]=t("p",{class:"text-[#61646B]"},"Veng/Khua",-1)),t("p",null,l((K=(N=i.application)==null?void 0:N.deceased)==null?void 0:K.locality),1)]),t("div",ge,[e[22]||(e[22]=t("p",{class:"text-[#61646B]"},"Assembly Constituency",-1)),t("p",null,l((I=(z=i.application)==null?void 0:z.deceased)==null?void 0:I.constituency.name),1)])]),t("div",ve,[e[28]||(e[28]=t("p",{class:"text-center w-32 h-4 rounded-[20px] bg-[#E9E9E9] mb-4 md:mb-8"}," Ruang Phurh Diltu ",-1)),t("div",be,[t("div",he,[e[24]||(e[24]=t("p",{class:"text-[#61646B]"},"Hming",-1)),t("p",null,l((q=(T=i.application)==null?void 0:T.applicant)==null?void 0:q.name),1)]),t("div",ke,[e[25]||(e[25]=t("p",{class:"text-[#61646B]"},"District",-1)),t("p",null,l((S=(O=i.application)==null?void 0:O.applicant)==null?void 0:S.district.name),1)]),t("div",ye,[e[26]||(e[26]=t("p",{class:"text-[#61646B]"},"Veng/Khua",-1)),t("p",null,l((G=(Y=i.application)==null?void 0:Y.applicant)==null?void 0:G.locality),1)]),t("div",we,[e[27]||(e[27]=t("p",{class:"text-[#61646B]"},"Phone Number",-1)),t("p",null,l((U=(H=i.application)==null?void 0:H.applicant)==null?void 0:U.mobile),1)])])]),t("div",Be,[e[33]||(e[33]=t("p",{class:"text-center w-32 h-4 rounded-[20px] bg-[#E9E9E9] mb-4 md:mb-8"}," Document Thiltel te ",-1)),t("div",Ce,[(L=(J=i.application)==null?void 0:J.attachment)!=null&&L.id_proof?(d(),p(h,{key:0,dense:"",class:"transparent text-black",icon:"check_circle",clickable:"",onClick:e[2]||(e[2]=a=>v("/storage/"+i.application.attachment.id_proof))},{default:n(()=>e[29]||(e[29]=[b(" Mitthi Aadhar card/Voter ID/Birth Certificate ")])),_:1})):r("",!0),(X=(W=i.application)==null?void 0:W.attachment)!=null&&X.receipt?(d(),p(h,{key:1,dense:"",class:"transparent text-black",icon:"check_circle",clickable:"",onClick:e[3]||(e[3]=a=>v("/storage/"+i.application.attachment.receipt))},{default:n(()=>e[30]||(e[30]=[b(" Motor hman man Voucher/Receipt ")])),_:1})):r("",!0),(_=(Z=i.application)==null?void 0:Z.attachment)!=null&&_.death_certificate?(d(),p(h,{key:2,dense:"",class:"transparent text-black",icon:"check_circle",clickable:"",onClick:e[4]||(e[4]=a=>v("/storage/"+i.application.attachment.death_certificate))},{default:n(()=>e[31]||(e[31]=[b(" Death Certificate ")])),_:1})):r("",!0),(et=(tt=i.application)==null?void 0:tt.attachment)!=null&&et.additional_document?(d(),p(h,{key:3,dense:"",class:"transparent text-black",icon:"check_circle",clickable:"",onClick:e[5]||(e[5]=a=>v("/storage/"+i.application.attachment.additional_document))},{default:n(()=>e[32]||(e[32]=[b(" Diltu Aadhar card/voter ID ")])),_:1})):r("",!0)])])]),t("div",De,[t("div",je,[e[46]||(e[46]=t("p",{class:"text-center w-48 h-4 rounded-[20px] bg-[#E9E9E9] mb-4 md:mb-8"}," Ruang Phurh leh Motor Chungchang ",-1)),t("div",Ve,[e[43]||(e[43]=t("p",{class:"pt-5"},"Ruang phurh tanna",-1)),t("div",Ee,[t("div",Re,[e[34]||(e[34]=t("p",{class:"text-[#61646B]"},"District",-1)),t("p",null,l((lt=(it=i.application)==null?void 0:it.transport)==null?void 0:lt.source_district.name),1)]),t("div",Ae,[e[35]||(e[35]=t("p",{class:"text-[#61646B]"},"Veng/Khua",-1)),t("p",null,l((st=(at=i.application)==null?void 0:at.transport)==null?void 0:st.source_locality),1)])]),e[44]||(e[44]=t("p",{class:"pt-5"},"Ruang dahna tur hmun",-1)),t("div",Me,[t("div",Pe,[e[36]||(e[36]=t("p",{class:"text-[#61646B]"},"District",-1)),t("p",null,l((ot=(nt=i.application)==null?void 0:nt.transport)==null?void 0:ot.destination_district.name),1)]),t("div",Qe,[e[37]||(e[37]=t("p",{class:"text-[#61646B]"},"Veng/Khua",-1)),t("p",null,l((pt=(dt=i.application)==null?void 0:dt.transport)==null?void 0:pt.destination_locality),1)])]),t("div",$e,[e[38]||(e[38]=t("p",{class:"text-[#61646B]"},"Kilometer",-1)),t("p",null,l((ct=(rt=i.application)==null?void 0:rt.transport)==null?void 0:ct.distance),1)]),e[45]||(e[45]=t("p",{class:"pt-5"},"Ruang phurhna motor",-1)),t("div",Fe,[t("div",Ne,[e[39]||(e[39]=t("p",{class:"text-[#61646B]"}," Motor registration number ",-1)),t("p",null,l((mt=(ut=i.application)==null?void 0:ut.transport)==null?void 0:mt.vehicle_number),1)]),t("div",Ke,[e[40]||(e[40]=t("p",{class:"text-[#61646B]"}," Motor neitu/khalhtu hming ",-1)),t("p",null,l((ft=(xt=i.application)==null?void 0:xt.transport)==null?void 0:ft.driver_name),1)]),t("div",ze,[e[41]||(e[41]=t("p",{class:"text-[#61646B]"},"Phone Number",-1)),t("p",null,l((vt=(gt=i.application)==null?void 0:gt.transport)==null?void 0:vt.driver_phone),1)]),t("div",Ie,[e[42]||(e[42]=t("p",{class:"text-[#61646B]"},"Motor saung (Rs.)",-1)),t("p",null,l((ht=(bt=i.application)==null?void 0:bt.transport)==null?void 0:ht.transport_cost),1)])])])]),t("div",Te,[e[50]||(e[50]=t("p",{class:"text-center w-32 h-4 rounded-[20px] bg-[#E9E9E9] mb-4 md:mb-8"}," Bank Details ",-1)),t("div",qe,[t("div",Oe,[e[47]||(e[47]=t("p",{class:"text-[#61646B]"},"Bank hming",-1)),t("p",null,l((yt=(kt=i.application)==null?void 0:kt.applicant)==null?void 0:yt.bank_name),1)]),t("div",Se,[e[48]||(e[48]=t("p",{class:"text-[#61646B]"},"Bank account number",-1)),t("p",null,l((Bt=(wt=i.application)==null?void 0:wt.applicant)==null?void 0:Bt.account_no),1)]),t("div",Ye,[e[49]||(e[49]=t("p",{class:"text-[#61646B]"},"IFSC Code",-1)),t("p",null,l((Dt=(Ct=i.application)==null?void 0:Ct.applicant)==null?void 0:Dt.ifsc_code),1)])])])])]),e[52]||(e[52]=t("hr",{class:"my-4 border-border"},null,-1)),t("div",Ge,[x.application&&x.application.status==="Pending"||((jt=i.application)==null?void 0:jt.status)==="Verified"?(d(),p(m,{key:0,onClick:e[6]||(e[6]=a=>C(x.application.id)),label:"Approve",size:"sm",style:{color:"#fff",width:"144px",height:"40px","flex-shrink":"0","border-radius":"8px",border:"1px solid #5b656f",background:"#000"}})):r("",!0),((Vt=i.application)==null?void 0:Vt.status)==="Pending"||((Et=i.application)==null?void 0:Et.status)==="Verified"?(d(),p(m,{key:1,onClick:e[7]||(e[7]=a=>B(i.application.id)),label:"Reject",size:"sm",class:"w-full md:w-36",style:{color:"#000",height:"40px","border-radius":"8px",border:"1px solid #5b656f",background:"transparent"}})):r("",!0)]),o(Yt,{modelValue:k.value,"onUpdate:modelValue":e[9]||(e[9]=a=>k.value=a)},{default:n(()=>[o(qt,{style:{"min-width":"400px"}},{default:n(()=>[o(At,null,{default:n(()=>e[51]||(e[51]=[t("div",{class:"text-h6"},"Reason for Rejection",-1)])),_:1}),o(At,null,{default:n(()=>[o(Ot,{color:"dark",modelValue:f.value,"onUpdate:modelValue":e[8]||(e[8]=a=>f.value=a),label:"Please provide the reason for rejection",type:"textarea",autogrow:"",rules:[a=>!!a||"Reason is required"]},null,8,["modelValue","rules"])]),_:1}),o(St,{align:"right"},{default:n(()=>[Mt(o(m,{flat:"",label:"Cancel",color:"primary",style:{color:"#fff",width:"144px",height:"40px","flex-shrink":"0","border-radius":"8px",border:"1px solid #5b656f",background:"#000"}},null,512),[[Qt]]),Mt(o(m,{style:{"border-radius":"8px"},label:"Confirm Reject",color:"negative",onClick:$t},null,512),[[Qt]])]),_:1})]),_:1})]),_:1},8,["modelValue"])]}),_:1}))}});export{ei as default};
