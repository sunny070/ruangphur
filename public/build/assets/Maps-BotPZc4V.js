import{E as Q,L as S}from"./index-D-NluVNk.js";import{Q as q}from"./QPage-BnL5U6Tp.js";import{r as a,o as z,U as E,a as y,b as x,w as s,x as e,f as r,i as t,k as $,t as _,m as U,p as A,e as B,s as I,Q as g,u as P}from"./app-BU-P0o3a.js";import{_ as O}from"./WebLayout-DWayuCGp.js";import{_ as j}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./QLayout-CjzmvHMW.js";import"./format-B28FXeBv.js";import"./QTabs-ZhVq7cEj.js";import"./rtl-DFPa-2ov.js";const H={class:"container"},J={class:"input-container"},W={class:"info-container"},X=40,Y=Object.assign({layout:O},{__name:"Maps",setup(Z){const D=a({lat:23.164543,lng:92.9375739}),i=a(null),u=a(null),C=a(""),T=a(""),F=a(""),k=a(""),G=a(""),K=a(""),M=a(0),w=a(0),d=a(!1),v=a(!1),V=a(null);z(()=>{E(()=>{typeof google<"u"?V.value=new google.maps.Geocoder:console.error("Google Maps API not loaded.")})});const L=(n,l)=>{V.value&&V.value.geocode({location:n},(o,m)=>{if(m==="OK"&&o[0]){const c=o[0].formatted_address;l==="source"?(C.value=c,T.value=n.lat,F.value=n.lng):l==="destination"&&(k.value=c,G.value=n.lat,K.value=n.lng),N()}else console.error("Geocoder failed due to:",m)})},p=(n,l)=>{const o={lat:n.latLng.lat(),lng:n.latLng.lng()};l==="source"?(i.value=o,L(o,"source")):l==="destination"&&(u.value=o,L(o,"destination"))},N=()=>{if(i.value&&u.value){const l=f(u.value.lat-i.value.lat),o=f(u.value.lng-i.value.lng),m=f(i.value.lat),c=f(u.value.lat),b=Math.sin(l/2)*Math.sin(l/2)+Math.cos(m)*Math.cos(c)*Math.sin(o/2)*Math.sin(o/2),R=2*Math.atan2(Math.sqrt(b),Math.sqrt(1-b));M.value=(6371*R).toFixed(2),w.value=(M.value*X).toFixed(2)}},f=n=>n*(Math.PI/180);return(n,l)=>(y(),x(e(q),{padding:""},{default:s(()=>[r("div",H,[l[16]||(l[16]=r("h2",null,"Transportation Map",-1)),r("div",J,[t(e($),{modelValue:C.value,"onUpdate:modelValue":l[0]||(l[0]=o=>C.value=o),label:"Source Locality",readonly:"",onClick:l[1]||(l[1]=o=>d.value=!0)},null,8,["modelValue"]),t(e($),{modelValue:k.value,"onUpdate:modelValue":l[2]||(l[2]=o=>k.value=o),label:"Destination Locality",readonly:"",onClick:l[3]||(l[3]=o=>v.value=!0)},null,8,["modelValue"])]),r("div",W,[r("p",null,"Distance: "+_(M.value)+" km",1),r("p",null,"Transport Cost: â‚¹"+_(w.value),1)]),t(e(P),{modelValue:d.value,"onUpdate:modelValue":l[8]||(l[8]=o=>d.value=o)},{default:s(()=>[t(e(U),{style:{width:"90vw","max-width":"600px"}},{default:s(()=>[t(e(A),null,{default:s(()=>[l[14]||(l[14]=r("h6",null,"Select Source Location",-1)),t(e(Q),{center:D.value,zoom:7,class:"dialog-map",onClick:l[5]||(l[5]=o=>p(o,"source"))},{default:s(()=>[i.value?(y(),x(e(S),{key:0,position:i.value,options:{position:i.value,label:"S"},onDragend:l[4]||(l[4]=o=>p(o,"source"))},null,8,["position","options"])):B("",!0)]),_:1},8,["center"])]),_:1}),t(e(I),{align:"right"},{default:s(()=>[t(e(g),{flat:"",label:"Cancel",onClick:l[6]||(l[6]=o=>d.value=!1)}),t(e(g),{flat:"",label:"Confirm",color:"primary",onClick:l[7]||(l[7]=o=>d.value=!1)})]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(e(P),{modelValue:v.value,"onUpdate:modelValue":l[13]||(l[13]=o=>v.value=o)},{default:s(()=>[t(e(U),{style:{width:"90vw","max-width":"600px"}},{default:s(()=>[t(e(A),null,{default:s(()=>[l[15]||(l[15]=r("h6",null,"Select Destination Location",-1)),t(e(Q),{center:D.value,zoom:7,class:"dialog-map",onClick:l[10]||(l[10]=o=>p(o,"destination"))},{default:s(()=>[u.value?(y(),x(e(S),{key:0,position:u.value,options:{position:u.value,label:"D"},onDragend:l[9]||(l[9]=o=>p(o,"destination"))},null,8,["position","options"])):B("",!0)]),_:1},8,["center"])]),_:1}),t(e(I),{align:"right"},{default:s(()=>[t(e(g),{flat:"",label:"Cancel",onClick:l[11]||(l[11]=o=>v.value=!1)}),t(e(g),{flat:"",label:"Confirm",color:"primary",onClick:l[12]||(l[12]=o=>v.value=!1)})]),_:1})]),_:1})]),_:1},8,["modelValue"])])]),_:1}))}}),ul=j(Y,[["__scopeId","data-v-2268f675"]]);export{ul as default};
