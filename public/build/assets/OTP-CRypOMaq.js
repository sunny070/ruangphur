import{r as c,c as y,o as R,a as p,b as j,w as n,d as r,u as h,g as o,t as _,n as q,h as b,i as A,F,k as L,f as N,e as S,T as O,a4 as f,j as U,a5 as E}from"./app-DyTi5KuX.js";import{Q as I}from"./QForm-Dt9llfmf.js";import{Q as K}from"./QPage-CN5TYfTe.js";import{a as M,b as D}from"./QLayout-CxhaKj2c.js";import{W}from"./WebLayout-DFgdyUDY.js";import{d as P}from"./index-o20kKi-8.js";import"./format-C9iz93YD.js";import"./QTabs-lxqZivxn.js";import"./rtl-DFPa-2ov.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const H={class:"border w-[412px] h-[280px] text-center"},$={id:"q-app",style:{"min-height":"100vh"}},z={class:"q-pa-md"},G={class:"row q-gutter-x-sm justify-center"},J={class:"grid grid-cols-2 items-center"},X={key:0,class:"text-caption q-mt-sm text-right"},i=4,ie=Object.assign({layout:W},{__name:"OTP",props:["phone"],setup(k){const T=k,u=c(Array(i).fill("")),l=c(0),V=y(()=>l.value>0),m=y(()=>u.value.join("")),w=()=>{m.value.length===i?O({otp:m.value}).post(route("form.validateOtp")):f.create({message:"Please enter a valid OTP.",color:"negative"})},v=()=>{l.value=30;const e=setInterval(()=>{l.value--,l.value<=0&&clearInterval(e)},1e3)},x=()=>{O({}).post(route("form.resendOtp"),{preserveScroll:!0,onSuccess:()=>{f.create({message:"OTP resent successfully!",color:"positive"}),v()},onError:t=>{f.create({message:t.error||"Failed to resend OTP",color:"negative"})}})};R(v);const g=c([]),Q=(e,t)=>{e&&(g.value[t]=e)},d=e=>{e>=0&&e<i&&g.value[e].select()},B=(e,t)=>{const s=e.key;["Tab","Shift","Meta","Control","Alt"].includes(s)||(s==="ArrowLeft"||s==="Backspace"?d(t-1):s==="ArrowRight"&&d(t+1))},C=(e,t)=>{e&&d(t+1)};return(e,t)=>(p(),j(M,null,{default:n(()=>[r(D,null,{default:n(()=>[r(K,{padding:"",class:"flex justify-center"},{default:n(()=>[r(h(P.Head),{title:"OTP"}),o("div",H,[o("div",null,[t[0]||(t[0]=o("h5",null,"Enter OTP to verify",-1)),o("p",null,"An OTP has been sent to "+_(T.phone),1)]),r(I,{onSubmit:q(w,["prevent"]),class:"q-gutter-md"},{default:n(()=>[o("div",$,[o("div",z,[o("div",G,[(p(),b(F,null,A(i,s=>r(U,E({outlined:"",modelValue:u.value[s-1],"onUpdate:modelValue":a=>u.value[s-1]=a,ref_for:!0},e.$attrs,{onKeyup:a=>B(a,s-1),"onUpdate:modelValue":a=>C(a,s-1),key:s,ref_for:!0,ref:a=>Q(a,s-1),maxlength:"1","input-class":"text-center",style:{width:"6ch"}}),null,16,["modelValue","onUpdate:modelValue","onKeyup"])),64))])]),r(L,{label:"Verify",color:"black",type:"submit"}),o("div",J,[l.value>0?(p(),b("p",X," Resend OTP in "+_(l.value)+" seconds ",1)):N("",!0),r(h(P.Link),{label:"Resend OTP",onClick:x,disabled:V.value,color:"dark",class:""},{default:n(()=>t[1]||(t[1]=[S(" Resend OTP ")])),_:1},8,["disabled"])])]),t[2]||(t[2]=o("div",{class:""},null,-1))]),_:1})])]),_:1})]),_:1})]),_:1}))}});export{ie as default};
