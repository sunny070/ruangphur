import{Q as _}from"./QPage-DO6UowWf.js";import{C as h,c as k,a as d,b as D,w as A,g as t,n as C,q as n,D as m,h as r,i as u,F as c,z as b,N as S,t as l,v as U}from"./app-BHeael7A.js";import{_ as V}from"./AdminLayout-BPkz0efM.js";import"./QLayout-7wX7CmRM.js";import"./format-CYKmJ8Oj.js";import"./QMenu-aFYmALZq.js";import"./QExpansionItem-OPCk_GRv.js";import"./ClosePopup-B8Woq_MJ.js";const B={class:"p-6"},N={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},R=["value"],j=["value"],q=["value"],E={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},F={class:"bg-white rounded-lg overflow-x-auto table-responsive"},P={class:"q-table q-table__grid w-full"},L={class:"bg-white divide-y divide-gray-200"},M={class:"px-6 py-4 whitespace-nowrap"},O={class:"px-6 py-4 whitespace-nowrap"},z={class:"px-6 py-4 whitespace-nowrap"},Q={class:"px-6 py-4 whitespace-nowrap"},T={class:"px-6 py-4 whitespace-nowrap"},$={class:"px-6 py-4 whitespace-nowrap"},G={class:"px-6 py-4 whitespace-nowrap"},H={class:"px-6 py-4 whitespace-nowrap"},et=Object.assign({layout:V},{__name:"Report",props:{applications:Array,filters:Object,dropdowns:Object},setup(p){const a=p,o=h({status:a.filters.status||"",district_id:a.filters.district_id||"",constituency_id:a.filters.constituency_id||"",start_date:a.filters.start_date||"",end_date:a.filters.end_date||""}),f=k(()=>o.district_id?a.dropdowns.constituencies.filter(i=>i.district_id==o.district_id):a.dropdowns.constituencies),g=()=>{S.get("/verifier/report",o)},w=()=>{const i=new URLSearchParams(o).toString();window.location.href=`/verifier/report/export?${i}`},v=i=>({Pending:"bg-yellow-100 text-yellow-800",Approved:"bg-green-100 text-green-800",Rejected:"bg-red-100 text-red-800",Processed:"bg-blue-100 text-blue-800"})[i]||"bg-gray-100 text-gray-800";return(i,e)=>(d(),D(_,null,{default:A(()=>[t("div",B,[e[15]||(e[15]=t("h1",{class:"text-2xl font-bold mb-6"},"Generate Report",-1)),t("form",{onSubmit:C(g,["prevent"]),class:"mb-6 space-y-4 bg-white p-4 rounded-lg shadow"},[t("div",N,[t("div",null,[e[6]||(e[6]=t("label",{class:"block text-sm font-medium text-gray-700"},"Status",-1)),n(t("select",{"onUpdate:modelValue":e[0]||(e[0]=s=>o.status=s),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm"},[e[5]||(e[5]=t("option",{value:""},"All Statuses",-1)),(d(!0),r(c,null,u(p.dropdowns.statuses,s=>(d(),r("option",{key:s,value:s},l(s),9,R))),128))],512),[[m,o.status]])]),t("div",null,[e[8]||(e[8]=t("label",{class:"block text-sm font-medium text-gray-700"},"Applicant District",-1)),n(t("select",{"onUpdate:modelValue":e[1]||(e[1]=s=>o.district_id=s),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm"},[e[7]||(e[7]=t("option",{value:""},"All Districts",-1)),(d(!0),r(c,null,u(p.dropdowns.districts,s=>(d(),r("option",{key:s.id,value:s.id},l(s.name),9,j))),128))],512),[[m,o.district_id]])]),t("div",null,[e[10]||(e[10]=t("label",{class:"block text-sm font-medium text-gray-700"},"Deceased Constituency",-1)),n(t("select",{"onUpdate:modelValue":e[2]||(e[2]=s=>o.constituency_id=s),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm"},[e[9]||(e[9]=t("option",{value:""},"All Constituencies",-1)),(d(!0),r(c,null,u(f.value,s=>(d(),r("option",{key:s.id,value:s.id},l(s.name),9,q))),128))],512),[[m,o.constituency_id]])])]),t("div",E,[t("div",null,[e[11]||(e[11]=t("label",{class:"block text-sm font-medium text-gray-700"},"Start Date",-1)),n(t("input",{type:"date","onUpdate:modelValue":e[3]||(e[3]=s=>o.start_date=s),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm"},null,512),[[b,o.start_date]])]),t("div",null,[e[12]||(e[12]=t("label",{class:"block text-sm font-medium text-gray-700"},"End Date",-1)),n(t("input",{type:"date","onUpdate:modelValue":e[4]||(e[4]=s=>o.end_date=s),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm"},null,512),[[b,o.end_date]])])]),t("div",{class:"flex gap-4"},[e[13]||(e[13]=t("button",{type:"submit",class:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700"}," Apply Filters ",-1)),t("button",{onClick:w,type:"button",class:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700"}," Export to Excel ")])],32),t("div",F,[t("table",P,[e[14]||(e[14]=t("thead",null,[t("tr",{class:"bg-[#3A424A] text-white"},[t("th",{class:"px-6 py-3 text-left text-xs font-medium uppercase"},"App No"),t("th",{class:"px-6 py-3 text-left text-xs font-medium uppercase"},"Status"),t("th",{class:"px-6 py-3 text-left text-xs font-medium uppercase"},"Applicant"),t("th",{class:"px-6 py-3 text-left text-xs font-medium uppercase"},"District"),t("th",{class:"px-6 py-3 text-left text-xs font-medium uppercase"},"Deceased"),t("th",{class:"px-6 py-3 text-left text-xs font-medium uppercase"},"Constituency "),t("th",{class:"px-6 py-3 text-left text-xs font-medium uppercase"},"Transport Cost "),t("th",{class:"px-6 py-3 text-left text-xs font-medium uppercase"},"Date")])],-1)),t("tbody",L,[(d(!0),r(c,null,u(p.applications,s=>{var x,y;return d(),r("tr",{key:s.id},[t("td",M,l(s.application_no),1),t("td",O,[t("span",{class:U([v(s.status),"px-2 py-1 rounded-full text-sm"])},l(s.status),3)]),t("td",z,l(s.applicant.name),1),t("td",Q,l(s.applicant.district.name),1),t("td",T,l(s.deceased.name),1),t("td",$,l(((x=s.deceased.constituency)==null?void 0:x.name)||"N/A"),1),t("td",G,l(((y=s.transport)==null?void 0:y.transport_cost)||0),1),t("td",H,l(new Date(s.created_at).toLocaleDateString()),1)])}),128))])])])])]),_:1}))}});export{et as default};
