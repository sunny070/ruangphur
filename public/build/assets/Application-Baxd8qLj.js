import{Q as j,d as re}from"./dayjs.min-DFIUUdL8.js";import{r as h,o as ie,c as _,a as i,b as p,w as d,e as U,t as r,f as v,g as o,h as f,i as $,F as B,d as a,Q as k,j as u,k as g,l as z,m as H,n as me,p as Y,q as K,s as G,N,v as W,y as be}from"./app-BHeael7A.js";import{Q as w}from"./QSelect-DDZxhFw8.js";import{Q as S,a as A}from"./format-CYKmJ8Oj.js";import{Q as ve}from"./QLayout-7wX7CmRM.js";import{Q as ce}from"./QMenu-aFYmALZq.js";import{Q as pe}from"./QForm-DV-5sO98.js";import{Q as fe}from"./QPage-DO6UowWf.js";import{C as J}from"./ClosePopup-B8Woq_MJ.js";import{_ as Ve}from"./AdminLayout-BPkz0efM.js";import{T as X}from"./TransportRouteMap-DxvVzeZH.js";import"./QChip-DfmNLKZN.js";import"./rtl-DFPa-2ov.js";import"./QExpansionItem-OPCk_GRv.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const ge={class:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-4"},ye={class:"text-lg sm:text-base font-black"},Ce={class:"text-xs sm:text-sm"},xe={class:"grid grid-cols-1 md:grid-cols-2 gap-4 pt-9"},he={class:""},ke={class:"flex justify-end pr-16"},we={class:"table-responsive"},Ae={class:"q-table q-table__grid q-mb-lg"},Ue={class:"no-print"},qe={key:0},Ne={key:1},Se={class:"mt-4",style:{height:"200px"}},Te={key:2},De={class:"mt-4",style:{height:"400px",position:"relative"}},Fe={key:1,class:"absolute-center text-grey"},Ke=Object.assign({layout:Ve},{__name:"Application",props:{applications:Array,statusCounts:Object,flash:Object,dropdowns:Object},setup(b){const c=b,y=h(!1),C=h(null),T=h([]),x=h(""),Z=n=>re(n).format("dddd, MMMM D, YYYY h:mm A"),ee=()=>{C.value?q.value=c.applications.filter(n=>n.deceased.district.name===C.value):q.value=c.applications},m=h(1),s=h({deceased:{},transport:{},applicant:{}});ie(()=>{const n=[...new Set(c.applications.map(e=>e.deceased.district.name))];T.value=n.map(e=>({label:e,value:e}))});const q=_(()=>{let n=c.applications;if(C.value&&(n=n.filter(e=>e.deceased.district.name===C.value)),x.value){const e=x.value.toLowerCase();n=n.filter(l=>l.application_no.toString().toLowerCase().includes(e)||l.applicant.name.toLowerCase().includes(e)||l.deceased.name.toLowerCase().includes(e)||l.applicant.mobile.toString().includes(e)||l.deceased.district.name.toLowerCase().includes(e))}return n}),le=n=>{var e,l,t,V;s.value={...n,transport:{...n.transport,source_lat:Number((e=n.transport)==null?void 0:e.source_lat)||23.1645,source_lng:Number((l=n.transport)==null?void 0:l.source_lng)||92.9376,destination_lat:Number((t=n.transport)==null?void 0:t.destination_lat)||23.1645,destination_lng:Number((V=n.transport)==null?void 0:V.destination_lng)||92.9376}},m.value=1,y.value=!0},te=()=>{N.put(route("applications.update",s.value),{onSuccess:()=>{console.log("success"),y.value=!1},onFinish:()=>{console.log("success"),y.value=!1}}),y.value=!1},se=()=>{m.value<4&&m.value++},ae=()=>{m.value>1&&m.value--},oe=n=>{N.get(route("verifier.applications.show",n))},ne=n=>{confirm("Are you sure you want to delete this application?")&&N.delete(`/verifier/applications/${n}`,{onSuccess:()=>{}})},de=()=>{const e=document.querySelector(".q-table").cloneNode(!0);e.querySelectorAll(".no-print").forEach(V=>V.remove());const t=window.open("","","width=800,height=600");t.document.write(`
        <html>
            <head>
                <title>Print Table</title>
                <style>
                    table {
                        width: 100%;
                        border-collapse: collapse;
                    }
                    th, td {
                        padding: 8px 12px;
                        text-align: left;
                        border-bottom: 1px solid #ddd;
                    }
                    th {
                        background-color: #3A424A;
                        color: white;
                        font-weight: bold;
                    }
                </style>
            </head>
            <body>
                ${e.outerHTML}
            </body>
        </html>
    `),t.document.close(),t.print()},ue=_(()=>[{label:"Incoming",count:c.statusCounts.Incoming||0,bgClass:"bg-[#FFF7EF]",textClass:"text-[#FD7900]"},{label:"Verified",count:c.statusCounts.Verified||0,bgClass:"bg-[#EEFFF8]",textClass:"text-[#00AA68]"},{label:"Rejected",count:c.statusCounts.Rejected||0,bgClass:"bg-[#FFF2F2]",textClass:"text-[#FE6262]"},{label:"Pending",count:c.statusCounts.Pending||0,bgClass:"bg-[#F2F8FF]",textClass:"text-[#404CF1]"}]);return(n,e)=>(i(),p(fe,{padding:""},{default:d(()=>[b.flash.success?(i(),p(j,{key:0,class:"bg-green-4 text-white",dense:""},{default:d(()=>[U(r(b.flash.success),1)]),_:1})):v("",!0),b.flash.error?(i(),p(j,{key:1,class:"bg-red-4 text-white",dense:""},{default:d(()=>[U(r(b.flash.error),1)]),_:1})):v("",!0),o("div",ge,[(i(!0),f(B,null,$(ue.value,l=>(i(),f("div",{key:l.label,class:W(`w-full h-[78px] ${l.bgClass} ${l.textClass} p-4`)},[o("h6",ye,r(l.count),1),o("p",Ce,r(l.label),1)],2))),128))]),o("div",xe,[o("div",null,[o("div",he,[a(u,{rounded:"lg",outlined:"",dense:"","bottom-slots":"",modelValue:x.value,"onUpdate:modelValue":e[1]||(e[1]=l=>x.value=l),label:"Search",color:"black",class:"w-full max-w-md"},{append:d(()=>[x.value!==""?(i(),p(k,{key:0,name:"close",onClick:e[0]||(e[0]=l=>x.value=""),class:"cursor-pointer"})):v("",!0),a(k,{name:"search"})]),_:1},8,["modelValue"])])]),o("div",ke,[a(g,{size:"sm",flat:"",outlined:"",class:"q-btn-custom flex items-center justify-center",onClick:de},{default:d(()=>[a(k,{name:"print",size:"16px",class:"q-mr-xs"}),e[33]||(e[33]=o("span",null,"Print",-1))]),_:1}),a(w,{color:"dark",style:{color:"#000",width:"128px",height:"40px","flex-shrink":"0","border-radius":"8px",border:"1px solid black",background:"transparent"},modelValue:C.value,"onUpdate:modelValue":e[2]||(e[2]=l=>C.value=l),options:T.value,label:"Select District",outlined:"",dense:"",class:"q-mb-md",onInput:ee},null,8,["modelValue","options"])])]),o("div",we,[o("table",Ae,[e[38]||(e[38]=o("thead",{class:"bg-[#3A424A] text-white font-bold h-[30px] w-full text-[11px]"},[o("tr",null,[o("th",null,"Sl.No."),o("th",null,"APPLICATION NO."),o("th",null,"APPLICANT NAME"),o("th",null,"ADDRESS"),o("th",null,"CONTACT No."),o("th",null,"MITTHI KHUA"),o("th",null,"PLACE OF DEATH"),o("th",null,"KILOMETER"),o("th",null,"AMOUNT CLAIMED"),o("th",null,"ACCOUNT No. OF CLAIMANT"),o("th",null,"IFSC"),o("th",null,"STATUS"),o("th",null,"DIL NI"),o("th",{class:"no-print"},"ACTIONS"),o("th",{class:"print-only"},"SIGNATURE")])],-1)),o("tbody",null,[(i(!0),f(B,null,$(q.value,(l,t)=>{var V,D,F,E,I,Q,M,L,P,R;return i(),f("tr",{key:l.id},[o("td",null,r(t+1),1),o("td",null,r(l==null?void 0:l.application_no),1),o("td",null,r((V=l==null?void 0:l.applicant)==null?void 0:V.name),1),o("td",null,r((D=l==null?void 0:l.applicant)==null?void 0:D.locality),1),o("td",null,r((F=l==null?void 0:l.applicant)==null?void 0:F.mobile),1),o("td",null,r((I=(E=l==null?void 0:l.deceased)==null?void 0:E.district)==null?void 0:I.name),1),o("td",null,r((Q=l==null?void 0:l.deceased)==null?void 0:Q.place_of_death),1),o("td",null,r((M=l==null?void 0:l.transport)==null?void 0:M.distance),1),o("td",null,r((L=l==null?void 0:l.transport)==null?void 0:L.transport_cost),1),o("td",null,r((P=l==null?void 0:l.applicant)==null?void 0:P.account_no),1),o("td",null,r((R=l==null?void 0:l.applicant)==null?void 0:R.ifsc_code),1),o("td",null,[o("div",{class:W([{"status-incoming":(l==null?void 0:l.status)==="Pending","status-rejected":(l==null?void 0:l.status)==="Rejected","status-approved":(l==null?void 0:l.status)==="Verified"},"status-badge"])},r(l==null?void 0:l.status),3)]),o("td",null,r(Z(l==null?void 0:l.created_at)),1),o("td",Ue,[a(g,{flat:"",icon:"more_vert",style:be(n.buttonStyle)},null,8,["style"]),a(ce,null,{default:d(()=>[a(ve,null,{default:d(()=>[a(S,{clickable:"",onClick:O=>oe(l.id)},{default:d(()=>[a(A,{avatar:""},{default:d(()=>[a(k,{size:"sm",name:"visibility"})]),_:1}),a(A,null,{default:d(()=>e[34]||(e[34]=[U("View")])),_:1})]),_:2},1032,["onClick"]),a(S,{clickable:"",onClick:O=>le(l)},{default:d(()=>[a(A,{avatar:""},{default:d(()=>[a(k,{name:"edit"})]),_:1}),a(A,null,{default:d(()=>e[35]||(e[35]=[U("Edit/Update")])),_:1})]),_:2},1032,["onClick"]),a(S,{clickable:"",onClick:O=>ne(l.id)},{default:d(()=>[a(A,{avatar:""},{default:d(()=>[a(k,{name:"delete"})]),_:1}),a(A,null,{default:d(()=>e[36]||(e[36]=[U("Delete")])),_:1})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),e[37]||(e[37]=o("td",{class:"print-only"},null,-1))])}),128))])])]),a(G,{modelValue:y.value,"onUpdate:modelValue":e[31]||(e[31]=l=>y.value=l)},{default:d(()=>[a(z,{class:"w-[411px] h-[822px] rounded-md"},{default:d(()=>[a(H,null,{default:d(()=>[a(pe,{onSubmit:me(te,["prevent"])},{default:d(()=>{var l;return[m.value===1?(i(),f("div",qe,[e[39]||(e[39]=o("p",{class:"text-center w-[242px] h-[17px] flex-shrink-0 rounded-[20px] bg-[#E9E9E9] mb-8"}," Ruang Phurh MITTHI Chungchang ",-1)),a(u,{modelValue:s.value.deceased.name,"onUpdate:modelValue":e[3]||(e[3]=t=>s.value.deceased.name=t),label:"Mitthi hming",outlined:"",dense:"",class:"q-mb-md"},null,8,["modelValue"]),a(u,{modelValue:s.value.deceased.relative_name,"onUpdate:modelValue":e[4]||(e[4]=t=>s.value.deceased.relative_name=t),label:"A chhungte hming",outlined:"",dense:"",class:"q-mb-md"},null,8,["modelValue"]),a(u,{type:"date",modelValue:s.value.deceased.dob,"onUpdate:modelValue":e[5]||(e[5]=t=>s.value.deceased.dob=t),label:"Mitthi Pianni leh thla",outlined:"",dense:"",class:"q-mb-md"},null,8,["modelValue"]),a(w,{modelValue:s.value.deceased.district.name,"onUpdate:modelValue":e[6]||(e[6]=t=>s.value.deceased.district.name=t),options:(l=b.dropdowns)==null?void 0:l.districts,"option-label":"name","option-value":"id",label:"District",outlined:"",dense:"",class:"q-mb-md"},null,8,["modelValue","options"]),a(u,{modelValue:s.value.deceased.locality,"onUpdate:modelValue":e[7]||(e[7]=t=>s.value.deceased.locality=t),label:"Locality",outlined:"",dense:"",class:"q-mb-md"},null,8,["modelValue"]),a(w,{modelValue:s.value.deceased.constituency,"onUpdate:modelValue":e[8]||(e[8]=t=>s.value.deceased.constituency=t),options:b.dropdowns.constituencies,"option-label":"name","option-value":"id",label:"Constituency",outlined:"",dense:"",class:"q-mb-md"},null,8,["modelValue","options"]),a(u,{type:"datetime-local",modelValue:s.value.deceased.time_of_death,"onUpdate:modelValue":e[9]||(e[9]=t=>s.value.deceased.time_of_death=t),label:"Thih ni leh darkar",outlined:"",dense:"",class:"q-mb-md"},null,8,["modelValue"]),a(u,{modelValue:s.value.deceased.place_of_death,"onUpdate:modelValue":e[10]||(e[10]=t=>s.value.deceased.place_of_death=t),label:"Thihna hmun",outlined:"",dense:"",class:"q-mb-md"},null,8,["modelValue"])])):v("",!0),m.value===2?(i(),f("div",Ne,[e[40]||(e[40]=o("p",{class:"text-center w-[242px] h-[17px] flex-shrink-0 rounded-[20px] bg-[#E9E9E9] mb-8"}," Ruang Phurh leh Motor Chungchang ",-1)),a(w,{modelValue:s.value.transport.source_district,"onUpdate:modelValue":e[11]||(e[11]=t=>s.value.transport.source_district=t),options:b.dropdowns.districts,"option-label":"name","option-value":"id",label:"Ruang phurh tanna tur District awmna",outlined:"",dense:"",class:"q-mb-md"},null,8,["modelValue","options"]),a(u,{ref:"sourceInput",modelValue:s.value.transport.source_locality,"onUpdate:modelValue":e[12]||(e[12]=t=>s.value.transport.source_locality=t),label:"Source Locality",outlined:"",dense:""},null,8,["modelValue"]),a(w,{modelValue:s.value.transport.destination_district,"onUpdate:modelValue":e[13]||(e[13]=t=>s.value.transport.destination_district=t),options:b.dropdowns.districts,"option-label":"name","option-value":"id",label:"Ruang zalhna tur District awmna",outlined:"",dense:"",class:"q-mb-md"},null,8,["modelValue","options"]),a(u,{ref:"destinationInput",modelValue:s.value.transport.destination_locality,"onUpdate:modelValue":e[14]||(e[14]=t=>s.value.transport.destination_locality=t),label:"Destination Locality",outlined:"",dense:""},null,8,["modelValue"]),o("div",Se,[a(X,{transport:s.value.transport,"onUpdate:sourceLocality":e[15]||(e[15]=t=>s.value.transport.source_locality=t),"onUpdate:destinationLocality":e[16]||(e[16]=t=>s.value.transport.destination_locality=t),"onUpdate:distance":e[17]||(e[17]=t=>s.value.transport.distance=t),"onUpdate:transportCost":e[18]||(e[18]=t=>s.value.transport.transport_cost=t),onMapsLoaded:n.initAutocomplete},null,8,["transport","onMapsLoaded"])]),a(u,{modelValue:s.value.transport.distance,"onUpdate:modelValue":e[19]||(e[19]=t=>s.value.transport.distance=t),label:"Distance (Km)",outlined:"",dense:"",class:"q-mb-md pt-[400px]"},null,8,["modelValue"]),a(u,{modelValue:s.value.transport.transport_cost,"onUpdate:modelValue":e[20]||(e[20]=t=>s.value.transport.transport_cost=t),label:"Transport Cost",outlined:"",dense:"",class:"q-mb-md"},null,8,["modelValue"]),a(u,{modelValue:s.value.transport.vehicle_number,"onUpdate:modelValue":e[21]||(e[21]=t=>s.value.transport.vehicle_number=t),label:"Vehicle Number",outlined:"",dense:"",class:"q-mb-md"},null,8,["modelValue"]),a(u,{modelValue:s.value.transport.driver_name,"onUpdate:modelValue":e[22]||(e[22]=t=>s.value.transport.driver_name=t),label:"Driver Name",outlined:"",dense:"",class:"q-mb-md"},null,8,["modelValue"]),a(u,{modelValue:s.value.transport.driver_phone,"onUpdate:modelValue":e[23]||(e[23]=t=>s.value.transport.driver_phone=t),label:"Driver Phone",outlined:"",dense:"",class:"q-mb-md"},null,8,["modelValue"])])):v("",!0),m.value===3?(i(),f("div",Te,[a(u,{modelValue:s.value.applicant.name,"onUpdate:modelValue":e[24]||(e[24]=t=>s.value.applicant.name=t),label:"Applicant Name",outlined:"",dense:"",class:"q-mb-md"},null,8,["modelValue"]),a(u,{modelValue:s.value.applicant.mobile,"onUpdate:modelValue":e[25]||(e[25]=t=>s.value.applicant.mobile=t),label:"Mobile",outlined:"",dense:"",class:"q-mb-md"},null,8,["modelValue"]),a(w,{modelValue:s.value.applicant.district.name,"onUpdate:modelValue":e[26]||(e[26]=t=>s.value.applicant.district.name=t),options:b.dropdowns.districts,"option-label":"name","option-value":"id",label:"Ruang phurhna man diltu district",outlined:"",dense:"",class:"q-mb-md"},null,8,["modelValue","options"]),a(u,{modelValue:s.value.applicant.locality,"onUpdate:modelValue":e[27]||(e[27]=t=>s.value.applicant.locality=t),label:"Ruang phurhna man diltu veng/khua",outlined:"",dense:"",class:"q-mb-md"},null,8,["modelValue"]),a(u,{modelValue:s.value.applicant.bank_name,"onUpdate:modelValue":e[28]||(e[28]=t=>s.value.applicant.bank_name=t),label:"Bank hming",outlined:"",dense:"",class:"q-mb-md"},null,8,["modelValue"]),a(u,{modelValue:s.value.applicant.account_no,"onUpdate:modelValue":e[29]||(e[29]=t=>s.value.applicant.account_no=t),label:"Account No",outlined:"",dense:"",class:"q-mb-md"},null,8,["modelValue"]),a(u,{modelValue:s.value.applicant.ifsc_code,"onUpdate:modelValue":e[30]||(e[30]=t=>s.value.applicant.ifsc_code=t),label:"IFSC Code",outlined:"",dense:"",class:"q-mb-md"},null,8,["modelValue"])])):v("",!0),a(Y,{align:"right"},{default:d(()=>[K(a(g,{class:"text-black",color:"white",label:"Cancel"},null,512),[[J]]),m.value>1?(i(),p(g,{key:0,label:"Previous",color:"grey",onClick:ae})):v("",!0),m.value<3?(i(),p(g,{key:1,label:"Next",color:"black",onClick:se})):v("",!0),m.value===3?(i(),p(g,{key:2,label:"Submit",color:"black",type:"submit"})):v("",!0)]),_:1})]}),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),a(G,{modelValue:n.mapDialog,"onUpdate:modelValue":e[32]||(e[32]=l=>n.mapDialog=l),maximized:""},{default:d(()=>[a(z,null,{default:d(()=>{var l;return[a(H,null,{default:d(()=>e[41]||(e[41]=[o("div",{class:"text-h6"},"Transport Route Map",-1)])),_:1}),o("div",De,[(l=s.value.transport)!=null&&l.source_lat?(i(),p(X,{key:0,transport:s.value.transport,onRouteError:n.handleRouteError,class:"h-full",style:{height:"100%",width:"100%"}},null,8,["transport","onRouteError"])):(i(),f("div",Fe," No location data available "))]),a(Y,{align:"right"},{default:d(()=>[K(a(g,{flat:"",label:"Close",color:"primary"},null,512),[[J]])]),_:1})]}),_:1})]),_:1},8,["modelValue"])]),_:1}))}});export{Ke as default};
