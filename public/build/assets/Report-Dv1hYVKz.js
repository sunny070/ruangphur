import{Q as F}from"./QPage-BnL5U6Tp.js";import{W as _,c as h,a as l,b as k,w as A,f as t,q as D,l as i,X as m,g as a,h as u,t as d,F as c,B as f,n as S,N as C}from"./app-BU-P0o3a.js";import{_ as B}from"./AdminLayout-B373Zi-z.js";import"./QLayout-CjzmvHMW.js";import"./format-B28FXeBv.js";import"./QMenu--S8s1Z2H.js";import"./QExpansionItem-BfALLecq.js";import"./ClosePopup-D9M7YmMK.js";const U={class:"p-6"},V={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},N=["value"],R=["value"],j=["value"],E={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},P={class:"bg-white rounded-lg shadow overflow-hidden"},L={class:"min-w-full divide-y divide-gray-200"},M={class:"bg-white divide-y divide-gray-200"},O={class:"px-6 py-4 whitespace-nowrap"},q={class:"px-6 py-4 whitespace-nowrap"},Q={class:"px-6 py-4 whitespace-nowrap"},T={class:"px-6 py-4 whitespace-nowrap"},$={class:"px-6 py-4 whitespace-nowrap"},z={class:"px-6 py-4 whitespace-nowrap"},G={class:"px-6 py-4 whitespace-nowrap"},W={class:"px-6 py-4 whitespace-nowrap"},et=Object.assign({layout:B},{__name:"Report",props:{applications:Array,filters:Object,dropdowns:Object},setup(p){const r=p,o=_({status:r.filters.status||"",district_id:r.filters.district_id||"",constituency_id:r.filters.constituency_id||"",start_date:r.filters.start_date||"",end_date:r.filters.end_date||""}),g=h(()=>o.district_id?r.dropdowns.constituencies.filter(n=>n.district_id==o.district_id):r.dropdowns.constituencies),b=()=>{C.get("/admin/report",o)},w=()=>{const n=new URLSearchParams(o).toString();window.location.href=`/admin/report/export?${n}`},v=n=>({Pending:"bg-yellow-100 text-yellow-800",Approved:"bg-green-100 text-green-800",Rejected:"bg-red-100 text-red-800",Processed:"bg-blue-100 text-blue-800"})[n]||"bg-gray-100 text-gray-800";return(n,e)=>(l(),k(F,null,{default:A(()=>[t("div",U,[e[15]||(e[15]=t("h1",{class:"text-2xl font-bold mb-6"},"Generate Report",-1)),t("form",{onSubmit:D(b,["prevent"]),class:"mb-6 space-y-4 bg-white p-4 rounded-lg shadow"},[t("div",V,[t("div",null,[e[6]||(e[6]=t("label",{class:"block text-sm font-medium text-gray-700"},"Status",-1)),i(t("select",{"onUpdate:modelValue":e[0]||(e[0]=s=>o.status=s),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm"},[e[5]||(e[5]=t("option",{value:""},"All Statuses",-1)),(l(!0),a(c,null,u(p.dropdowns.statuses,s=>(l(),a("option",{key:s,value:s},d(s),9,N))),128))],512),[[m,o.status]])]),t("div",null,[e[8]||(e[8]=t("label",{class:"block text-sm font-medium text-gray-700"},"Applicant District",-1)),i(t("select",{"onUpdate:modelValue":e[1]||(e[1]=s=>o.district_id=s),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm"},[e[7]||(e[7]=t("option",{value:""},"All Districts",-1)),(l(!0),a(c,null,u(p.dropdowns.districts,s=>(l(),a("option",{key:s.id,value:s.id},d(s.name),9,R))),128))],512),[[m,o.district_id]])]),t("div",null,[e[10]||(e[10]=t("label",{class:"block text-sm font-medium text-gray-700"},"Deceased Constituency",-1)),i(t("select",{"onUpdate:modelValue":e[2]||(e[2]=s=>o.constituency_id=s),class:"..."},[e[9]||(e[9]=t("option",{value:""},"All Constituencies",-1)),(l(!0),a(c,null,u(g.value,s=>(l(),a("option",{key:s.id,value:s.id},d(s.name),9,j))),128))],512),[[m,o.constituency_id]])])]),t("div",E,[t("div",null,[e[11]||(e[11]=t("label",{class:"block text-sm font-medium text-gray-700"},"Start Date",-1)),i(t("input",{type:"date","onUpdate:modelValue":e[3]||(e[3]=s=>o.start_date=s),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm"},null,512),[[f,o.start_date]])]),t("div",null,[e[12]||(e[12]=t("label",{class:"block text-sm font-medium text-gray-700"},"End Date",-1)),i(t("input",{type:"date","onUpdate:modelValue":e[4]||(e[4]=s=>o.end_date=s),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm"},null,512),[[f,o.end_date]])])]),t("div",{class:"flex gap-4"},[e[13]||(e[13]=t("button",{type:"submit",class:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700"}," Apply Filters ",-1)),t("button",{onClick:w,type:"button",class:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700"}," Export to Excel ")])],32),t("div",P,[t("table",L,[e[14]||(e[14]=t("thead",{class:"bg-[#3A424A]"},[t("tr",null,[t("th",{class:"px-6 py-3 text-left text-xs font-medium text-[#FFF] uppercase"},"App No"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-[#FFF] uppercase"},"Status"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-[#FFF] uppercase"},"Applicant"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-[#FFF] uppercase"},"District"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-[#FFF] uppercase"},"Deceased"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-[#FFF] uppercase"},"Constituency "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-[#FFF] uppercase"},"Transport Cost "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-[#FFF] uppercase"},"Date")])],-1)),t("tbody",M,[(l(!0),a(c,null,u(p.applications,s=>{var x,y;return l(),a("tr",{key:s.id},[t("td",O,d(s.application_no),1),t("td",q,[t("span",{class:S([v(s.status),"px-2 py-1 rounded-full text-sm"])},d(s.status),3)]),t("td",Q,d(s.applicant.name),1),t("td",T,d(s.applicant.district.name),1),t("td",$,d(s.deceased.name),1),t("td",z,d(((x=s.deceased.constituency)==null?void 0:x.name)||"N/A"),1),t("td",G,d(((y=s.transport)==null?void 0:y.transport_cost)||0),1),t("td",W,d(new Date(s.created_at).toLocaleDateString()),1)])}),128))])])])])]),_:1}))}});export{et as default};
