import{r as f,o as A,a,g as n,f as t,l as i,X as y,F as d,h as p,B as b,b_ as _,t as r}from"./app-BU-P0o3a.js";import{d as g}from"./index-BP8DSHYw.js";import{_ as k}from"./AdminLayout-B373Zi-z.js";import{_ as D}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./index-BWiuKILY.js";import"./QLayout-CjzmvHMW.js";import"./format-B28FXeBv.js";import"./QMenu--S8s1Z2H.js";import"./QExpansionItem-BfALLecq.js";import"./ClosePopup-D9M7YmMK.js";const E={class:"filters"},w=["value"],F=["value"],S=Object.assign({layout:k},{__name:"Report",props:{dropdowns:Object,initialFilters:Object,initialApplications:Array},setup(u){const m=u,o=f({...m.initialFilters}),v=f([...m.initialApplications]),c=async()=>{try{const s=await _.get("/verifier/report",{params:o.value});v.value=s.data.applications}catch(s){console.error("Error fetching applications:",s)}},x=()=>{g.Inertia.get("/verifier/export",o.value,{responseType:"blob"})};return A(()=>{c()}),(s,l)=>(a(),n("div",null,[l[7]||(l[7]=t("h1",null,"User Report",-1)),t("div",E,[i(t("select",{"onUpdate:modelValue":l[0]||(l[0]=e=>o.value.status=e)},[l[4]||(l[4]=t("option",{value:""},"All Statuses",-1)),(a(!0),n(d,null,p(u.dropdowns.statuses,e=>(a(),n("option",{key:e,value:e},r(e),9,w))),128))],512),[[y,o.value.status]]),i(t("select",{"onUpdate:modelValue":l[1]||(l[1]=e=>o.value.constituency_id=e)},[l[5]||(l[5]=t("option",{value:""},"All Constituencies",-1)),(a(!0),n(d,null,p(u.dropdowns.constituencies,e=>(a(),n("option",{key:e.id,value:e.id},r(e.name),9,F))),128))],512),[[y,o.value.constituency_id]]),i(t("input",{type:"date","onUpdate:modelValue":l[2]||(l[2]=e=>o.value.start_date=e),placeholder:"Start Date"},null,512),[[b,o.value.start_date]]),i(t("input",{type:"date","onUpdate:modelValue":l[3]||(l[3]=e=>o.value.end_date=e),placeholder:"End Date"},null,512),[[b,o.value.end_date]]),t("button",{onClick:c},"Apply Filters"),t("button",{onClick:x},"Export to Excel")]),t("table",null,[l[6]||(l[6]=t("thead",null,[t("tr",null,[t("th",null,"ID"),t("th",null,"Applicant Name"),t("th",null,"Deceased Name"),t("th",null,"Status"),t("th",null,"Created At")])],-1)),t("tbody",null,[(a(!0),n(d,null,p(v.value,e=>(a(),n("tr",{key:e.id},[t("td",null,r(e.id),1),t("td",null,r(e.applicant.name),1),t("td",null,r(e.deceased.name),1),t("td",null,r(e.status),1),t("td",null,r(e.created_at),1)]))),128))])])]))}}),h=D(S,[["__scopeId","data-v-c3bc82b8"]]);export{h as default};
