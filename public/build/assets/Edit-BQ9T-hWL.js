import{T as C,c as q,o as F,a as I,b as m,g as t,j as l,k as N,u as o,l as i,B as M,y as T,Q as P}from"./app-DE0G_PcF.js";import{Q as $}from"./QSelect-BwW1F_A4.js";import{Q as Z}from"./QForm-anwn_oRH.js";import{Q as L}from"./QPage-5AzggwAy.js";import{u as G}from"./use-quasar-B8sTEX2r.js";import{_ as H}from"./AdminLayout-CzjlYrQF.js";import{d as J}from"./index-DZUdbsN3.js";import"./QChip-CiUjFxzV.js";import"./format--TUUW8L8.js";import"./QMenu-D_oUq42q.js";import"./rtl-DFPa-2ov.js";import"./QLayout-CVDZaGjc.js";import"./QExpansionItem-CbgYRtL_.js";import"./ClosePopup-zl1a1MWy.js";import"./index-CsHs7x3s.js";const K={class:"flex justify-between items-center order-1 md:order-none"},W={class:"row q-col-gutter-sm"},X={class:"col-xs-12 col-sm-6"},Y={class:"col-xs-12 col-sm-6"},ee={class:"col-xs-12 col-sm-6"},oe={class:"col-xs-12 col-sm-6"},se={class:"col-xs-12 col-sm-6"},re={class:"col-xs-12 col-sm-6"},le={class:"col-xs-12 col-sm-6"},te={class:"col-xs-12 col-sm-6"},ae={class:"col-xs-12"},ke=Object.assign({layout:H},{__name:"Edit",props:{data:Object,roles:Object,districts:Array},setup(j){var p,c,g,f,b,w;const d=G(),n=j,e=C({name:(p=n.data)==null?void 0:p.name,phone:(c=n.data)==null?void 0:c.phone,email:(g=n.data)==null?void 0:g.email,roles:((f=n.data)==null?void 0:f.roles.map(a=>a.id))||[],districts:((b=n.data)==null?void 0:b.districts.map(a=>a.id))||[],designation:(w=n.data)==null?void 0:w.designation,password:"",password_confirmation:""}),z=q(()=>n.districts.map(a=>({id:a.id,name:a.name}))),u=q(()=>n.roles.map(a=>({id:a.id,name:a.name})));console.log(u.value);const A=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,E=a=>D(),D=()=>{e.name="",e.mobile="",e.email="",e.designation="",e.password="",e.roles=[],e.password_confirmation=""},R=()=>{e.put(route("user.update",n.data.id),{onStart:()=>{d.loading.show()},onSuccess:()=>{d.notify({type:"positive",message:"User updated successfully!"}),e.reset()},onError:()=>{d.notify({type:"negative",message:"There was an error updating the user."})},onFinish:()=>{d.loading.hide()}})};return(a,s)=>(F(),I(L,{padding:""},{default:m(()=>[t("div",K,[l(o(J.Link),{href:a.route("user.index"),size:"sm",flat:"",outlined:"",class:"flex items-center justify-center"},{default:m(()=>[l(N,{name:"arrow_back",size:"16px",class:"q-mr-xs"}),s[14]||(s[14]=t("span",null,"Back",-1))]),_:1},8,["href"]),s[15]||(s[15]=t("h5",null,"Edit District User",-1))]),l(Z,{class:"zcard q-pa-md",onReset:E,onSubmit:R},{default:m(()=>{var y,v,x,V,k,h,Q,B,S,U,O,_;return[t("div",W,[t("div",X,[l(i,{color:"black",modelValue:o(e).name,"onUpdate:modelValue":s[0]||(s[0]=r=>o(e).name=r),class:"my-input",dense:"",label:"Name",outlined:"",error:o(e).errors.hasOwnProperty("name"),"error-message":(v=(y=o(e).errors)==null?void 0:y.name)==null?void 0:v.toString(),onBlur:s[1]||(s[1]=r=>delete o(e).errors.name),rules:[r=>!!r||"Username is required"]},null,8,["modelValue","error","error-message","rules"])]),t("div",Y,[l(i,{color:"black",modelValue:o(e).phone,"onUpdate:modelValue":s[2]||(s[2]=r=>o(e).phone=r),class:"my-input",mask:"##########",dense:"",label:"Mobile",outlined:"",error:o(e).errors.hasOwnProperty("phone"),"error-message":(V=(x=o(e).errors)==null?void 0:x.phone)==null?void 0:V.toString(),onBlur:s[3]||(s[3]=r=>delete o(e).errors.phone),rules:[r=>r.length===10||"Mobile is required"]},null,8,["modelValue","error","error-message","rules"])]),t("div",ee,[l(i,{color:"black",modelValue:o(e).email,"onUpdate:modelValue":s[4]||(s[4]=r=>o(e).email=r),class:"my-input",dense:"",label:"Email",outlined:"",error:o(e).errors.hasOwnProperty("email"),"error-message":(h=(k=o(e).errors)==null?void 0:k.email)==null?void 0:h.toString(),onBlur:s[5]||(s[5]=r=>delete o(e).errors.email),rules:[r=>A.test(r)||"Invalid email"]},null,8,["modelValue","error","error-message","rules"])]),t("div",oe,[l($,{color:"black",outlined:"",dense:"",modelValue:o(e).districts,"onUpdate:modelValue":s[6]||(s[6]=r=>o(e).districts=r),multiple:"","use-chips":"",options:z.value,"option-value":"id","option-label":"name","emit-value":"","map-options":"",label:"Assign Districts"},null,8,["modelValue","options"])]),t("div",se,[l($,{color:"black",outlined:"",dense:"",modelValue:o(e).roles,"onUpdate:modelValue":s[7]||(s[7]=r=>o(e).roles=r),multiple:"","use-chips":"",options:u.value,"option-value":"id","option-label":"name","emit-value":"","map-options":"",label:"Roles"},null,8,["modelValue","options"])]),t("div",re,[l(i,{color:"black",modelValue:o(e).designation,"onUpdate:modelValue":s[8]||(s[8]=r=>o(e).designation=r),class:"my-input",dense:"",label:"Designation",outlined:"",error:o(e).errors.hasOwnProperty("designation"),"error-message":(B=(Q=o(e).errors)==null?void 0:Q.designation)==null?void 0:B.toString(),onBlur:s[9]||(s[9]=r=>delete o(e).errors.designation),rules:[r=>!!r||"Designation is required"]},null,8,["modelValue","error","error-message","rules"])]),t("div",le,[l(i,{color:"black",modelValue:o(e).password,"onUpdate:modelValue":s[10]||(s[10]=r=>o(e).password=r),type:"password",class:"my-input",dense:"",label:"Password",outlined:"",error:o(e).errors.hasOwnProperty("password"),"error-message":(U=(S=o(e).errors)==null?void 0:S.password)==null?void 0:U.toString(),onBlur:s[11]||(s[11]=r=>delete o(e).errors.password)},null,8,["modelValue","error","error-message"])]),t("div",te,[l(i,{color:"black",modelValue:o(e).password_confirmation,"onUpdate:modelValue":s[12]||(s[12]=r=>o(e).password_confirmation=r),type:"password",class:"my-input",dense:"",label:"Confirm Password",outlined:"",error:o(e).errors.hasOwnProperty("password_confirmation"),"error-message":(_=(O=o(e).errors)==null?void 0:O.password_confirmation)==null?void 0:_.toString(),onBlur:s[13]||(s[13]=r=>delete o(e).errors.password_confirmation)},null,8,["modelValue","error","error-message"])])]),t("div",ae,[l(M,{class:"q-my-md"})]),l(T,{class:"q-mt-md"},{default:m(()=>[l(P,{style:{color:"#fff",width:"144px",height:"40px","flex-shrink":"0","border-radius":"8px",border:"1px solid #5b656f",background:"#000"},flat:"",type:"submit",label:"Update"}),l(P,{style:{color:"#000",width:"144px",height:"40px","flex-shrink":"0","border-radius":"8px",border:"1px solid #5b656f",background:"transparent"},color:"negative",flat:"",type:"reset",label:"Reset"})]),_:1})]}),_:1})]),_:1}))}});export{ke as default};
