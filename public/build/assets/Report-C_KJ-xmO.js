import{Q as h}from"./QPage-D6NK3abj.js";import{r as g,o as _,a,f as k,g as A,bY as D,b as t,q as S,v as i,I as y,c as d,j as p,F as u,B as f,t as o,n as C}from"./app-DGLM-g85.js";import{d as B}from"./index-DhHpY45-.js";import{_ as E}from"./AdminLayout-B9nLlYqr.js";import"./index-CO-NgvQT.js";import"./QLayout-BaQxdw5U.js";import"./format-DzI8yonQ.js";import"./QMenu-nYMXc-S9.js";import"./QExpansionItem-DT2TqZwa.js";import"./ClosePopup-DLKAVyim.js";const V={class:"p-6"},j={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},F=["value"],U=["value"],M={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},R={class:"bg-white rounded-lg overflow-x-auto table-responsive"},q={class:"q-table q-table__grid w-full"},I={class:"bg-white divide-y divide-gray-200"},O={class:"px-6 py-4 whitespace-nowrap"},L={class:"px-6 py-4 whitespace-nowrap"},N={class:"px-6 py-4 whitespace-nowrap"},P={class:"px-6 py-4 whitespace-nowrap"},Q={class:"px-6 py-4 whitespace-nowrap"},T={class:"px-6 py-4 whitespace-nowrap"},tt=Object.assign({layout:E},{__name:"Report",props:{dropdowns:Object,initialFilters:Object,initialApplications:{type:Array,default:()=>[]}},setup(n){const m=n,l=g({...m.initialFilters}),c=g([...m.initialApplications]),x=async()=>{try{const r=await D.get("/verifier/report",{params:l.value});c.value=r.data.applications}catch(r){console.error("Error fetching applications:",r)}},v=()=>{B.Inertia.get("/verifier/export",l.value,{responseType:"blob"})},w=r=>({Pending:"bg-yellow-100 text-yellow-800",Verified:"bg-green-100 text-green-800",Rejected:"bg-red-100 text-red-800"})[r]||"bg-gray-100 text-gray-800";return _(()=>{x()}),(r,e)=>(a(),k(h,null,{default:A(()=>[t("div",V,[e[12]||(e[12]=t("h1",{class:"text-2xl font-bold mb-6"},"User Report",-1)),t("form",{onSubmit:S(x,["prevent"]),class:"mb-6 space-y-4 bg-white p-4 rounded-lg shadow"},[t("div",j,[t("div",null,[e[5]||(e[5]=t("label",{class:"block text-sm font-medium text-gray-700"},"Status",-1)),i(t("select",{"onUpdate:modelValue":e[0]||(e[0]=s=>l.value.status=s),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm"},[e[4]||(e[4]=t("option",{value:""},"All Statuses",-1)),(a(!0),d(u,null,p(n.dropdowns.statuses,s=>(a(),d("option",{key:s,value:s},o(s),9,F))),128))],512),[[y,l.value.status]])]),t("div",null,[e[7]||(e[7]=t("label",{class:"block text-sm font-medium text-gray-700"},"Constituency",-1)),i(t("select",{"onUpdate:modelValue":e[1]||(e[1]=s=>l.value.constituency_id=s),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm"},[e[6]||(e[6]=t("option",{value:""},"All Constituencies",-1)),(a(!0),d(u,null,p(n.dropdowns.constituencies,s=>(a(),d("option",{key:s.id,value:s.id},o(s.name),9,U))),128))],512),[[y,l.value.constituency_id]])])]),t("div",M,[t("div",null,[e[8]||(e[8]=t("label",{class:"block text-sm font-medium text-gray-700"},"Start Date",-1)),i(t("input",{type:"date","onUpdate:modelValue":e[2]||(e[2]=s=>l.value.start_date=s),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm"},null,512),[[f,l.value.start_date]])]),t("div",null,[e[9]||(e[9]=t("label",{class:"block text-sm font-medium text-gray-700"},"End Date",-1)),i(t("input",{type:"date","onUpdate:modelValue":e[3]||(e[3]=s=>l.value.end_date=s),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm"},null,512),[[f,l.value.end_date]])])]),t("div",{class:"flex gap-4"},[e[10]||(e[10]=t("button",{type:"submit",class:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700"}," Apply Filters ",-1)),t("button",{onClick:v,type:"button",class:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700"}," Export to Excel ")])],32),t("div",R,[t("table",q,[e[11]||(e[11]=t("thead",null,[t("tr",{class:"bg-[#3A424A] text-white"},[t("th",{class:"px-6 py-3 text-left text-xs font-medium uppercase"},"ID"),t("th",{class:"px-6 py-3 text-left text-xs font-medium uppercase"},"Status"),t("th",{class:"px-6 py-3 text-left text-xs font-medium uppercase"},"Applicant"),t("th",{class:"px-6 py-3 text-left text-xs font-medium uppercase"},"District"),t("th",{class:"px-6 py-3 text-left text-xs font-medium uppercase"},"Deceased"),t("th",{class:"px-6 py-3 text-left text-xs font-medium uppercase"},"Created At")])],-1)),t("tbody",I,[(a(!0),d(u,null,p(c.value,s=>{var b;return a(),d("tr",{key:s.id},[t("td",O,o(s.id),1),t("td",L,[t("span",{class:C([w(s.status),"px-2 py-1 rounded-full text-sm"])},o(s.status),3)]),t("td",N,o(s.applicant.name),1),t("td",P,o(((b=s.applicant.district)==null?void 0:b.name)||"N/A"),1),t("td",Q,o(s.deceased.name),1),t("td",T,o(new Date(s.created_at).toLocaleDateString()),1)])}),128))])])])])]),_:1}))}});export{tt as default};
