import{r as u,A as E,a as f,b as N,w as a,d as e,u as U,g as l,Q as m,k as c,j as b,h as v,i as T,F as $,l as j,m as h,p as B,s as q,N as _,t as g,f as z,e as x}from"./app-BHeael7A.js";import{Q,a as p}from"./format-CYKmJ8Oj.js";import{Q as L}from"./QLayout-7wX7CmRM.js";import{Q as O}from"./QMenu-aFYmALZq.js";import{Q as P}from"./QPage-DO6UowWf.js";import{u as H}from"./use-quasar-D3GwrXq7.js";import{d as M}from"./index-DUj18aJE.js";import{_ as G}from"./AdminLayout-BPkz0efM.js";import{_ as J}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./QExpansionItem-OPCk_GRv.js";import"./ClosePopup-B8Woq_MJ.js";const K={class:"bg-white p-4 rounded-lg flex justify-between"},R={class:"responsive-table"},W={class:"q-table w-full rounded-lg"},X={class:"p-2"},Y={class:"p-2"},Z={class:"p-2"},ee={class:"p-2"},te=["href"],le={class:"p-2 border text-center relative"},ae=Object.assign({layout:G},{__name:"Index",props:{informations:Array,filters:Object},setup(y){const r=H(),k=y,i=u(!1),n=u({id:null,title:"",sub_title:"",file:null}),V=u(null),d=u(k.filters.search||"");E(d,o=>{_.get(route("admin.info.index"),{search:o},{preserveState:!0})});const C=()=>{d.value=""},I=o=>{n.value={...o,file:null},i.value=!0},w=o=>{n.value.file=o.target.files[0]},S=()=>{const o=new FormData;o.append("_method","PUT"),o.append("title",n.value.title),o.append("sub_title",n.value.sub_title),n.value.file&&o.append("file",n.value.file),_.post(route("admin.info.update",n.value.id),o,{onSuccess:()=>{i.value=!1,r.notify({type:"positive",message:"Information updated successfully"})},onError:t=>{r.notify({type:"negative",message:"Failed to update information"})}})},A=o=>{confirm("Are you sure you want to delete this file?")&&_.delete(route("admin.info.destroy",o),{onSuccess:()=>{r.notify({type:"positive",message:"File deleted successfully"})},onError:()=>{r.notify({type:"negative",message:"Failed to delete file"})}})};return(o,t)=>(f(),N(P,{padding:""},{default:a(()=>[e(U(M.Head),{title:"Information"}),l("div",K,[e(c,{size:"sm",flat:"",outlined:"",class:"q-btn-custom flex items-center justify-center",style:{color:"#fff",width:"100px",height:"40px","border-radius":"8px",background:"#3a424a"},href:o.route("admin.info.create")},{default:a(()=>[e(m,{name:"create",size:"16px",class:"q-mr-xs"}),t[5]||(t[5]=l("span",null,"Create",-1))]),_:1},8,["href"]),e(b,{color:"dark",modelValue:d.value,"onUpdate:modelValue":t[0]||(t[0]=s=>d.value=s),autofocus:"",outlined:"",dense:"","bg-color":"white",placeholder:"Search information...",clearable:"",onClear:C},{append:a(()=>[e(m,{name:"search"})]),_:1},8,["modelValue"])]),l("div",R,[l("table",W,[t[8]||(t[8]=l("thead",null,[l("tr",{class:"bg-[#3A424A] text-white"},[l("th",{class:"border p-2"},"Sl No."),l("th",{class:"border p-2"},"Title"),l("th",{class:"border p-2"},"Sub Title"),l("th",{class:"border p-2"},"Attachment"),l("th",{class:"border p-2"},"Actions")])],-1)),l("tbody",null,[(f(!0),v($,null,T(y.informations,(s,F)=>(f(),v("tr",{key:s.id,class:"border"},[l("td",X,g(F+1),1),l("td",Y,g(s.title),1),l("td",Z,g(s.sub_title),1),l("td",ee,[s.attachment?(f(),v("a",{key:0,href:`/storage/${s.attachment}`,target:"_blank",class:"text-blue-600"},"View",8,te)):z("",!0)]),l("td",le,[e(c,{flat:"",dense:"",round:"",icon:"more_vert"},{default:a(()=>[e(O,null,{default:a(()=>[e(L,null,{default:a(()=>[e(Q,{clickable:"",onClick:D=>I(s)},{default:a(()=>[e(p,{avatar:""},{default:a(()=>[e(m,{name:"edit",size:"sm"})]),_:1}),e(p,null,{default:a(()=>t[6]||(t[6]=[x("Edit")])),_:1})]),_:2},1032,["onClick"]),e(Q,{clickable:"",class:"text-red-500",onClick:D=>A(s.id)},{default:a(()=>[e(p,{avatar:""},{default:a(()=>[e(m,{name:"delete",size:"sm"})]),_:1}),e(p,null,{default:a(()=>t[7]||(t[7]=[x("Delete")])),_:1})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)])]))),128))])]),e(q,{modelValue:i.value,"onUpdate:modelValue":t[4]||(t[4]=s=>i.value=s)},{default:a(()=>[e(j,{class:"p-4"},{default:a(()=>[e(h,null,{default:a(()=>t[9]||(t[9]=[l("h2",{class:"text-lg font-bold"},"Edit Information",-1)])),_:1}),e(h,null,{default:a(()=>[e(b,{modelValue:n.value.title,"onUpdate:modelValue":t[1]||(t[1]=s=>n.value.title=s),label:"Title",outlined:""},null,8,["modelValue"]),e(b,{modelValue:n.value.sub_title,"onUpdate:modelValue":t[2]||(t[2]=s=>n.value.sub_title=s),label:"Sub Title",outlined:"",class:"mt-2"},null,8,["modelValue"]),l("input",{type:"file",onChange:w,ref_key:"fileInput",ref:V,class:"mt-2"},null,544)]),_:1}),e(B,{align:"right"},{default:a(()=>[e(c,{flat:"",label:"Cancel",color:"negative",onClick:t[3]||(t[3]=s=>i.value=!1)}),e(c,{label:"Update",color:"primary",onClick:S})]),_:1})]),_:1})]),_:1},8,["modelValue"])])]),_:1}))}}),be=J(ae,[["__scopeId","data-v-2f22cf35"]]);export{be as default};
