import{Q as j}from"./QSpace-Cq3AY6tj.js";import{Q as q,a as z}from"./QBreadcrumbs-BBABYJhi.js";import{T as A,c as C,a as F,b as N,w as d,f as a,i as l,k as i,u as r,as as I,q as M,Q as P}from"./app-DY6z9ZO-.js";import{Q as T}from"./QSelect-D89BJ1_7.js";import{Q as Z}from"./QForm-oFHFc731.js";import{Q as D}from"./QPage-DYn21bSD.js";import{u as G}from"./use-quasar-Cs1LdNF0.js";import{_ as H}from"./AdminLayout-5KNea1XO.js";import"./QChip-ZnDgJwmd.js";import"./format-DPtYjOdv.js";import"./QMenu-DDLCkg3R.js";import"./rtl-DFPa-2ov.js";import"./QLayout-DkfsYSgK.js";import"./DropdownLink-D2MymX6x.js";const J={class:"flex flex-inline items-center"},K={class:"row q-col-gutter-sm"},L={class:"col-xs-12 col-sm-6"},W={class:"col-xs-12 col-sm-6"},X={class:"col-xs-12 col-sm-6"},Y={class:"col-xs-12 col-sm-6"},ee={class:"col-xs-12 col-sm-6"},re={class:"col-xs-12 col-sm-6"},se={class:"col-xs-12"},ye=Object.assign({layout:H},{__name:"Edit",props:{data:Object,roles:Object},setup(h){var p,c,g,f;const m=G(),t=h,e=A({name:(p=t.data)==null?void 0:p.name,phone:(c=t.data)==null?void 0:c.phone,email:(g=t.data)==null?void 0:g.email,roles:((f=t.data)==null?void 0:f.roles.map(n=>n.name))||[],password:"",password_confirmation:""}),u=C(()=>t.roles.map(n=>({id:n.id,name:n.name})));console.log(u.value);const $=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,E=n=>k(),k=()=>{e.name="",e.mobile="",e.email="",e.password="",e.roles=[],e.password_confirmation=""},R=()=>{e.put(route("user.update",t.data.id),{onStart:()=>{m.loading.show()},onSuccess:()=>{m.notify({type:"positive",message:"User updated successfully!"}),e.reset()},onError:()=>{m.notify({type:"negative",message:"There was an error updating the user."})},onFinish:()=>{m.loading.hide()}})};return(n,s)=>(F(),N(D,{padding:""},{default:d(()=>[a("div",J,[s[12]||(s[12]=a("p",{class:"page-title"},"Edit User",-1)),l(j),l(z,{align:"right",gutter:"xs"},{default:d(()=>[l(q,{to:{name:"user:read"},label:"Users"}),l(q,{label:"Edit User"})]),_:1})]),l(Z,{class:"zcard q-pa-md",onReset:E,onSubmit:R},{default:d(()=>{var w,y,b,v,V,Q,x,S,B,_,U,O;return[a("div",K,[a("div",L,[l(i,{modelValue:r(e).name,"onUpdate:modelValue":s[0]||(s[0]=o=>r(e).name=o),class:"my-input",dense:"",label:"Name",outlined:"",error:r(e).errors.hasOwnProperty("name"),"error-message":(y=(w=r(e).errors)==null?void 0:w.name)==null?void 0:y.toString(),onBlur:s[1]||(s[1]=o=>delete r(e).errors.name),rules:[o=>!!o||"Username is required"]},null,8,["modelValue","error","error-message","rules"])]),a("div",W,[l(i,{modelValue:r(e).phone,"onUpdate:modelValue":s[2]||(s[2]=o=>r(e).phone=o),class:"my-input",mask:"##########",dense:"",label:"Mobile",outlined:"",error:r(e).errors.hasOwnProperty("phone"),"error-message":(v=(b=r(e).errors)==null?void 0:b.phone)==null?void 0:v.toString(),onBlur:s[3]||(s[3]=o=>delete r(e).errors.phone),rules:[o=>o.length===10||"Mobile is required"]},null,8,["modelValue","error","error-message","rules"])]),a("div",X,[l(i,{modelValue:r(e).email,"onUpdate:modelValue":s[4]||(s[4]=o=>r(e).email=o),class:"my-input",dense:"",label:"Email",outlined:"",error:r(e).errors.hasOwnProperty("email"),"error-message":(Q=(V=r(e).errors)==null?void 0:V.email)==null?void 0:Q.toString(),onBlur:s[5]||(s[5]=o=>delete r(e).errors.email),rules:[o=>$.test(o)||"Invalid email"]},null,8,["modelValue","error","error-message","rules"])]),a("div",Y,[l(T,{modelValue:r(e).roles,"onUpdate:modelValue":s[6]||(s[6]=o=>r(e).roles=o),multiple:"","use-chips":"",options:u.value,dense:"",class:"my-input",label:"Roles",outlined:"","option-value":"id","option-label":"name",error:r(e).errors.hasOwnProperty("roles"),"error-message":(S=(x=r(e).errors)==null?void 0:x.roles)==null?void 0:S.toString(),onBlur:s[7]||(s[7]=o=>delete r(e).errors.roles),rules:[o=>o.length>0||"roles is required"]},null,8,["modelValue","options","error","error-message","rules"])]),a("div",ee,[l(i,{modelValue:r(e).password,"onUpdate:modelValue":s[8]||(s[8]=o=>r(e).password=o),type:"password",class:"my-input",dense:"",label:"Password",outlined:"",error:r(e).errors.hasOwnProperty("password"),"error-message":(_=(B=r(e).errors)==null?void 0:B.password)==null?void 0:_.toString(),onBlur:s[9]||(s[9]=o=>delete r(e).errors.password)},null,8,["modelValue","error","error-message"])]),a("div",re,[l(i,{modelValue:r(e).password_confirmation,"onUpdate:modelValue":s[10]||(s[10]=o=>r(e).password_confirmation=o),type:"password",class:"my-input",dense:"",label:"Confirm Password",outlined:"",error:r(e).errors.hasOwnProperty("password_confirmation"),"error-message":(O=(U=r(e).errors)==null?void 0:U.password_confirmation)==null?void 0:O.toString(),onBlur:s[11]||(s[11]=o=>delete r(e).errors.password_confirmation)},null,8,["modelValue","error","error-message"])])]),a("div",se,[l(I,{class:"q-my-md"})]),l(M,{class:"q-mt-md"},{default:d(()=>[l(P,{color:"primary",flat:"",type:"submit",label:"Save"}),l(P,{color:"negative",flat:"",type:"reset",label:"Reset"})]),_:1})]}),_:1})]),_:1}))}});export{ye as default};
