import{Q as F}from"./QSelect-D89BJ1_7.js";import{r as w,o as N,a as v,g as b,f as e,A as O,l as f,C as h,D as G,d as T,t as i,u as s,T as z,b as H,w as _,i as c,e as y,n as S,Q as R,s as K,m as J,p as W,q as j,E as Y}from"./app-DY6z9ZO-.js";import{Q as Z}from"./QForm-oFHFc731.js";import{Q as X}from"./QPage-DYn21bSD.js";import{Q as ee,a as te}from"./QLayout-DkfsYSgK.js";import{C as oe}from"./ClosePopup-Cdw2F2K5.js";import{_ as se}from"./WebLayout-BJxCXKNF.js";import{u as re}from"./use-quasar-Cs1LdNF0.js";import{_ as le}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./QChip-ZnDgJwmd.js";import"./format-DPtYjOdv.js";import"./QMenu-DDLCkg3R.js";import"./rtl-DFPa-2ov.js";import"./QTabs-B1e59bZV.js";const ne={class:"container-fluid"},ie={class:"row"},ae={class:"col-md-4"},de={class:"well define_height"},ue={class:"form-group"},ce={class:"form-group"},pe={class:"form-group"},me={class:"row",style:{"padding-top":"20px"}},ge={class:"container"},ve={id:"in_mile"},fe={class:"badge badge-pill badge-secondary"},be={id:"in_kilo"},xe={class:"badge badge-pill badge-secondary"},_e={id:"duration_text"},ye={class:"badge badge-pill badge-success"},he={__name:"MapComponent",setup(U){const x=w(""),g=w(""),k=w("DRIVING"),B=w(0),d=w(0),E=w("");let I=null,$=null,V=null,o=!0;N(()=>{L(),t()});function L(){const a={lat:20.5937,lng:78.9629};I=new google.maps.Map(document.getElementById("map"),{zoom:16,center:a}),$=new google.maps.DirectionsService,V=new google.maps.DirectionsRenderer({draggable:!1}),I.addListener("click",r=>{const n=r.latLng;P(n,m=>{o?x.value=m:g.value=m})})}function P(a,r){new google.maps.Geocoder().geocode({location:a},(m,M)=>{M==="OK"&&m[0]?r(m[0].formatted_address):alert("Geocode was not successful for the following reason: "+M)})}function u(){o=!o,alert(o?"Click to set Origin":"Click to set Destination")}function t(){const a=new google.maps.places.Autocomplete(document.getElementById("from_places")),r=new google.maps.places.Autocomplete(document.getElementById("to_places"));a.addListener("place_changed",()=>{const n=a.getPlace();n&&n.formatted_address&&(x.value=n.formatted_address)}),r.addListener("place_changed",()=>{const n=r.getPlace();n&&n.formatted_address&&(g.value=n.formatted_address)})}function l(){p(k.value,x.value,g.value),D(k.value,x.value,g.value)}function p(a,r,n){$.route({origin:r,destination:n,travelMode:google.maps.TravelMode[a],avoidTolls:!0},(m,M)=>{M==="OK"?(V.setMap(I),V.setDirections(m)):(V.setMap(null),alert("Could not display directions due to: "+M))})}function D(a,r,n){new google.maps.DistanceMatrixService().getDistanceMatrix({origins:[r],destinations:[n],travelMode:google.maps.TravelMode[a],unitSystem:google.maps.UnitSystem.IMPERIAL,avoidHighways:!1,avoidTolls:!1},C)}function C(a,r){if(r!==google.maps.DistanceMatrixStatus.OK)alert("Error: "+r);else{const n=a.originAddresses[0],m=a.destinationAddresses[0];if(a.rows[0].elements[0].status==="ZERO_RESULTS")alert("Sorry, not available to use this travel mode between "+n+" and "+m);else{const M=a.rows[0].elements[0].distance,q=a.rows[0].elements[0].duration;d.value=(M.value/1e3).toFixed(2),B.value=(M.value/1609.34).toFixed(2),E.value=q.text}}}function A(){navigator.geolocation?navigator.geolocation.getCurrentPosition(Q):alert("Geolocation is not supported by this browser.")}function Q(a){const r=new google.maps.Geocoder,n={lat:parseFloat(a.coords.latitude),lng:parseFloat(a.coords.longitude)};r.geocode({location:n},m=>{m&&m.length>0?x.value=m[1].formatted_address:alert("Cannot determine address at this location.")})}return(a,r)=>(v(),b("div",null,[r[13]||(r[13]=e("div",{class:"navbar navbar-default navbar-static-top heading_anchor"},[e("div",{class:"container-fluid"},[e("div",{class:"navbar-header"},[e("a",{class:"navbar-brand heading_anchor",href:"#"},"Search on Map")])])],-1)),e("div",ne,[e("div",ie,[e("div",ae,[r[11]||(r[11]=e("p",null,"Welcome to SEARCH ON MAP Panel, Just Enter your origin point and your Destination where you want to go.",-1)),e("div",de,[e("form",{onSubmit:O(l,["prevent"])},[e("div",ue,[r[3]||(r[3]=e("label",null,"Enter Origin",-1)),f(e("input",{id:"from_places","onUpdate:modelValue":r[0]||(r[0]=n=>x.value=n),class:"form-control",placeholder:"Enter Origin"},null,512),[[h,x.value]]),e("a",{onClick:A},"Set Current Location")]),e("div",ce,[r[4]||(r[4]=e("label",null,"Enter Destination",-1)),f(e("input",{id:"to_places","onUpdate:modelValue":r[1]||(r[1]=n=>g.value=n),class:"form-control",placeholder:"Enter Destination"},null,512),[[h,g.value]])]),e("div",pe,[r[6]||(r[6]=e("label",null,"Travel Mode",-1)),f(e("select",{"onUpdate:modelValue":r[2]||(r[2]=n=>k.value=n),class:"form-control"},r[5]||(r[5]=[e("option",{value:"DRIVING"},"Driving",-1),e("option",{value:"WALKING"},"Walking",-1),e("option",{value:"BICYCLING"},"Bicycle",-1),e("option",{value:"TRANSIT"},"Transit",-1)]),512),[[G,k.value]])]),r[7]||(r[7]=e("input",{class:"btn btn-primary",type:"submit",value:"Find",style:{background:"#8142b1",width:"100%",border:"0px"}},null,-1))],32),e("div",me,[e("div",ge,[e("p",ve,[r[8]||(r[8]=T("Distance in Mile: ")),e("span",fe,i(B.value),1)]),e("p",be,[r[9]||(r[9]=T("Distance in KM: ")),e("span",xe,i(d.value),1)]),e("p",_e,[r[10]||(r[10]=T("Duration: ")),e("span",ye,i(E.value),1)])]),e("div",null,[e("button",{onClick:u,class:"btn btn-secondary"}," Toggle to "+i(s(o)?"Set Destination":"Set Origin"),1)])])])]),r[12]||(r[12]=e("div",{class:"col-md-8"},[e("noscript",null,[e("div",{class:"alert alert-info"},[e("h4",null,"Your JavaScript is disabled"),e("p",null,"Please enable JavaScript to view the map.")])]),e("div",{id:"map",style:{height:"500px",width:"100%"}})],-1))])])]))}},we=le(he,[["__scopeId","data-v-41852b18"]]),Me={class:"flex flex-col justify-center items-center gap-6"},ke={class:"border w-[412px] h-[1100px] rounded-[10px] p-[23px]"},De={class:"q-mb-sm"},Se={key:0,class:"text-red"},Ve={key:0,class:"text-red-500 text-sm"},Ce={class:"pt-5"},Be={key:0,class:"text-red"},Ie={key:0,class:"text-red-500 text-sm"},Pe={class:"pt-5"},Re={key:0,class:"text-red-500 text-sm"},Ee={class:"pt-5"},$e={key:0,class:"text-red-500 text-sm"},Le={key:0,class:"text-red-500 text-sm"},Te={key:0,class:"text-red-500 text-sm"},Ue={key:0,class:"text-red-500 text-sm"},Ae={class:"leading-[2px] pl-5"},Qe={class:"leading-[2px] pt-4 pl-5"},Fe={class:"leading-[2px] pt-4 pl-5"},Ke={class:"leading-[2px] pt-4 pl-5"},Ne={class:"leading-[2px] pt-4"},Oe={class:"leading-[2px] pt-4"},qe={class:"leading-[2px] pt-4"},Ge={class:"leading-[2px] pt-4"},ze={class:"leading-[2px] pt-4"},He={class:"leading-[2px] pt-4"},at=Object.assign({layout:se},{__name:"FormSetup2.1",props:["form","districts"],setup(U){const x=re(),g=w(!1),k=w(!1);let B=null;const d=U;console.log(d.districts),N(()=>{E(),$()});function E(){new google.maps.DirectionsService,new google.maps.DirectionsRenderer({draggable:!1})}async function I(){await Y();const u=document.getElementById("map");if(u){const t={lat:20.5937,lng:78.9629};B=new google.maps.Map(u,{center:t,zoom:14}),new google.maps.Marker({position:t,map:B,draggable:!0,title:"Drag to select location"}).addListener("dragend",p=>{const D=p.latLng.lat(),C=p.latLng.lng();o.source_locality=`${D}, ${C}`,o.source_lat=D,o.source_lng=C})}}function $(){const u=new google.maps.places.Autocomplete(document.getElementById("from_places")),t=new google.maps.places.Autocomplete(document.getElementById("to_places"));u.addListener("place_changed",()=>{const l=u.getPlace();if(l&&l.geometry){const p=l.geometry.location;o.source_locality=l.formatted_address,o.source_lat=p.lat(),o.source_lng=p.lng()}}),t.addListener("place_changed",()=>{const l=t.getPlace();if(l&&l.geometry){const p=l.geometry.location;o.destination_locality=l.formatted_address,o.destination_lat=p.lat(),o.destination_lng=p.lng()}})}function V(){const u=new google.maps.DistanceMatrixService,t=o.source_locality,l=o.destination_locality;if(!t||!l){alert("Please provide both source and destination localities.");return}u.getDistanceMatrix({origins:[t],destinations:[l],travelMode:google.maps.TravelMode.DRIVING,unitSystem:google.maps.UnitSystem.METRIC,avoidHighways:!1,avoidTolls:!1},(p,D)=>{if(D==="OK"&&p.rows[0].elements[0].status==="OK"){const C=p.rows[0].elements[0].distance;o.distance=(C.value/1e3).toFixed(2);const a=p.rows[0].elements[0].distance.value/1e3*40;o.transport_cost=a.toFixed(2)}else console.error("Distance calculation failed:",D),alert("Unable to calculate distance. Please check the addresses.")})}const o=z({source_district:d.form.source_district||"",source_locality:d.form.source_locality||"",source_lat:d.form.source_lat||"",source_lng:d.form.source_lng||"",destination_district:d.form.destination_district||"",destination_locality:d.form.destination_locality||"",destination_lat:d.form.destination_lat||"",destination_lng:d.form.destination_lng||"",distance:d.form.distance||"",vehicle_number:d.form.vehicle_number||"",vehicle_name:d.form.vehicle_name||"",driver_name:d.form.driver_name||"",driver_phone:d.form.driver_phone||"",transport_cost:d.form.transport_cost||""}),L=w(d.districts||[]),P=()=>{o.post(route("form.storeStep2"),{onError:u=>{console.log(u),o.errors=u,g.value=!1},onSuccess:()=>{g.value=!1,x.notify({type:"positive",message:"Form 2 submitted successfully!",position:"top-right"})}})};return(u,t)=>(v(),H(ee,null,{default:_(()=>[c(te,null,{default:_(()=>[c(X,{padding:""},{default:_(()=>[e("div",Me,[t[23]||(t[23]=e("div",{class:"border-2 border-gray-200 bg-[#E9F4FF] flex-shrink-0 rounded-[10px] text-center items-center"},[e("img",{id:"background",class:"w-[412px] h-[193px]",src:"image/Vertical Stepper with numbers2.png"})],-1)),e("div",ke,[c(Z,{onSubmit:O(P,["prevent"]),class:"q-gutter-md"},{default:_(()=>[t[21]||(t[21]=e("div",{class:"pb-3 flex items-center gap-2"},[e("div",{class:"w-[3px] h-[19px] flex-shrink-0 bg-black"}),e("h6",null,"Ruang Phurh leh Motor Chungchang")],-1)),e("div",De,[t[13]||(t[13]=e("p",{class:"text-[#61646B]"}," Ruang phurh tanna hmun ",-1)),e("div",null,[t[12]||(t[12]=e("div",{class:"text-sm font-medium text-black q-mb-xs"}," District ",-1)),c(F,{dense:"",outlined:"",modelValue:s(o).source_district,"onUpdate:modelValue":t[0]||(t[0]=l=>s(o).source_district=l),modelModifiers:{number:!0},label:"Select Source District",options:L.value,behavior:"menu",error:s(o).errors.source_district,"error-message":s(o).errors.source_district?s(o).errors.source_district[0]:"Source District is Required"},null,8,["modelValue","options","error","error-message"]),u.$page.props.errors.source_district?(v(),b("div",Se,i(u.$page.props.errors.source_district),1)):y("",!0)])]),t[22]||(t[22]=e("div",null,[e("div",{class:"text-sm font-medium text-black q-mb-xs"}," Veng/Khua ")],-1)),f(e("input",{type:"text",placeholder:"Ruang chhuah veng",id:"from_places","onUpdate:modelValue":t[1]||(t[1]=l=>s(o).source_locality=l),class:S(["form-control",["border p-2 w-full rounded-lg",s(o).errors.source_locality?"border-red-500":"border-gray-300"]])},null,2),[[h,s(o).source_locality]]),s(o).errors.source_locality?(v(),b("div",Ve,i(s(o).errors.source_locality),1)):y("",!0),e("div",Ce,[e("div",null,[t[14]||(t[14]=e("p",{class:"text-[#61646B]"}," Ruang dahna tur hmun ",-1)),c(F,{dense:"",outlined:"",modelValue:s(o).destination_district,"onUpdate:modelValue":t[2]||(t[2]=l=>s(o).destination_district=l),modelModifiers:{number:!0},label:"Select Source District",options:L.value,behavior:"menu",error:s(o).errors.destination_district,"error-message":s(o).errors.destination_district||""},null,8,["modelValue","options","error","error-message"]),u.$page.props.errors.destination_district?(v(),b("div",Be,i(u.$page.props.errors.destination_district),1)):y("",!0)])]),e("div",null,[f(e("input",{type:"text",placeholder:"Ruang Zalhna tur veng",id:"to_places","onUpdate:modelValue":t[3]||(t[3]=l=>s(o).destination_locality=l),class:S(["form-control",["border p-2 w-full rounded-lg",s(o).errors.destination_locality?"border-red-500":"border-gray-300"]])},null,2),[[h,s(o).destination_locality]]),s(o).errors.destination_locality?(v(),b("div",Ie,i(s(o).errors.destination_locality),1)):y("",!0)]),c(R,{label:"calculate",color:"black",onClick:V}),e("div",Pe,[t[15]||(t[15]=e("div",{class:"text-sm font-medium text-black q-mb-xs"}," Kilometer zat ",-1)),f(e("input",{type:"text",placeholder:"Distance (in km)",id:"from_places","onUpdate:modelValue":t[4]||(t[4]=l=>s(o).distance=l),class:S(["form-control",["border p-2 w-full rounded-lg",s(o).errors.distance?"border-red-500":"border-gray-300"]])},null,2),[[h,s(o).distance]]),s(o).errors.distance?(v(),b("div",Re,i(s(o).errors.distance),1)):y("",!0)]),e("div",Ee,[t[16]||(t[16]=e("p",{class:"text-[#61646B]"}," Ruang phurhna motor ",-1)),t[17]||(t[17]=e("div",{class:"text-sm font-medium text-black q-mb-xs"}," Motor hman man (Rs) ",-1)),f(e("input",{type:"text",placeholder:"Motor hman man",id:"transport_cost","onUpdate:modelValue":t[5]||(t[5]=l=>s(o).transport_cost=l),class:S(["form-control",["border p-2 w-full rounded-lg",s(o).errors.transport_cost?"border-red-500":"border-gray-300"]])},null,2),[[h,s(o).transport_cost]]),s(o).errors.transport_cost?(v(),b("div",$e,i(s(o).errors.transport_cost),1)):y("",!0)]),e("div",null,[t[18]||(t[18]=e("div",{class:"text-sm font-medium text-black q-mb-xs"}," Motor neitu/khalhtu hming ",-1)),f(e("input",{type:"text",placeholder:"Motor neitu/khalhtu hming pum",id:"from_places","onUpdate:modelValue":t[6]||(t[6]=l=>s(o).driver_name=l),class:S(["form-control",["border p-2 w-full rounded-lg",s(o).errors.driver_name?"border-red-500":"border-gray-300"]])},null,2),[[h,s(o).driver_name]]),s(o).errors.driver_name?(v(),b("div",Le,i(s(o).errors.driver_name),1)):y("",!0)]),e("div",null,[t[19]||(t[19]=e("div",{class:"text-sm font-medium text-black q-mb-xs"}," Motor neitu/khalhtu phone number ",-1)),f(e("input",{type:"text",placeholder:"Motor neitu/khalhtu biak pawh theihna tur",id:"from_places","onUpdate:modelValue":t[7]||(t[7]=l=>s(o).driver_phone=l),class:S(["form-control",["border p-2 w-full rounded-lg",s(o).errors.driver_phone?"border-red-500":"border-gray-300"]])},null,2),[[h,s(o).driver_phone]]),s(o).errors.driver_phone?(v(),b("div",Te,i(s(o).errors.driver_phone),1)):y("",!0)]),e("div",null,[t[20]||(t[20]=e("div",{class:"text-sm font-medium text-black q-mb-xs"}," Motor registration number ",-1)),f(e("input",{type:"text",placeholder:"Ruang phurhna motor registration number",id:"from_places","onUpdate:modelValue":t[8]||(t[8]=l=>s(o).vehicle_number=l),class:S(["form-control",["border p-2 w-full rounded-lg",s(o).errors.vehicle_number?"border-red-500":"border-gray-300"]])},null,2),[[h,s(o).vehicle_number]]),s(o).errors.vehicle_number?(v(),b("div",Ue,i(s(o).errors.vehicle_number),1)):y("",!0)]),c(R,{style:{padding:"10px 24px","border-radius":"12px"},outline:"",unelevated:"","text-color":"black",label:"Preview",color:"white",onClick:t[9]||(t[9]=l=>g.value=!0)}),c(R,{unelevated:"",label:"Next",color:"black",onClick:P,style:{padding:"10px 95px","border-radius":"12px"}})]),_:1})])]),c(K,{modelValue:k.value,"onUpdate:modelValue":t[10]||(t[10]=l=>k.value=l),style:{width:"80%",height:"80%"},onBeforeShow:I},{default:_(()=>t[24]||(t[24]=[e("div",{id:"map",style:{height:"100%",width:"100%"}},null,-1)])),_:1},8,["modelValue"]),c(K,{modelValue:g.value,"onUpdate:modelValue":t[11]||(t[11]=l=>g.value=l)},{default:_(()=>[e("div",null,[c(J,{class:"w-[411px] h-[822px] rounded-md"},{default:_(()=>[c(W,{class:""},{default:_(()=>[t[35]||(t[35]=e("p",{class:"text-center w-[242px] h-[17px] flex-shrink-0 rounded-[20px] bg-[#E9E9E9] mb-8"}," Ruang Phurh leh Motor Chungchang ",-1)),t[36]||(t[36]=e("p",{class:"mb-8"},"Ruang phurh tanna",-1)),e("div",Ae,[t[25]||(t[25]=e("p",{class:"text-[#61646B]"},"District",-1)),e("p",null,i(s(o).source_district.label),1)]),e("div",Qe,[t[26]||(t[26]=e("p",{class:"text-[#61646B]"},"Veng/Khua",-1)),e("p",null,i(s(o).source_locality),1)]),t[37]||(t[37]=e("hr",{class:"my-4 border-border"},null,-1)),t[38]||(t[38]=e("p",{class:"mb-8 mt-8 text-[#363636]"}," Ruang dahna tur hmun ",-1)),e("div",Fe,[t[27]||(t[27]=e("p",{class:"text-[#61646B]"},"District",-1)),e("p",null,i(s(o).destination_district.label),1)]),e("div",Ke,[t[28]||(t[28]=e("p",{class:"text-[#61646B]"},"Veng/Khua",-1)),e("p",null,i(s(o).destination_locality),1)]),t[39]||(t[39]=e("hr",{class:"my-4 border-border"},null,-1)),e("div",Ne,[t[29]||(t[29]=e("p",{class:"text-[#61646B]"},"Kilometer",-1)),e("p",null,i(s(o).distance),1)]),t[40]||(t[40]=e("hr",{class:"my-4 border-border"},null,-1)),t[41]||(t[41]=e("p",{class:"mb-8 mt-8"},"Ruang phurhna motor",-1)),e("div",Oe,[t[30]||(t[30]=e("p",{class:"text-[#61646B]"}," Motor registration number ",-1)),e("p",null,i(s(o).vehicle_number),1)]),e("div",qe,[t[31]||(t[31]=e("p",{class:"text-[#61646B]"},"Motor hming",-1)),e("p",null,i(s(o).vehicle_name),1)]),e("div",Ge,[t[32]||(t[32]=e("p",{class:"text-[#61646B]"}," Motor neitu/khalhtu hming ",-1)),e("p",null,i(s(o).driver_name),1)]),e("div",ze,[t[33]||(t[33]=e("p",{class:"text-[#61646B]"}," Motor neitu/khalhtu phone number ",-1)),e("p",null,i(s(o).driver_phone),1)]),e("div",He,[t[34]||(t[34]=e("p",{class:"text-[#61646B]"}," Motor hman man (Rs) ",-1)),e("p",null,i(s(o).transport_cost),1)])]),_:1}),c(j,{align:"right"},{default:_(()=>[f(c(R,{class:"text-black",color:"white",label:"Edit"},null,512),[[oe]]),c(R,{label:"Approve & Next",color:"black",onClick:P})]),_:1})]),_:1})])]),_:1},8,["modelValue"]),c(we,{class:"pt-[100px]",origin:s(o).source_locality,destination:s(o).destination_locality},null,8,["origin","destination"])]),_:1})]),_:1})]),_:1}))}});export{at as default};
