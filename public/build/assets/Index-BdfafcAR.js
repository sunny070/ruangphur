import{Q as P}from"./QInput-DWXfAtP5.js";import{c as x,a as h,h as b,b as q,g as A,U as C,aF as B,r as f,B as p,D as i,C as d,J as u,I as n,E as I,A as _,F as v,G as g,O as k,au as V,P as y,Q as N,aG as F}from"./app-C6fMH8jL.js";import{Q as z,a as E}from"./QTimeline-CVQcWvsx.js";import{u as L,a as $}from"./use-dark-B7xvBCAt.js";import{Q as T}from"./QPage-2ykW8FJW.js";import{b as j,a as G}from"./QLayout-D4fgNmww.js";import{_ as M}from"./WebLayout-Cy8zVXxi.js";import"./use-key-composition-SnHc4-8o.js";import"./use-tick-DkgPz2H6.js";import"./use-timeout-eVEjMaOZ.js";const w=x({name:"QCardSection",props:{tag:{type:String,default:"div"},horizontal:Boolean},setup(r,{slots:s}){const o=h(()=>`q-card__section q-card__section--${r.horizontal===!0?"horiz row no-wrap":"vert"}`);return()=>b(r.tag,{class:o.value},q(s.default))}}),O=x({name:"QCard",props:{...L,tag:{type:String,default:"div"},square:Boolean,flat:Boolean,bordered:Boolean},setup(r,{slots:s}){const{proxy:{$q:o}}=A(),a=$(r,o),c=h(()=>"q-card"+(a.value===!0?" q-card--dark q-dark":"")+(r.bordered===!0?" q-card--bordered":"")+(r.square===!0?" q-card--square no-border-radius":"")+(r.flat===!0?" q-card--flat no-shadow":""));return()=>b(r.tag,{class:c.value},q(s.default))}});function U(){return C(B)}const J={class:"flex items-center flex-col"},K={class:"w-[412px] h-[381px] flex-shrink-0 rounded-[10px] border border-[#EEE] bg-[#E9F4FF] p-5 mt-6"},R={class:"flex flex-col"},H={class:"flex gap-3 pt-6"},W={class:"mt-6"},X={class:"text-muted-foreground"},Y={class:"text-muted-foreground"},ue=Object.assign({layout:M},{__name:"Index",setup(r){const s=U(),o=f(""),a=f(null),c=f(!1),Q=()=>{if(!o.value){s.notify({color:"negative",message:"Please enter a valid Application ID."});return}c.value=!0;try{window.location.href=`/application/${o.value}/view`}catch{s.notify({color:"negative",message:"Failed to load application details. Please try again."})}finally{c.value=!1}},S=async()=>{var e,t;c.value=!0;try{const{data:l}=await F.get(`/track/${o.value}`);a.value=l.application,console.log(a.value),s.notify({color:"positive",message:"Application found."})}catch(l){a.value=null;const m=((t=(e=l.response)==null?void 0:e.data)==null?void 0:t.message)||(l.request?"Network error. Please try again later.":"An unknown error occurred.");s.notify({color:"negative",message:m})}finally{c.value=!1}},D=h(()=>{if(!a.value)return{Pending:{status:null,title:"No Data",description:"No application data found.",timestamp:null,completed:!1}};const e=a.value.status;return{Pending:{status:e,title:"Form Submitted",description:"I ruang phurh dilna chu thehluah fel a ni tawh e, District lama thuneitu ten verify turin a thang mek.",timestamp:a.value.created_at?new Date(a.value.created_at).toLocaleString():null,completed:e==="Pending"||e==="Verified"||e==="Approved"||e==="Payment"},Verified:{status:e,title:"Verified",description:"District thuneitu te atangin verify a ni a, Directorate lamah thawn a ni.",timestamp:a.value.verified_at?new Date(a.value.verified_at).toLocaleString():null,completed:e==="Verified"||e==="Approved"||e==="Payment"},Approved:{status:e,title:"Application under process",description:"Directorate kutah a awm mek a, bank lama deposit turin file tih kal a ni.",timestamp:a.value.approved_at?new Date(a.value.approved_at).toLocaleString():null,completed:e==="Approved"||e==="Payment"},Payment:{status:e,title:"Bill Process",description:"I ruang phurh dilna chu bank lamah process mek a ni.",timestamp:a.value.processed_at?new Date(a.value.processed_at).toLocaleString():null,completed:e==="Payment"}}});return(e,t)=>(d(),p(j,null,{default:i(()=>[u(G,null,{default:i(()=>[u(T,{padding:""},{default:i(()=>[n("div",J,[n("div",K,[n("div",R,[t[1]||(t[1]=n("h5",{class:"text-2xl"},"Ruang phurh dil chhuina/track",-1)),t[2]||(t[2]=n("p",{class:"font-bold mb-4 text-[#5B656F] text-sm"}," I ruang phurh dilna a thlen chin zawnna a ni. Mipui ten zawldawh takin min lo ngaichang zel dawn nia. ",-1)),t[3]||(t[3]=I(" Track ID chhu lut rawh le ")),u(P,{outlined:"",modelValue:o.value,"onUpdate:modelValue":t[0]||(t[0]=l=>o.value=l),placeholder:"I dilna thlen chin zawnna",dense:"",class:"custom-input"},null,8,["modelValue"])]),n("div",H,[u(_,{class:"text-black",label:"View",color:"white",onClick:Q}),u(_,{class:"w-3",label:"Track Now",color:"black",onClick:S,loading:c.value},null,8,["loading"])])]),a.value?(d(),p(O,{key:0,class:"q-ma-md h-[983px] w-[412px]"},{default:i(()=>[e.currentStatus?(d(),p(w,{key:0},{default:i(()=>[n("div",W,[n("p",X,"Status: "+v(e.currentStatus.status||"N/A"),1),n("p",Y,"Applied date: "+v(e.currentStatus.timestamp||"N/A"),1)])]),_:1})):g("",!0),u(w,null,{default:i(()=>[t[4]||(t[4]=n("h5",null,"Current Status",-1)),u(z,{class:"q-mt-lg"},{default:i(()=>[(d(!0),k(y,null,V(D.value,(l,m)=>(d(),p(E,{key:m,title:l.title,subtitle:l.description,color:l.completed?"green":"grey"},{default:i(()=>[l.timestamp?(d(),k(y,{key:0},[u(N,{name:"schedule",size:"xs",class:"q-mr-sm"}),n("span",null,v(l.timestamp),1)],64)):g("",!0)]),_:2},1032,["title","subtitle","color"]))),128))]),_:1})]),_:1})]),_:1})):g("",!0)])]),_:1})]),_:1})]),_:1}))}});export{ue as default};
