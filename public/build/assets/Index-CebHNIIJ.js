import{r as v,c as x,a as o,b as c,w as n,d as i,u as A,g as s,j as P,k as h,l as Q,m as k,t as p,h as g,f as m,i as S,F as w,N as D,bY as N,Q as V}from"./app-DyTi5KuX.js";import{Q as I,a as j}from"./QTimeline-BzjREb2S.js";import{Q as F}from"./QPage-CN5TYfTe.js";import{a as C,b as L}from"./QLayout-CxhaKj2c.js";import{d as B}from"./index-o20kKi-8.js";import{u as E}from"./use-quasar-DmwijHyj.js";import{W as R}from"./WebLayout-DFgdyUDY.js";import"./format-C9iz93YD.js";import"./QTabs-lxqZivxn.js";import"./rtl-DFPa-2ov.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const q={class:"flex items-center flex-col"},z={class:"w-[412px] h-[381px] flex-shrink-0 rounded-[10px] border border-[#EEE] bg-[#E9F4FF] p-5 mt-6"},T={class:"flex flex-col"},$={class:"flex gap-3 pt-6"},M={class:"mt-6"},W={class:"text-muted-foreground"},H={class:"text-muted-foreground"},O={key:0,class:"text-red-500"},ie=Object.assign({layout:R},{__name:"Index",setup(U){const d=E(),r=v(""),e=v(null),u=v(!1),b=a=>{if(!r.value){d.notify({color:"negative",message:"Please enter a valid Application ID."});return}u.value=!0;try{D.get(route("application.view",r.value))}catch{d.notify({color:"negative",message:"Failed to load application details. Please try again."})}finally{u.value=!1}},_=async()=>{var a,t;u.value=!0;try{const{data:l}=await N.get(`/track/${r.value}`);e.value=l.application,d.notify({color:"positive",message:"Application found."})}catch(l){e.value=null;const f=((t=(a=l.response)==null?void 0:a.data)==null?void 0:t.message)||(l.request?"Network error. Please try again later.":"An unknown error occurred.");d.notify({color:"negative",message:f})}finally{u.value=!1}},y=x(()=>{if(!e.value)return{Pending:{status:null,title:"No Data",description:"No application data found.",timestamp:null,completed:!1}};const a=e.value.status;let t={Pending:{status:a,title:"Form Submitted",description:"I ruang phurh dilna chu thehluah fel a ni tawh e, District lama thuneitu ten verify turin a thang mek.",timestamp:e.value.created_at?new Date(e.value.created_at).toLocaleString():null,completed:["Pending","Verified","Approved","Processed"].includes(a)},Verified:{status:a,title:"Verified",description:"District thuneitu te atangin verify a ni a, Directorate lamah thawn a ni.",timestamp:e.value.verified_at?new Date(e.value.verified_at).toLocaleString():null,completed:["Verified","Approved","Processed"].includes(a)},Approved:{status:a,title:"Application under process",description:"Directorate kutah a awm mek a, bank lama deposit turin file tih kal a ni.",timestamp:e.value.approved_at?new Date(e.value.approved_at).toLocaleString():null,completed:["Approved","Processed"].includes(a)},Processed:{status:a,title:"Bill Process",description:"I ruang phurh dilna chu bank lamah process mek a ni.",timestamp:e.value.processed_at?new Date(e.value.processed_at).toLocaleString():null,completed:a==="Processed"}};return a==="Rejected"&&(t.Rejected={status:a,title:"Application Rejected",description:e.value.feedback?`Application rejected. Reason: ${e.value.feedback}`:"Application rejected without feedback",timestamp:e.value.updated_at?new Date(e.value.updated_at).toLocaleString():null,completed:!0,color:"red"}),t});return(a,t)=>(o(),c(C,null,{default:n(()=>[i(L,null,{default:n(()=>[i(F,{padding:""},{default:n(()=>[i(A(B.Head),{title:"Track"}),s("div",q,[s("div",z,[s("div",T,[t[2]||(t[2]=s("h5",{class:"text-2xl font-black"}," Ruang phurh dil chhuina/track ",-1)),t[3]||(t[3]=s("p",{class:"font-black mb-4 text-[#5B656F] text-sm"}," I ruang phurh dilna a thlen chin zawnna a ni. Mipui ten zawldawh takin min lo ngaichang zel dawn nia. ",-1)),t[4]||(t[4]=s("p",{class:"font-black"},"Track ID chhu lut rawh le",-1)),i(P,{outlined:"",modelValue:r.value,"onUpdate:modelValue":t[0]||(t[0]=l=>r.value=l),placeholder:"I dilna thlen chin zawnna",dense:"",class:"custom-input font-bold"},null,8,["modelValue"])]),s("div",$,[i(h,{class:"text-black",label:"View",color:"white",onClick:t[1]||(t[1]=l=>b(r.value))}),i(h,{class:"w-3",label:"Track Now",color:"black",onClick:_,loading:u.value},null,8,["loading"])])]),e.value?(o(),c(Q,{key:0,class:"q-ma-md h-[983px] w-[412px]"},{default:n(()=>[a.currentStatus?(o(),c(k,{key:0},{default:n(()=>[s("div",M,[s("p",W," Status: "+p(a.currentStatus.status||"N/A"),1),s("p",H," Applied date: "+p(a.currentStatus.timestamp||"N/A"),1),e.value.status==="Rejected"?(o(),g("p",O," Rejection Feedback: "+p(e.value.feedback),1)):m("",!0)])]),_:1})):m("",!0),i(k,null,{default:n(()=>[t[5]||(t[5]=s("h5",null,"Current Status",-1)),i(I,{class:"q-mt-lg"},{default:n(()=>[(o(!0),g(w,null,S(y.value,(l,f)=>(o(),c(j,{key:f,color:l.color||(l.completed?"green":"grey"),title:l.title,subtitle:l.description},{default:n(()=>[l.timestamp?(o(),g(w,{key:0},[i(V,{name:"schedule",size:"xs",class:"q-mr-sm"}),s("span",null,p(l.timestamp),1)],64)):m("",!0)]),_:2},1032,["color","title","subtitle"]))),128))]),_:1})]),_:1})]),_:1})):m("",!0)])]),_:1})]),_:1})]),_:1}))}});export{ie as default};
