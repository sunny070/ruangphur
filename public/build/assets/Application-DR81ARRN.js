import{Q as j,d as ue}from"./dayjs.min-Oy0eqcQE.js";import{r as C,o as re,c as O,a as i,b as c,w as n,d as o,u as ie,Z as me,e as I,t as r,f,g as a,h as p,i as _,F as z,Q as h,j as u,k as V,l as $,m as B,n as be,p as H,q as Y,s as K,N as M,v as G,y as ve}from"./app-DYJu_hh0.js";import{Q as k}from"./QSelect-CIjIcnhz.js";import{Q as L,a as w}from"./format-DPTxXwLs.js";import{Q as fe}from"./QLayout-DKyBKObu.js";import{Q as ce}from"./QMenu-BHGL6jif.js";import{Q as pe}from"./QForm-BeoM8mMx.js";import{Q as Ve}from"./QPage-D1RYuMuC.js";import{C as W}from"./ClosePopup-CfCC9Cj8.js";import{_ as ge}from"./AdminLayout-BxM4lzZW.js";import{T as Z}from"./TransportRouteMap-Cz960Yrd.js";import"./QChip-BvGp2FJD.js";import"./rtl-DFPa-2ov.js";import"./QExpansionItem-C9_T0O2J.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const ye={class:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-4"},xe=["href"],Ce={class:"text-sm sm:text-base font-black"},he={class:"text-xs sm:text-sm"},ke={class:"grid grid-cols-1 md:grid-cols-2 gap-4 pt-9"},we={class:""},Ae={class:"flex justify-end pr-16"},Ue={class:"table-responsive"},qe={class:"q-table q-table__grid q-mb-lg"},Ne={class:"no-print"},Se={key:0},Te={key:1},Fe={class:"mt-4",style:{height:"200px"}},De={key:2},Ee={class:"mt-4",style:{height:"400px",position:"relative"}},Ie={key:1,class:"absolute-center text-grey"},We=Object.assign({layout:ge},{__name:"Application",props:{applications:Array,statusCounts:Object,flash:Object,dropdowns:Object},setup(v){const g=v,y=C(!1),x=C(""),P=C([]),Q=C(null),J=d=>ue(d).format("dddd, MMMM D, YYYY h:mm A"),b=C(1),s=C({deceased:{},transport:{},applicant:{}});re(()=>{const d=[...new Set(g.applications.map(e=>e.deceased.district.name))];P.value=d.map(e=>({label:e,value:e}))});const X=O(()=>{let d=g.applications;if(Q.value&&(d=d.filter(e=>{var l,t,m;return((t=(l=e==null?void 0:e.deceased)==null?void 0:l.district)==null?void 0:t.name)===((m=Q.value)==null?void 0:m.value)})),x.value){const e=x.value.toLowerCase();d=d.filter(l=>{var t,m,A,U,q,N,S,T,F,D,E;return((m=(t=l.application_no)==null?void 0:t.toString())==null?void 0:m.toLowerCase().includes(e))||((U=(A=l.applicant)==null?void 0:A.name)==null?void 0:U.toLowerCase().includes(e))||((N=(q=l.deceased)==null?void 0:q.name)==null?void 0:N.toLowerCase().includes(e))||((T=(S=l.applicant)==null?void 0:S.mobile)==null?void 0:T.toString().includes(e))||((E=(D=(F=l.deceased)==null?void 0:F.district)==null?void 0:D.name)==null?void 0:E.toLowerCase().includes(e))})}return d}),ee=d=>{var e,l,t,m;s.value={...d,transport:{...d.transport,source_lat:Number((e=d.transport)==null?void 0:e.source_lat)||23.1645,source_lng:Number((l=d.transport)==null?void 0:l.source_lng)||92.9376,destination_lat:Number((t=d.transport)==null?void 0:t.destination_lat)||23.1645,destination_lng:Number((m=d.transport)==null?void 0:m.destination_lng)||92.9376}},b.value=1,y.value=!0},le=()=>{M.put(route("applications.update",s.value),{onSuccess:()=>{console.log("success"),y.value=!1},onFinish:()=>{console.log("success"),y.value=!1}}),y.value=!1},te=()=>{b.value<4&&b.value++},se=()=>{b.value>1&&b.value--},oe=d=>{M.get(route("verifier.applications.show",d))},ae=d=>{confirm("Are you sure you want to delete this application?")&&M.delete(`/verifier/applications/${d}`,{onSuccess:()=>{}})},de=()=>{const e=document.querySelector(".q-table").cloneNode(!0);e.querySelectorAll(".no-print").forEach(m=>m.remove());const t=window.open("","","width=800,height=600");t.document.write(`
        <html>
            <head>
                <title>Print Table</title>
                <style>
                    table {
                        width: 100%;
                        border-collapse: collapse;
                    }
                    th, td {
                        padding: 8px 12px;
                        text-align: left;
                        border-bottom: 1px solid #ddd;
                    }
                    th {
                        background-color: #3A424A;
                        color: white;
                        font-weight: bold;
                    }
                </style>
            </head>
            <body>
                ${e.outerHTML}
            </body>
        </html>
    `),t.document.close(),t.print()},ne=O(()=>[{label:"Incoming",count:g.statusCounts.Incoming||0,bgClass:"bg-[#FFF7EF]",textClass:"text-[#FD7900]",route:"/verifier/application"},{label:"Verified",count:g.statusCounts.Verified||0,bgClass:"bg-[#EEFFF8]",textClass:"text-[#00AA68]",route:"/verifier/verified"},{label:"Rejected",count:g.statusCounts.Rejected||0,bgClass:"bg-[#FFF2F2]",textClass:"text-[#FE6262]",route:"/verifier/rejected"},{label:"Pending",count:g.statusCounts.Pending||0,bgClass:"bg-[#F2F8FF]",textClass:"text-[#404CF1]",route:"/verifier/application"}]);return(d,e)=>(i(),c(Ve,{padding:""},{default:n(()=>[o(ie(me),{title:"Application"}),v.flash.success?(i(),c(j,{key:0,class:"bg-green-4 text-white",dense:""},{default:n(()=>[I(r(v.flash.success),1)]),_:1})):f("",!0),v.flash.error?(i(),c(j,{key:1,class:"bg-red-4 text-white",dense:""},{default:n(()=>[I(r(v.flash.error),1)]),_:1})):f("",!0),a("div",ye,[(i(!0),p(z,null,_(ne.value,l=>(i(),p("a",{key:l.label,href:l.route,class:G(["w-full h-[78px]",`${l.bgClass} ${l.textClass} p-4`])},[a("h6",Ce,r(l.count),1),a("p",he,r(l.label),1)],10,xe))),128))]),a("div",ke,[a("div",null,[a("div",we,[o(u,{rounded:"lg",outlined:"",dense:"","bottom-slots":"",modelValue:x.value,"onUpdate:modelValue":e[1]||(e[1]=l=>x.value=l),label:"Search",color:"black",class:"w-full max-w-md"},{append:n(()=>[x.value!==""?(i(),c(h,{key:0,name:"close",onClick:e[0]||(e[0]=l=>x.value=""),class:"cursor-pointer"})):f("",!0),o(h,{name:"search"})]),_:1},8,["modelValue"])])]),a("div",Ae,[o(V,{size:"sm",flat:"",outlined:"",class:"q-btn-custom flex items-center justify-center",onClick:de},{default:n(()=>[o(h,{name:"print",size:"16px",class:"q-mr-xs"}),e[33]||(e[33]=a("span",null,"Print",-1))]),_:1}),o(k,{color:"dark",style:{color:"#000",width:"160px",height:"40px","flex-shrink":"0","border-radius":"8px",border:"1px solid black",background:"transparent"},modelValue:Q.value,"onUpdate:modelValue":e[2]||(e[2]=l=>Q.value=l),options:P.value,"option-value":"value","option-label":"label",label:"Select District",outlined:"",dense:"",class:"q-mb-md"},null,8,["modelValue","options"])])]),a("div",Ue,[a("table",qe,[e[38]||(e[38]=a("thead",{class:"bg-[#3A424A] text-white font-bold h-[30px] w-full text-[11px]"},[a("tr",null,[a("th",null,"Sl.No."),a("th",null,"APPLICATION NO."),a("th",null,"APPLICANT NAME"),a("th",null,"ADDRESS"),a("th",null,"CONTACT No."),a("th",null,"MITTHI KHUA"),a("th",null,"PLACE OF DEATH"),a("th",null,"KILOMETER"),a("th",null,"AMOUNT CLAIMED"),a("th",null,"ACCOUNT No. OF CLAIMANT"),a("th",null,"IFSC"),a("th",null,"STATUS"),a("th",null,"DIL NI"),a("th",{class:"no-print"},"ACTIONS"),a("th",{class:"print-only"},"SIGNATURE")])],-1)),a("tbody",null,[(i(!0),p(z,null,_(X.value,(l,t)=>{var m,A,U,q,N,S,T,F,D,E;return i(),p("tr",{key:l.id},[a("td",null,r(t+1),1),a("td",null,r(l==null?void 0:l.application_no),1),a("td",null,r((m=l==null?void 0:l.applicant)==null?void 0:m.name),1),a("td",null,r((A=l==null?void 0:l.applicant)==null?void 0:A.locality),1),a("td",null,r((U=l==null?void 0:l.applicant)==null?void 0:U.mobile),1),a("td",null,r((N=(q=l==null?void 0:l.deceased)==null?void 0:q.district)==null?void 0:N.name),1),a("td",null,r((S=l==null?void 0:l.deceased)==null?void 0:S.place_of_death),1),a("td",null,r((T=l==null?void 0:l.transport)==null?void 0:T.distance),1),a("td",null,r((F=l==null?void 0:l.transport)==null?void 0:F.transport_cost),1),a("td",null,r((D=l==null?void 0:l.applicant)==null?void 0:D.account_no),1),a("td",null,r((E=l==null?void 0:l.applicant)==null?void 0:E.ifsc_code),1),a("td",null,[a("div",{class:G([{"status-incoming":(l==null?void 0:l.status)==="Pending","status-rejected":(l==null?void 0:l.status)==="Rejected","status-approved":(l==null?void 0:l.status)==="Verified"},"status-badge"])},r(l==null?void 0:l.status),3)]),a("td",null,r(J(l==null?void 0:l.created_at)),1),a("td",Ne,[o(V,{flat:"",icon:"more_vert",style:ve(d.buttonStyle)},null,8,["style"]),o(ce,null,{default:n(()=>[o(fe,null,{default:n(()=>[o(L,{clickable:"",onClick:R=>oe(l.id)},{default:n(()=>[o(w,{avatar:""},{default:n(()=>[o(h,{size:"sm",name:"visibility"})]),_:1}),o(w,null,{default:n(()=>e[34]||(e[34]=[I("View")])),_:1})]),_:2},1032,["onClick"]),o(L,{clickable:"",onClick:R=>ee(l)},{default:n(()=>[o(w,{avatar:""},{default:n(()=>[o(h,{name:"edit"})]),_:1}),o(w,null,{default:n(()=>e[35]||(e[35]=[I("Edit/Update")])),_:1})]),_:2},1032,["onClick"]),o(L,{clickable:"",onClick:R=>ae(l.id)},{default:n(()=>[o(w,{avatar:""},{default:n(()=>[o(h,{name:"delete"})]),_:1}),o(w,null,{default:n(()=>e[36]||(e[36]=[I("Delete")])),_:1})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),e[37]||(e[37]=a("td",{class:"print-only"},null,-1))])}),128))])])]),o(K,{modelValue:y.value,"onUpdate:modelValue":e[31]||(e[31]=l=>y.value=l)},{default:n(()=>[o($,{class:"w-[411px] h-[822px] rounded-md"},{default:n(()=>[o(B,null,{default:n(()=>[o(pe,{onSubmit:be(le,["prevent"])},{default:n(()=>{var l;return[b.value===1?(i(),p("div",Se,[e[39]||(e[39]=a("p",{class:"text-center w-[242px] h-[17px] flex-shrink-0 rounded-[20px] bg-[#E9E9E9] mb-8"}," Ruang Phurh MITTHI Chungchang ",-1)),o(u,{modelValue:s.value.deceased.name,"onUpdate:modelValue":e[3]||(e[3]=t=>s.value.deceased.name=t),label:"Mitthi hming",outlined:"",dense:"",class:"q-mb-md"},null,8,["modelValue"]),o(u,{modelValue:s.value.deceased.relative_name,"onUpdate:modelValue":e[4]||(e[4]=t=>s.value.deceased.relative_name=t),label:"A chhungte hming",outlined:"",dense:"",class:"q-mb-md"},null,8,["modelValue"]),o(u,{type:"date",modelValue:s.value.deceased.dob,"onUpdate:modelValue":e[5]||(e[5]=t=>s.value.deceased.dob=t),label:"Mitthi Pianni leh thla",outlined:"",dense:"",class:"q-mb-md"},null,8,["modelValue"]),o(k,{modelValue:s.value.deceased.district.name,"onUpdate:modelValue":e[6]||(e[6]=t=>s.value.deceased.district.name=t),options:(l=v.dropdowns)==null?void 0:l.districts,"option-label":"name","option-value":"id",label:"District",outlined:"",dense:"",class:"q-mb-md"},null,8,["modelValue","options"]),o(u,{modelValue:s.value.deceased.locality,"onUpdate:modelValue":e[7]||(e[7]=t=>s.value.deceased.locality=t),label:"Locality",outlined:"",dense:"",class:"q-mb-md"},null,8,["modelValue"]),o(k,{modelValue:s.value.deceased.constituency,"onUpdate:modelValue":e[8]||(e[8]=t=>s.value.deceased.constituency=t),options:v.dropdowns.constituencies,"option-label":"name","option-value":"id",label:"Constituency",outlined:"",dense:"",class:"q-mb-md"},null,8,["modelValue","options"]),o(u,{type:"datetime-local",modelValue:s.value.deceased.time_of_death,"onUpdate:modelValue":e[9]||(e[9]=t=>s.value.deceased.time_of_death=t),label:"Thih ni leh darkar",outlined:"",dense:"",class:"q-mb-md"},null,8,["modelValue"]),o(u,{modelValue:s.value.deceased.place_of_death,"onUpdate:modelValue":e[10]||(e[10]=t=>s.value.deceased.place_of_death=t),label:"Thihna hmun",outlined:"",dense:"",class:"q-mb-md"},null,8,["modelValue"])])):f("",!0),b.value===2?(i(),p("div",Te,[e[40]||(e[40]=a("p",{class:"text-center w-[242px] h-[17px] flex-shrink-0 rounded-[20px] bg-[#E9E9E9] mb-8"}," Ruang Phurh leh Motor Chungchang ",-1)),o(k,{modelValue:s.value.transport.source_district,"onUpdate:modelValue":e[11]||(e[11]=t=>s.value.transport.source_district=t),options:v.dropdowns.districts,"option-label":"name","option-value":"id",label:"Ruang phurh tanna tur District awmna",outlined:"",dense:"",class:"q-mb-md"},null,8,["modelValue","options"]),o(u,{ref:"sourceInput",modelValue:s.value.transport.source_locality,"onUpdate:modelValue":e[12]||(e[12]=t=>s.value.transport.source_locality=t),label:"Source Locality",outlined:"",dense:""},null,8,["modelValue"]),o(k,{modelValue:s.value.transport.destination_district,"onUpdate:modelValue":e[13]||(e[13]=t=>s.value.transport.destination_district=t),options:v.dropdowns.districts,"option-label":"name","option-value":"id",label:"Ruang zalhna tur District awmna",outlined:"",dense:"",class:"q-mb-md"},null,8,["modelValue","options"]),o(u,{ref:"destinationInput",modelValue:s.value.transport.destination_locality,"onUpdate:modelValue":e[14]||(e[14]=t=>s.value.transport.destination_locality=t),label:"Destination Locality",outlined:"",dense:""},null,8,["modelValue"]),a("div",Fe,[o(Z,{transport:s.value.transport,"onUpdate:sourceLocality":e[15]||(e[15]=t=>s.value.transport.source_locality=t),"onUpdate:destinationLocality":e[16]||(e[16]=t=>s.value.transport.destination_locality=t),"onUpdate:distance":e[17]||(e[17]=t=>s.value.transport.distance=t),"onUpdate:transportCost":e[18]||(e[18]=t=>s.value.transport.transport_cost=t),onMapsLoaded:d.initAutocomplete},null,8,["transport","onMapsLoaded"])]),o(u,{modelValue:s.value.transport.distance,"onUpdate:modelValue":e[19]||(e[19]=t=>s.value.transport.distance=t),label:"Distance (Km)",outlined:"",dense:"",class:"q-mb-md pt-[400px]"},null,8,["modelValue"]),o(u,{modelValue:s.value.transport.transport_cost,"onUpdate:modelValue":e[20]||(e[20]=t=>s.value.transport.transport_cost=t),label:"Transport Cost",outlined:"",dense:"",class:"q-mb-md"},null,8,["modelValue"]),o(u,{modelValue:s.value.transport.vehicle_number,"onUpdate:modelValue":e[21]||(e[21]=t=>s.value.transport.vehicle_number=t),label:"Vehicle Number",outlined:"",dense:"",class:"q-mb-md"},null,8,["modelValue"]),o(u,{modelValue:s.value.transport.driver_name,"onUpdate:modelValue":e[22]||(e[22]=t=>s.value.transport.driver_name=t),label:"Driver Name",outlined:"",dense:"",class:"q-mb-md"},null,8,["modelValue"]),o(u,{modelValue:s.value.transport.driver_phone,"onUpdate:modelValue":e[23]||(e[23]=t=>s.value.transport.driver_phone=t),label:"Driver Phone",outlined:"",dense:"",class:"q-mb-md"},null,8,["modelValue"])])):f("",!0),b.value===3?(i(),p("div",De,[o(u,{modelValue:s.value.applicant.name,"onUpdate:modelValue":e[24]||(e[24]=t=>s.value.applicant.name=t),label:"Applicant Name",outlined:"",dense:"",class:"q-mb-md"},null,8,["modelValue"]),o(u,{modelValue:s.value.applicant.mobile,"onUpdate:modelValue":e[25]||(e[25]=t=>s.value.applicant.mobile=t),label:"Mobile",outlined:"",dense:"",class:"q-mb-md"},null,8,["modelValue"]),o(k,{modelValue:s.value.applicant.district.name,"onUpdate:modelValue":e[26]||(e[26]=t=>s.value.applicant.district.name=t),options:v.dropdowns.districts,"option-label":"name","option-value":"id",label:"Ruang phurhna man diltu district",outlined:"",dense:"",class:"q-mb-md"},null,8,["modelValue","options"]),o(u,{modelValue:s.value.applicant.locality,"onUpdate:modelValue":e[27]||(e[27]=t=>s.value.applicant.locality=t),label:"Ruang phurhna man diltu veng/khua",outlined:"",dense:"",class:"q-mb-md"},null,8,["modelValue"]),o(u,{modelValue:s.value.applicant.bank_name,"onUpdate:modelValue":e[28]||(e[28]=t=>s.value.applicant.bank_name=t),label:"Bank hming",outlined:"",dense:"",class:"q-mb-md"},null,8,["modelValue"]),o(u,{modelValue:s.value.applicant.account_no,"onUpdate:modelValue":e[29]||(e[29]=t=>s.value.applicant.account_no=t),label:"Account No",outlined:"",dense:"",class:"q-mb-md"},null,8,["modelValue"]),o(u,{modelValue:s.value.applicant.ifsc_code,"onUpdate:modelValue":e[30]||(e[30]=t=>s.value.applicant.ifsc_code=t),label:"IFSC Code",outlined:"",dense:"",class:"q-mb-md"},null,8,["modelValue"])])):f("",!0),o(H,{align:"right"},{default:n(()=>[Y(o(V,{style:{"border-radius":"8px"},label:"Cancel",color:"negative",onClick:d.confirmRejection},null,8,["onClick"]),[[W]]),b.value>1?(i(),c(V,{key:0,label:"Previous",style:{background:"transparent","border-radius":"8px",border:"1px solid #5b656f"},onClick:se})):f("",!0),b.value<3?(i(),c(V,{key:1,label:"Next",size:"sm",style:{color:"#fff",width:"144px",height:"40px","flex-shrink":"0","border-radius":"8px",border:"1px solid #5b656f",background:"#000"},onClick:te})):f("",!0),b.value===3?(i(),c(V,{key:2,label:"Submit",size:"sm",style:{color:"#fff",width:"144px",height:"40px","flex-shrink":"0","border-radius":"8px",border:"1px solid #5b656f",background:"#000"},type:"submit"})):f("",!0)]),_:1})]}),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),o(K,{modelValue:d.mapDialog,"onUpdate:modelValue":e[32]||(e[32]=l=>d.mapDialog=l),maximized:""},{default:n(()=>[o($,null,{default:n(()=>{var l;return[o(B,null,{default:n(()=>e[41]||(e[41]=[a("div",{class:"text-h6"},"Transport Route Map",-1)])),_:1}),a("div",Ee,[(l=s.value.transport)!=null&&l.source_lat?(i(),c(Z,{key:0,transport:s.value.transport,onRouteError:d.handleRouteError,class:"h-full",style:{height:"100%",width:"100%"}},null,8,["transport","onRouteError"])):(i(),p("div",Ie," No location data available "))]),o(H,{align:"right"},{default:n(()=>[Y(o(V,{flat:"",label:"Close",color:"primary"},null,512),[[W]])]),_:1})]}),_:1})]),_:1},8,["modelValue"])]),_:1}))}});export{We as default};
