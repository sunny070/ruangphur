import{Q as M,d as G}from"./dayjs.min-DFIUUdL8.js";import{r as b,c as v,o as W,a as o,b as C,w as n,e as x,t as d,f as k,g as t,h as y,i as P,F as O,d as r,Q as i,j as J,k as j,v as q,q as X,b_ as Z,y as p,N as U}from"./app-BHeael7A.js";import{Q as ee}from"./QSelect-DDZxhFw8.js";import{Q as $,a as A}from"./format-CYKmJ8Oj.js";import{Q as te}from"./QLayout-7wX7CmRM.js";import{Q as se}from"./QMenu-aFYmALZq.js";import{Q as le}from"./QPage-DO6UowWf.js";import{_ as de}from"./AdminLayout-BPkz0efM.js";import"./QChip-DfmNLKZN.js";import"./rtl-DFPa-2ov.js";import"./QExpansionItem-OPCk_GRv.js";import"./ClosePopup-B8Woq_MJ.js";const re={class:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-4"},ne={class:"text-lg sm:text-base font-black"},ue={class:"text-xs sm:text-sm"},oe={class:"grid grid-cols-1 md:grid-cols-2 gap-4 pt-9"},ae={class:""},me={class:"flex justify-end pr-16"},ce={class:"table-responsive"},fe={class:"q-table q-table__grid q-mb-lg"},be=["value"],ie={class:"no-print"},Se=Object.assign({layout:de},{__name:"Verified",props:{applications:Array,statusCounts:Object,flash:Object},setup(c){const u=c,a=b(null),F=b([]),m=b(""),g=b([]);b(!1);const B=l=>G(l).format("dddd, MMMM D, YYYY h:mm A");v(()=>g.value.length>0),v(()=>g.value.some(l=>{const s=u.applications.find(e=>e.id===l);return(s==null?void 0:s.status)==="Pending"}));const R=()=>{a.value?w.value=u.applications.filter(l=>l.deceased.district.name===a.value):w.value=u.applications};W(()=>{const l=[...new Set(u.applications.map(s=>s.deceased.district.name))];F.value=l.map(s=>({label:s,value:s}))});const w=v(()=>{let l=u.applications;if(a.value&&(l=l.filter(s=>s.deceased.district.name===a.value)),m.value){const s=m.value.toLowerCase();l=l.filter(e=>e.application_no.toString().toLowerCase().includes(s)||e.applicant.name.toLowerCase().includes(s)||e.deceased.name.toLowerCase().includes(s)||e.applicant.mobile.toString().includes(s)||e.deceased.district.name.toLowerCase().includes(s))}return l}),z=l=>{U.get(route("verifier.applications.show",l))},H=l=>{confirm("Are you sure you want to delete this application?")&&U.delete(`/verifier/applications/${l}`,{onSuccess:()=>{}})},Y=()=>{const s=document.querySelector(".q-table").cloneNode(!0);s.querySelectorAll(".no-print").forEach(h=>h.remove());const f=window.open("","","width=800,height=600");f.document.write(`
        <html>
            <head>
                <title>Print Table</title>
                <style>
                    table {
                        width: 100%;
                        border-collapse: collapse;
                    }
                    th, td {
                        padding: 8px 12px;
                        text-align: left;
                        border-bottom: 1px solid #ddd;
                    }
                    th {
                        background-color: #3A424A;
                        color: white;
                        font-weight: bold;
                    }
                </style>
            </head>
            <body>
                ${s.outerHTML}
            </body>
        </html>
    `),f.document.close(),f.print()},K=v(()=>[{label:"Incoming",count:u.statusCounts.Incoming||0,bgClass:"bg-[#FFF7EF]",textClass:"text-[#FD7900]"},{label:"Verified",count:u.statusCounts.Verified||0,bgClass:"bg-[#EEFFF8]",textClass:"text-[#00AA68]"},{label:"Rejected",count:u.statusCounts.Rejected||0,bgClass:"bg-[#FFF2F2]",textClass:"text-[#FE6262]"},{label:"Pending",count:u.statusCounts.Pending||0,bgClass:"bg-[#F2F8FF]",textClass:"text-[#404CF1]"}]);return(l,s)=>(o(),C(le,{padding:""},{default:n(()=>[c.flash.success?(o(),C(M,{key:0,class:"bg-green-4 text-white",dense:""},{default:n(()=>[x(d(c.flash.success),1)]),_:1})):k("",!0),c.flash.error?(o(),C(M,{key:1,class:"bg-red-4 text-white",dense:""},{default:n(()=>[x(d(c.flash.error),1)]),_:1})):k("",!0),t("div",re,[(o(!0),y(O,null,P(K.value,e=>(o(),y("div",{key:e.label,class:q(`w-full h-[78px] ${e.bgClass} ${e.textClass} p-4`)},[t("h6",ne,d(e.count),1),t("p",ue,d(e.label),1)],2))),128))]),t("div",oe,[t("div",null,[t("div",ae,[r(J,{rounded:"lg",outlined:"",dense:"","bottom-slots":"",modelValue:m.value,"onUpdate:modelValue":s[1]||(s[1]=e=>m.value=e),label:"Search",color:"black",class:"w-full max-w-md"},{append:n(()=>[m.value!==""?(o(),C(i,{key:0,name:"close",onClick:s[0]||(s[0]=e=>m.value=""),class:"cursor-pointer"})):k("",!0),r(i,{name:"search"})]),_:1},8,["modelValue"])])]),t("div",me,[r(j,{size:"sm",flat:"",outlined:"",class:"q-btn-custom flex items-center justify-center",onClick:Y},{default:n(()=>[r(i,{name:"print",size:"16px",class:"q-mr-xs"}),s[4]||(s[4]=t("span",null,"Print",-1))]),_:1}),r(ee,{color:"dark",style:{color:"#000",width:"128px",height:"40px","flex-shrink":"0","border-radius":"8px",border:"1px solid black",background:"transparent"},modelValue:a.value,"onUpdate:modelValue":s[2]||(s[2]=e=>a.value=e),options:F.value,label:"Select District",outlined:"",dense:"",class:"q-mb-md",onInput:R},null,8,["modelValue","options"])])]),t("div",ce,[t("table",fe,[s[8]||(s[8]=t("thead",{class:"bg-[#3A424A] text-white font-bold h-[30px] w-full text-[11px]"},[t("tr",null,[t("th",{class:"no_print"}),t("th",null,"Sl.No."),t("th",null,"APPLICATION NO."),t("th",null,"APPLICANT NAME"),t("th",null,"ADDRESS"),t("th",null,"CONTACT No."),t("th",null,"MITTHI KHUA"),t("th",null,"PLACE OF DEATH"),t("th",null,"KILOMETER"),t("th",null,"AMOUNT CLAIMED"),t("th",null,"ACCOUNT No. OF CLAIMANT"),t("th",null,"IFSC"),t("th",null,"STATUS"),t("th",null,"DIL NI"),t("th",{class:"no-print"},"ACTIONS"),t("th",{class:"print-only"},"SIGNATURE")])],-1)),t("tbody",null,[(o(!0),y(O,null,P(w.value,(e,f)=>{var h,N,S,I,T,Q,V,L,D,E;return o(),y("tr",{key:e.id},[t("td",null,[X(t("input",{class:"no-print",type:"checkbox","onUpdate:modelValue":s[3]||(s[3]=_=>g.value=_),value:e.id},null,8,be),[[Z,g.value]])]),t("td",null,d(f+1),1),t("td",null,d(e==null?void 0:e.application_no),1),t("td",null,d((h=e==null?void 0:e.applicant)==null?void 0:h.name),1),t("td",null,d((N=e==null?void 0:e.applicant)==null?void 0:N.locality),1),t("td",null,d((S=e==null?void 0:e.applicant)==null?void 0:S.mobile),1),t("td",null,d((T=(I=e==null?void 0:e.deceased)==null?void 0:I.district)==null?void 0:T.name),1),t("td",null,d((Q=e==null?void 0:e.deceased)==null?void 0:Q.place_of_death),1),t("td",null,d((V=e==null?void 0:e.transport)==null?void 0:V.distance),1),t("td",null,d((L=e==null?void 0:e.transport)==null?void 0:L.transport_cost),1),t("td",null,d((D=e==null?void 0:e.applicant)==null?void 0:D.account_no),1),t("td",null,d((E=e==null?void 0:e.applicant)==null?void 0:E.ifsc_code),1),t("td",null,[t("div",{class:q([{"status-incoming":(e==null?void 0:e.status)==="Pending","status-rejected":(e==null?void 0:e.status)==="Rejected","status-approved":(e==null?void 0:e.status)==="Verified"},"status-badge"])},d(e==null?void 0:e.status),3)]),t("td",null,d(B(e==null?void 0:e.created_at)),1),t("td",ie,[r(j,{flat:"",icon:"more_vert",style:p(l.buttonStyle)},null,8,["style"]),r(se,null,{default:n(()=>[r(te,null,{default:n(()=>[r($,{clickable:"",onClick:_=>z(e.id)},{default:n(()=>[r(A,{avatar:""},{default:n(()=>[r(i,{size:"sm",name:"visibility"})]),_:1}),r(A,null,{default:n(()=>s[5]||(s[5]=[x("View")])),_:1})]),_:2},1032,["onClick"]),r($,{clickable:"",onClick:_=>H(e.id)},{default:n(()=>[r(A,{avatar:""},{default:n(()=>[r(i,{name:"delete"})]),_:1}),r(A,null,{default:n(()=>s[6]||(s[6]=[x("Delete")])),_:1})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),s[7]||(s[7]=t("td",{class:"print-only"},null,-1))])}),128))])])])]),_:1}))}});export{Se as default};
