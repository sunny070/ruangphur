import{C as z,c as h,D as g,E as j,aR as H,aS as F,r as k,aT as T,aU as W,L as D,o as G,j as O,Q as m,H as K,a9 as J,aV as X,a as v,b as C,w as s,f,i as n,k as Y,aB as Z,g as V,h as x,d as B,t as $,F as A,a5 as ee,N as Q}from"./app-jSku1vCx.js";import{Q as te}from"./QSpace-B8yaITbX.js";import{Q as ae}from"./QTabs-BCaq7a8S.js";import{Q as S,a as y,b as q}from"./format-C6r4MtX8.js";import{Q as ne}from"./QChip-DD3s9r6w.js";import{_ as oe,Q as I}from"./AdminLayout-Cm53CRJt.js";import{Q as le}from"./QMenu-B9xFxoVG.js";import{Q as se}from"./QPage-C99ylTjV.js";import{u as re}from"./use-quasar-CLQ07CRK.js";import"./QLayout-Cja8Z5W6.js";import"./rtl-DFPa-2ov.js";import"./DropdownLink-DOWg3r91.js";const ue=z({name:"QBtnGroup",props:{unelevated:Boolean,outline:Boolean,flat:Boolean,rounded:Boolean,square:Boolean,push:Boolean,stretch:Boolean,glossy:Boolean,spread:Boolean},setup(e,{slots:r}){const l=h(()=>{const u=["unelevated","outline","flat","rounded","square","push","stretch","glossy"].filter(d=>e[d]===!0).map(d=>`q-btn-group--${d}`).join(" ");return`q-btn-group row no-wrap${u.length!==0?" "+u:""}`+(e.spread===!0?" q-btn-group--spread":" inline")});return()=>g("div",{class:l.value},j(r.default))}}),ie=Object.keys(H);function de(e){return ie.reduce((r,l)=>{const u=e[l];return u!==void 0&&(r[l]=u),r},{})}const ce=z({name:"QBtnDropdown",props:{...H,...F,modelValue:Boolean,split:Boolean,dropdownIcon:String,contentClass:[Array,String,Object],contentStyle:[Array,String,Object],cover:Boolean,persistent:Boolean,noRouteDismiss:Boolean,autoClose:Boolean,menuAnchor:{type:String,default:"bottom end"},menuSelf:{type:String,default:"top end"},menuOffset:Array,disableMainBtn:Boolean,disableDropdown:Boolean,noIconAnimation:Boolean,toggleAriaLabel:String},emits:["update:modelValue","click","beforeShow","show","beforeHide","hide"],setup(e,{slots:r,emit:l}){const{proxy:u}=K(),d=k(e.modelValue),c=k(null),w=T(),i=h(()=>{const t={"aria-expanded":d.value===!0?"true":"false","aria-haspopup":"true","aria-controls":w.value,"aria-label":e.toggleAriaLabel||u.$q.lang.label[d.value===!0?"collapse":"expand"](e.label)};return(e.disable===!0||e.split===!1&&e.disableMainBtn===!0||e.disableDropdown===!0)&&(t["aria-disabled"]="true"),t}),a=h(()=>"q-btn-dropdown__arrow"+(d.value===!0&&e.noIconAnimation===!1?" rotate-180":"")+(e.split===!1?" q-btn-dropdown__arrow-container":"")),o=h(()=>W(e)),b=h(()=>de(e));D(()=>e.modelValue,t=>{c.value!==null&&c.value[t?"show":"hide"]()}),D(()=>e.split,p);function L(t){d.value=!0,l("beforeShow",t)}function N(t){l("show",t),l("update:modelValue",!0)}function P(t){d.value=!1,l("beforeHide",t)}function M(t){l("hide",t),l("update:modelValue",!1)}function R(t){l("click",t)}function U(t){J(t),p(),l("click",t)}function E(t){c.value!==null&&c.value.toggle(t)}function _(t){c.value!==null&&c.value.show(t)}function p(t){c.value!==null&&c.value.hide(t)}return Object.assign(u,{show:_,hide:p,toggle:E}),G(()=>{e.modelValue===!0&&_()}),()=>{const t=[g(O,{class:a.value,name:e.dropdownIcon||u.$q.iconSet.arrow.dropdown})];return e.disableDropdown!==!0&&t.push(g(le,{ref:c,id:w.value,class:e.contentClass,style:e.contentStyle,cover:e.cover,fit:!0,persistent:e.persistent,noRouteDismiss:e.noRouteDismiss,autoClose:e.autoClose,anchor:e.menuAnchor,self:e.menuSelf,offset:e.menuOffset,separateClosePopup:!0,transitionShow:e.transitionShow,transitionHide:e.transitionHide,transitionDuration:e.transitionDuration,onBeforeShow:L,onShow:N,onBeforeHide:P,onHide:M},r.default)),e.split===!1?g(m,{class:"q-btn-dropdown q-btn-dropdown--simple",...b.value,...i.value,disable:e.disable===!0||e.disableMainBtn===!0,noWrap:!0,round:!1,onClick:R},{default:()=>j(r.label,[]).concat(t),loading:r.loading}):g(ue,{class:"q-btn-dropdown q-btn-dropdown--split no-wrap q-btn-item",rounded:e.rounded,square:e.square,...o.value,glossy:e.glossy,stretch:e.stretch},()=>[g(m,{class:"q-btn-dropdown--current",...b.value,disable:e.disable===!0||e.disableMainBtn===!0,noWrap:!0,round:!1,onClick:U},{default:r.label,loading:r.loading}),g(m,{class:"q-btn-dropdown__arrow-container q-anchor--skip",...i.value,...o.value,disable:e.disable===!0||e.disableDropdown===!0,rounded:e.rounded,color:e.color,textColor:e.textColor,dense:e.dense,size:e.size,padding:e.padding,ripple:e.ripple},()=>t)])}}}),fe={class:"row q-gutter-md"},ge={class:"flex zcard justify-between flex-inline col-12 q-pa-md"},be={class:"col-12 zcard q-pa-md"},me={class:"flex flex-inline items-center q-gutter-sm"},ve={class:"col-12"},he={class:"flex q-gutter-sm"},xe=Object.assign({layout:oe},{__name:"Index",props:["users","search"],setup(e){const r=re();k("");const l=e,u=X({search:l==null?void 0:l.search,tab:route().current()}),d=i=>{Q.get(route("user.index"),{search:u.search})},c=i=>{Q.get(route(i))},w=i=>{r.dialog({title:"Confirm",message:"Would you like to delete?",cancel:!0,persistent:!0}).onOk(()=>{r.loading.show(),Q.delete(route("user.destroy",i),{onSuccess:()=>{r.notify({type:"positive",message:"User deleted successfully"})},onError:a=>{r.notify({type:"negative",message:(a==null?void 0:a.message)||"Failed to delete user."})},onFinish:()=>{r.loading.hide()}})}).onCancel(()=>{}).onDismiss(()=>{})};return(i,a)=>(v(),C(se,{padding:""},{default:s(()=>[a[7]||(a[7]=f("p",{class:"page-title"},"Users",-1)),f("div",fe,[f("div",ge,[n(m,{onClick:a[0]||(a[0]=o=>i.$inertia.get(i.route("user.create"))),rounded:"",label:"New user",color:"primary"}),n(ae,{stretch:"",shrink:"",modelValue:u.tab,"onUpdate:modelValue":[a[2]||(a[2]=o=>u.tab=o),c],align:"start"},{default:s(()=>[n(te),n(Y,{modelValue:u.search,"onUpdate:modelValue":a[1]||(a[1]=o=>u.search=o),autofocus:"",outlined:"",dense:"",onKeyup:Z(d,["enter"]),"bg-color":"white",placeholder:"Search"},{append:s(()=>[n(O,{name:"search"})]),_:1},8,["modelValue"])]),_:1},8,["modelValue"])]),f("div",be,[n(I,{separator:""},{default:s(()=>[(v(!0),V(A,null,x(e.users.data,o=>(v(),C(S,{key:o.id},{default:s(()=>[n(y,null,{default:s(()=>[n(q,{class:"ztext"},{default:s(()=>[B($((o==null?void 0:o.name)??"--"),1)]),_:2},1024),n(q,{class:"ztext",caption:""},{default:s(()=>[B($((o==null?void 0:o.email)??"--"),1)]),_:2},1024)]),_:2},1024),n(y,{side:""},{default:s(()=>[f("div",me,[(v(!0),V(A,null,x(o.roles,b=>(v(),C(ne,{key:i.name,label:b.name},null,8,["label"]))),128)),n(ee,{size:"sm",vertical:""}),n(ce,{class:"q-ma-none q-pa-sm",flat:"",rounded:"","dropdown-icon":"more_vert"},{default:s(()=>[n(I,{separator:""},{default:s(()=>[n(S,{onClick:b=>i.$inertia.get(i.route("user.edit",o)),clickable:""},{default:s(()=>[n(y,null,{default:s(()=>[n(q,{class:"ztext"},{default:s(()=>a[5]||(a[5]=[B("Edit")])),_:1})]),_:1})]),_:2},1032,["onClick"]),n(S,{onClick:b=>w(o),clickable:""},{default:s(()=>[n(y,null,{default:s(()=>[n(q,{class:"ztext"},{default:s(()=>a[6]||(a[6]=[B("Delete")])),_:1})]),_:1})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)])]),_:2},1024)]),_:2},1024))),128))]),_:1}),f("div",ve,[f("div",he,[n(m,{disable:!e.users.prev_page_url,onClick:a[3]||(a[3]=o=>i.$inertia.get(e.users.prev_page_url)),flat:"",round:"",icon:"chevron_left"},null,8,["disable"]),n(m,{disable:!e.users.next_page_url,onClick:a[4]||(a[4]=o=>i.$inertia.get(e.users.next_page_url)),flat:"",round:"",icon:"chevron_right"},null,8,["disable"])])])])])]),_:1}))}});export{xe as default};
