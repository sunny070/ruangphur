import{E as Q,L as S}from"./index-CQt7y46R.js";import{Q as R}from"./QPage-BiOgDWdw.js";import{r as a,e as _,U as j,o as V,a as D,b as s,u as e,g as r,j as t,l as $,t as U,q as A,s as B,d as I,y as P,Q as g,z as T}from"./app-a35SYv1t.js";import{W as E}from"./WebLayout-BgXb2OyO.js";import{_ as O}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./QLayout-0vXNl2tw.js";import"./format-CnVq-veo.js";import"./QTabs-BvaerM60.js";import"./rtl-DFPa-2ov.js";const W={class:"container"},H={class:"input-container"},J={class:"info-container"},X=40,Y=Object.assign({layout:E},{__name:"Maps",setup(Z){const L=a({lat:23.164543,lng:92.9375739}),i=a(null),u=a(null),C=a(""),q=a(""),z=a(""),k=a(""),F=a(""),G=a(""),M=a(0),b=a(0),d=a(!1),v=a(!1),y=a(null);_(()=>{j(()=>{typeof google<"u"?y.value=new google.maps.Geocoder:console.error("Google Maps API not loaded.")})});const x=(n,l)=>{y.value&&y.value.geocode({location:n},(o,m)=>{if(m==="OK"&&o[0]){const c=o[0].formatted_address;l==="source"?(C.value=c,q.value=n.lat,z.value=n.lng):l==="destination"&&(k.value=c,F.value=n.lat,G.value=n.lng),K()}else console.error("Geocoder failed due to:",m)})},p=(n,l)=>{const o={lat:n.latLng.lat(),lng:n.latLng.lng()};l==="source"?(i.value=o,x(o,"source")):l==="destination"&&(u.value=o,x(o,"destination"))},K=()=>{if(i.value&&u.value){const l=f(u.value.lat-i.value.lat),o=f(u.value.lng-i.value.lng),m=f(i.value.lat),c=f(u.value.lat),w=Math.sin(l/2)*Math.sin(l/2)+Math.cos(m)*Math.cos(c)*Math.sin(o/2)*Math.sin(o/2),N=2*Math.atan2(Math.sqrt(w),Math.sqrt(1-w));M.value=(6371*N).toFixed(2),b.value=(M.value*X).toFixed(2)}},f=n=>n*(Math.PI/180);return(n,l)=>(V(),D(e(R),{padding:""},{default:s(()=>[r("div",W,[l[16]||(l[16]=r("h2",null,"Transportation Map",-1)),r("div",H,[t(e($),{modelValue:C.value,"onUpdate:modelValue":l[0]||(l[0]=o=>C.value=o),label:"Source Locality",readonly:"",onClick:l[1]||(l[1]=o=>d.value=!0)},null,8,["modelValue"]),t(e($),{modelValue:k.value,"onUpdate:modelValue":l[2]||(l[2]=o=>k.value=o),label:"Destination Locality",readonly:"",onClick:l[3]||(l[3]=o=>v.value=!0)},null,8,["modelValue"])]),r("div",J,[r("p",null,"Distance: "+U(M.value)+" km",1),r("p",null,"Transport Cost: â‚¹"+U(b.value),1)]),t(e(T),{modelValue:d.value,"onUpdate:modelValue":l[8]||(l[8]=o=>d.value=o)},{default:s(()=>[t(e(A),{style:{width:"90vw","max-width":"600px"}},{default:s(()=>[t(e(B),null,{default:s(()=>[l[14]||(l[14]=r("h6",null,"Select Source Location",-1)),t(e(Q),{center:L.value,zoom:7,class:"dialog-map",onClick:l[5]||(l[5]=o=>p(o,"source"))},{default:s(()=>[i.value?(V(),D(e(S),{key:0,position:i.value,options:{position:i.value,label:"S"},onDragend:l[4]||(l[4]=o=>p(o,"source"))},null,8,["position","options"])):I("",!0)]),_:1},8,["center"])]),_:1}),t(e(P),{align:"right"},{default:s(()=>[t(e(g),{flat:"",label:"Cancel",onClick:l[6]||(l[6]=o=>d.value=!1)}),t(e(g),{flat:"",label:"Confirm",color:"primary",onClick:l[7]||(l[7]=o=>d.value=!1)})]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(e(T),{modelValue:v.value,"onUpdate:modelValue":l[13]||(l[13]=o=>v.value=o)},{default:s(()=>[t(e(A),{style:{width:"90vw","max-width":"600px"}},{default:s(()=>[t(e(B),null,{default:s(()=>[l[15]||(l[15]=r("h6",null,"Select Destination Location",-1)),t(e(Q),{center:L.value,zoom:7,class:"dialog-map",onClick:l[10]||(l[10]=o=>p(o,"destination"))},{default:s(()=>[u.value?(V(),D(e(S),{key:0,position:u.value,options:{position:u.value,label:"D"},onDragend:l[9]||(l[9]=o=>p(o,"destination"))},null,8,["position","options"])):I("",!0)]),_:1},8,["center"])]),_:1}),t(e(P),{align:"right"},{default:s(()=>[t(e(g),{flat:"",label:"Cancel",onClick:l[11]||(l[11]=o=>v.value=!1)}),t(e(g),{flat:"",label:"Confirm",color:"primary",onClick:l[12]||(l[12]=o=>v.value=!1)})]),_:1})]),_:1})]),_:1},8,["modelValue"])])]),_:1}))}}),ul=O(Y,[["__scopeId","data-v-2268f675"]]);export{ul as default};
