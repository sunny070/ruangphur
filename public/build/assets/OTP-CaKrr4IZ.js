import{r as p,e as h,o as q,a as d,f as B,g as n,h as l,b as o,t as _,q as R,c as f,j,F as A,Q as C,u as F,i as L,T as b,a5 as m,l as S,a6 as U}from"./app-DGLM-g85.js";import{Q as E}from"./QForm-DjvLiPRP.js";import{Q as N}from"./QPage-D6NK3abj.js";import{a as I,b as K}from"./QLayout-BaQxdw5U.js";import{W as M}from"./WebLayout-m1NzZE6g.js";import{d as D}from"./index-B3OQxxRs.js";import"./format-DzI8yonQ.js";import"./QTabs-CIqXt7Hb.js";import"./rtl-DFPa-2ov.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./index-CO-NgvQT.js";const W={class:"border w-[412px] h-[280px] text-center"},$={id:"q-app",style:{"min-height":"100vh"}},z={class:"q-pa-md"},G={class:"row q-gutter-x-sm justify-center"},H={class:"grid grid-cols-2 items-center"},J={key:0,class:"text-caption q-mt-sm text-right"},X={key:1},i=4,ie=Object.assign({layout:M},{__name:"OTP",props:["phone"],setup(O){const k=O,u=p(Array(i).fill("")),r=p(0),P=h(()=>r.value>0),v=h(()=>u.value.join("")),T=()=>{v.value.length===i?b({otp:v.value}).post(route("form.validateOtp")):m.create({message:"Please enter a valid OTP.",color:"negative"})},g=()=>{r.value=30;const e=setInterval(()=>{r.value--,r.value<=0&&clearInterval(e)},1e3)},x=()=>{b({}).post(route("form.resendOtp"),{preserveScroll:!0,onSuccess:()=>{m.create({message:"OTP resent successfully!",color:"positive"}),g()},onError:t=>{m.create({message:t.error||"Failed to resend OTP",color:"negative"})}})};q(g);const y=p([]),V=(e,t)=>{e&&(y.value[t]=e)},c=e=>{e>=0&&e<i&&y.value[e].select()},w=(e,t)=>{const s=e.key;["Tab","Shift","Meta","Control","Alt"].includes(s)||(s==="ArrowLeft"||s==="Backspace"?c(t-1):s==="ArrowRight"&&c(t+1))},Q=(e,t)=>{e&&c(t+1)};return(e,t)=>(d(),B(I,null,{default:n(()=>[l(K,null,{default:n(()=>[l(N,{padding:"",class:"flex justify-center"},{default:n(()=>[o("div",W,[o("div",null,[t[0]||(t[0]=o("h5",null,"Enter OTP to verify",-1)),o("p",null,"An OTP has been sent to "+_(k.phone),1)]),l(E,{onSubmit:R(T,["prevent"]),class:"q-gutter-md"},{default:n(()=>[o("div",$,[o("div",z,[o("div",G,[(d(),f(A,null,j(i,s=>l(S,U({outlined:"",modelValue:u.value[s-1],"onUpdate:modelValue":a=>u.value[s-1]=a,ref_for:!0},e.$attrs,{onKeyup:a=>w(a,s-1),"onUpdate:modelValue":a=>Q(a,s-1),key:s,ref_for:!0,ref:a=>V(a,s-1),maxlength:"1","input-class":"text-center",style:{width:"6ch"}}),null,16,["modelValue","onUpdate:modelValue","onKeyup"])),64))])]),l(C,{label:"Verify",color:"black",type:"submit"}),o("div",H,[r.value>0?(d(),f("p",J," Resend OTP in "+_(r.value)+" seconds ",1)):(d(),f("p",X,"ddddddddddddddddddddddddddd")),l(F(D.Link),{label:"Resend OTP",onClick:x,disabled:P.value,color:"dark",class:""},{default:n(()=>t[1]||(t[1]=[L(" Resend OTP ")])),_:1},8,["disabled"])])]),t[2]||(t[2]=o("div",{class:""},null,-1))]),_:1})])]),_:1})]),_:1})]),_:1}))}});export{ie as default};
